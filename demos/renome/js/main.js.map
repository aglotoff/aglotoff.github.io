{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/utils/lazy-loader.js","webpack:///./src/blocks/common/header/header.js","webpack:///./src/js/utils.js","webpack:///./src/blocks/common/nav/nav.js","webpack:///./src/blocks/portfolio/portfolio-filter/portfolio-filter.js","webpack:///./src/blocks/portfolio/portfolio-grid/portfolio-grid.js","webpack:///./src/blocks/common/mini-cart/mini-cart.js","webpack:///./src/blocks/common/search/search.js","webpack:///./src/blocks/common/tabs/tabs.js","webpack:///./src/blocks/about/about-gallery/about-gallery.js","webpack:///./src/blocks/contact/contact-form/contact-form.js","webpack:///./src/blocks/contact/map/map.js","webpack:///./src/blocks/index/gallery/gallery.js","webpack:///./src/blocks/menu/menu/menu.js","webpack:///./src/blocks/reservation/reservation-form/reservation-form.js","webpack:///./src/blocks/index/slider/slider.js","webpack:///./src/blocks/index/specials-slider/specials-slider.js","webpack:///./src/blocks/portfolio/portfolio/portfolio.js","webpack:///./src/blocks/shop/product-gallery/product-gallery.js","webpack:///./src/blocks/portfolio/project-slider/project-slider.js","webpack:///./src/blocks/blog/blog-gallery/blog-gallery.js","webpack:///./src/blocks/blog/comment/comment.js","webpack:///./src/blocks/blog/comment-form/comment-form.js","webpack:///./src/blocks/blog/share/share.js","webpack:///./src/blocks/shop/checkout/checkout.js","webpack:///./src/blocks/shop/payment/payment.js","webpack:///./src/blocks/shop/product/product.js","webpack:///./src/blocks/shop/review-form/review-form.js","webpack:///./src/blocks/shop/shipping-calc/shipping-calc.js","webpack:///./src/blocks/shop/shop-filter/shop-filter.js","webpack:///./src/blocks/common/page/page.js","webpack:///./src/js/main.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","$images","BUFFER_HEIGHT","LAZY_SELECTOR","lazy_loader","init","$","scanImages","length","filter","$elem","windowBottom","$img","this","window","scrollTop","height","offset","top","parent","is","siblings","forEach","$source","attr","removeAttr","removeClass","loadImage","initModule","$page","click","trigger","$nav","$menuToggle","$menu","$scrollpanes","$submenus","menuDrilldown","$portfolio","$filter","$inner","$toggle","$list","$btns","dropdownLogic","listboxLogic","$grid","$container","$sizer","$document","document","dropdownProto","_onOutsideClick","event","target","_$container","contains","hide","_onSwitcherClick","_isExpanded","show","_onSwitcherKeydown","which","preventDefault","_onSwitcherKeyup","_onKeydown","_$switcher","focus","_this","setTimeout","on","focusin","_onToggle","off","pause","keydown","keyup","_hoverToggles","mouseenter","_onMouseenter","mouseleave","_onMouseleave","unpause","hover","makeDropdown","$switcher","options","dropdown","onToggle","hoverToggles","drilldownChain","activeDrilldown","drilldownProto","_onDocumentClick","_onToggleClick","_onTrapDeactivate","prevDrilldown","pop","_trap","_this2","push","activate","deactivate","_$toggle","makeDrilldown","drilldown","focusTrap","clickOutsideDeactivates","escapeDeactivates","initialFocus","onDeactivate","listboxProto","keyActions","_orientation","verticalKeyActions","horizontalKeyActions","firstTab","selectItem","lastTab","_$items","prevTab","nextIndex","_activeIndex","nextTab","_onSelect","setOrientation","orientation","_defineProperty","_verticalKeyActions","_horizontalKeyActions","makeListbox","$items","listbox","onSelect","each","$minicart","find","open","toggleClass","String","isMobile","toggleMenu","$submenu","$submenuToggle","prev","$parentItem","closest","$submenuClose","first","$firstLink","not","onSubmenuToggle","drilldownLogic","data","targetId","$target","animate","Math","max","handleResize","outerWidth","$search","$close","popupFocusTrap","addClass","verticalLayout","allTabs","tabsProto","_onTabSelect","next","$prevLink","_$links","eq","$prevPanel","_$panels","$nextLink","$nextPanel","aria-selected","tabindex","_$list","_logic","tabs","screenWidth","tab","magnificPopup","delegate","mainClass","gallery","enabled","tCounter","closeMarkup","arrowMarkup","callbacks","beforeOpen","wrap","role","aria-label","validate","errorClass","highlight","element","hasClass","unhighlight","coords","lat","lng","style","featureType","elementType","stylers","color","lightness","weight","visibility","saturation","map","google","maps","Map","zoom","center","disableDefaultUI","mapTypes","set","StyledMapType","setMapTypeId","Marker","position","setIcon","type","openingHours","start","end","updateTimeSelect","$time","startMoment","timeArray","hours","day","moment","hour","format","add","getAvailableTimes","selectedTime","val","$options","time","text","prop","empty","append","initSelect","$select","select2","theme","width","minimumResultsForSearch","Infinity","$selection","currentMoment","minutes","year","month","date","$form","$date","$people","Pikaday","field","defaultDate","toDate","setDefaultDate","minDate","maxDate","getMoment","rules","required","validDate","onSlickBeforeChange","slick","current","$slides","$slider","$prevArrow","$nextArrow","rows","prevArrow","nextArrow","autoplay","autoplaySpeed","cssEase","fade","speed","zIndex","pauseOnFocus","pauseOnHover","sliderProto","applySlideStyles","$slide","order","_this$_params","_params","dOffset","dOpacity","dScale","css","left","opacity","transform","concat","_$slides","updateStyles","total","slide","prevSlide","_isSliding","activeIndex","$prevSlide","$movingSlide","nextSlide","_this3","slider","steps","onFilterSelect","$prevBtn","$nextBtn","activeFilter","onListClick","onListKeydown","onToggleFocusin","onDropdownToggle","shuffleInstance","createPortfolioItem","$item","categories","join","title","link","src","image","alt","$categories","cat","$catItem","$catLink","href","data-filter","toLowerCase","$moreBtn","$gallery","$links","fakeItems","onFilterChange","sel","index","PortfolioFilter","PortfolioGrid","onMoreBtnClick","$d","$loader","insertAfter","Deferred","resolve","items","more","promise","then","response","_$","when","apply","_toConsumableArray","item","Image","newItems","insertBefore","fail","always","remove","Shuffle","itemSelector","sizer","dots","responsive","breakpoint","settings","$commentForm","id","prependTo","$replyTo","$share","$drop","onCheckboxChange","slideToggle","change","ignore","errorPlacement","error","prepend","$payment","$radios","$desc","slideUp","slideDown","onAddBtnClick","onProductFocusin","onProductFocusout","$product","focusout","onSliderBeforechange","currentSlide","$link","onLinkClick","arrows","$calc","$country","formExpanded","placeholder","RESIZE_INTERVAL","SCROLL_INTERVAL","HeaderStates","headerState","$header","isHeaderTransparent","resizeTimer","scrollTimer","wasScrolled","updateHeaderStyles","newState","handleWindowScroll","LazyLoader","handleWindowResize","Nav","Portfolio","Tabs","debounceWindowResize","clearTimeout","throttleWindowScroll","initBlock","resize","scroll","Header","Minicart","Search","AboutGallery","ContactForm","ContactMap","Gallery","Menu","ReservationForm","Slider","SpecialsSlider","ProjectSlider","BlogGallery","Share","Comment","CommentForm","Checkout","Payment","Product","ProductGallery","ReviewForm","ShippingCalc","ShopFilter"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 448);\n","/**\r\n * @file Lazy loader for images\r\n */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\nconst BUFFER_HEIGHT = 50;\r\nconst LAZY_SELECTOR = '.lazy';\r\n\r\nlet $images;\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// -------------------------- BEGIN UTILITY FUNCTIONS -------------------------\r\n\r\n/**\r\n * Check if <tt>elem</tt> is in the browser's viewport.\r\n * \r\n * @param {JQuery} $elem The element to check\r\n * @return {boolean} <tt>true</tt> if the element is in the viewport,\r\n *      <tt>false</tt> otherwise\r\n */\r\nfunction isInViewport($elem) {\r\n    const windowBottom = $(window).scrollTop() + $(window).height();\r\n    return $elem.offset().top < (windowBottom + BUFFER_HEIGHT);\r\n}\r\n\r\n// --------------------------- END UTILITY FUNCTIONS --------------------------\r\n\r\n// ----------------------------- BEGIN DOM METHODS ----------------------------\r\n\r\n/**\r\n * Lazy-load the given <tt>img</tt> element.\r\n * \r\n * @param {JQuery} $img The image element\r\n */\r\nfunction loadImage($img) {\r\n    if ($img.parent().is('picture')) {\r\n        $img.siblings('source').forEach(function() {\r\n            const $source = $(this);\r\n            $source\r\n                .attr('srcset', $source.attr('data-srcset'))\r\n                .removeAttr('data-srcset');\r\n        });\r\n    }\r\n\r\n    $img\r\n        .attr('src', $img.attr('data-src'))\r\n        .attr('srcset', $img.attr('data-srcset'))\r\n        .removeAttr('data-src data-srcset')\r\n        .removeClass('lazy');\r\n}\r\n\r\n// ------------------------------ END DOM METHODS -----------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n\r\n/**\r\n * Initialize the lazy image loader\r\n */\r\nfunction init() {\r\n    $images = $(LAZY_SELECTOR);\r\n}\r\n\r\n/**\r\n * Load all images that have been scrolled into the viewport for the first time\r\n */\r\nfunction scanImages() {\r\n    if ($images.length === 0) {\r\n        return;\r\n    }\r\n\r\n    $images = $images.filter(function() {\r\n        const $img = $(this);\r\n\r\n        if (!isInViewport($img)) {\r\n            return true;\r\n        }\r\n        \r\n        loadImage($img);        \r\n\r\n        return false;\r\n    });\r\n}\r\n\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n\r\nexport default {\r\n    init,\r\n    scanImages,\r\n};\r\n","/**\r\n * @file Implementation of the header block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the header module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    const $page         = $('.page');\r\n    const $searchToggle = $('.header__search-toggle');\r\n\r\n    $searchToggle.click(function onSearchToggle() {\r\n        $page.trigger('search');\r\n    });\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Miscellaneous utility functions and classes\r\n * @author Andrey Glotov\r\n */\r\n\r\n/* global focusTrap */\r\n\r\nconst KEY_ESC   = 27;\r\nconst KEY_SPACE = 32;\r\nconst KEY_END   = 35;\r\nconst KEY_HOME  = 36;\r\nconst KEY_LEFT  = 37;\r\nconst KEY_UP    = 38;\r\nconst KEY_RIGHT = 39;\r\nconst KEY_DOWN  = 40;\r\n\r\nconst $document = $(document);\r\n\r\nconst dropdownProto = {\r\n    _onOutsideClick(event) {\r\n        const target = event.target;\r\n        if (!(\r\n            target === document\r\n            || this._$container.is($(target))\r\n            || $.contains(this._$container.get(0), target)\r\n        )) {\r\n            this.hide();\r\n        }\r\n    },\r\n\r\n    _onSwitcherClick() {\r\n        if (!this._isExpanded) {\r\n            this.show();\r\n        } else {\r\n            this.hide();\r\n        }\r\n    },\r\n\r\n    _onSwitcherKeydown(event) {\r\n        if (event.which === KEY_SPACE) {\r\n            event.preventDefault();\r\n            \r\n            if (!this._isExpanded) {\r\n                this.show();\r\n            } else {\r\n                this.hide();\r\n            }\r\n        }\r\n    },\r\n\r\n    _onSwitcherKeyup(event) {\r\n        if (event.which === KEY_SPACE) {\r\n            event.preventDefault();\r\n        }\r\n    },\r\n\r\n    _onKeydown(event) {\r\n        if (event.which === KEY_ESC) {\r\n            this.hide();\r\n            this._$switcher.focus();\r\n        }\r\n    },\r\n\r\n    show() {\r\n        this._isExpanded = true;\r\n\r\n        setTimeout(() => {\r\n            $document.on({\r\n                click   : this._onOutsideClick,\r\n                focusin : this._onOutsideClick,\r\n            });\r\n            this._$container.on('keydown', this._onKeydown);\r\n\r\n            if (this._onToggle) {\r\n                this._onToggle(true);\r\n            }\r\n        }, 0);\r\n\r\n        return this;\r\n    },\r\n\r\n    hide() {\r\n        this._isExpanded = false;\r\n\r\n        $document.off({\r\n            click   : this._onOutsideClick,\r\n            focusin : this._onOutsideClick,\r\n        });\r\n        this._$container.off('keydown', this._onKeydown);\r\n\r\n        if (this._onToggle) {\r\n            this._onToggle(false);\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n    pause() {\r\n        this._$switcher\r\n            .off({\r\n                click   : this._onSwitcherClick,\r\n                keydown : this._onSwitcherKeydown,\r\n                keyup   : this._onSwitcherKeyup,\r\n            });\r\n\r\n        if (this._hoverToggles) {\r\n            this._$container.off({\r\n                mouseenter : this._onMouseenter,\r\n                mouseleave : this._onMouseleave,\r\n            });\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n    unpause() {\r\n        this._$switcher\r\n            .click(this._onSwitcherClick)\r\n            .keydown(this._onSwitcherKeydown)\r\n            .keyup(this._onSwitcherKeyup);\r\n\r\n        if (this._hoverToggles) {\r\n            this._$container.hover(this._onMouseenter, this._onMouseleave);\r\n        }\r\n\r\n        return this;\r\n    },\r\n};\r\n\r\nexport const makeDropdown = function($container, $switcher, options) {\r\n    const dropdown = Object.create(dropdownProto);\r\n\r\n    dropdown._$container   = $container;\r\n    dropdown._$switcher    = $switcher;\r\n    dropdown._onToggle     = options.onToggle;\r\n    dropdown._hoverToggles = !!options.hoverToggles;\r\n    dropdown._isExpanded   = false;\r\n\r\n    // Bind the event handlers\r\n    dropdown._onOutsideClick    = dropdown._onOutsideClick.bind(dropdown);\r\n    dropdown._onSwitcherClick   = dropdown._onSwitcherClick.bind(dropdown);\r\n    dropdown._onSwitcherKeydown = dropdown._onSwitcherKeydown.bind(dropdown);\r\n    dropdown._onSwitcherKeyup   = dropdown._onSwitcherKeyup.bind(dropdown);\r\n    dropdown._onKeydown         = dropdown._onKeydown.bind(dropdown);\r\n\r\n    if (options.hoverToggles) {\r\n        dropdown._onMouseenter = dropdown.show.bind(dropdown);\r\n        dropdown._onMouseleave = dropdown.hide.bind(dropdown);\r\n    }\r\n\r\n    dropdown.unpause();\r\n\r\n    return dropdown;\r\n};\r\n\r\n\r\nconst drilldownChain = [];\r\nlet activeDrilldown  = null;\r\n\r\nconst drilldownProto = {\r\n    _onDocumentClick(event) {\r\n        if (!$.contains(this._$container.get(0), event.target)) {\r\n            this.hide();\r\n        }\r\n    },\r\n\r\n    _onToggleClick() {\r\n        if (this._isExpanded) {\r\n            this.hide();\r\n        } else {\r\n            this.show();\r\n        }\r\n    },\r\n\r\n    _onTrapDeactivate() {\r\n        $document.off('click', this._onDocumentClick);\r\n\r\n        if (drilldownChain.length !== 0) {\r\n            const prevDrilldown = drilldownChain.pop();\r\n\r\n            if (prevDrilldown._isExpanded) {\r\n                activeDrilldown = prevDrilldown;\r\n                activeDrilldown._trap.unpause();\r\n            }\r\n        } else {\r\n            activeDrilldown = null;\r\n        }\r\n\r\n        this._isExpanded = false;\r\n\r\n        if (this._onToggle) {\r\n            this._onToggle(false);\r\n        }\r\n    },\r\n\r\n    show() {\r\n        this._isExpanded = true;\r\n\r\n        if (activeDrilldown) {\r\n            activeDrilldown._trap.pause();\r\n            drilldownChain.push(activeDrilldown);\r\n        }\r\n\r\n        activeDrilldown = this;\r\n\r\n        if (this._onToggle) {\r\n            this._onToggle(true);\r\n        }\r\n\r\n        this._trap.activate();\r\n\r\n        setTimeout(() => {\r\n            $document.click(this._onDocumentClick);\r\n        }, 0);\r\n\r\n        return this;\r\n    },\r\n\r\n    hide() {\r\n        this._trap.deactivate();\r\n        return this;\r\n    },\r\n\r\n    pause() {\r\n        this._$toggle.off('click', this._onToggleClick);\r\n        return this;\r\n    },\r\n\r\n    unpause() {\r\n        this._$toggle.click(this._onToggleClick);\r\n        return this;\r\n    },\r\n};\r\n\r\nexport const makeDrilldown = function($container, $toggle, options) {\r\n    const drilldown = Object.create(drilldownProto);\r\n\r\n    drilldown._$container = $container;\r\n    drilldown._$toggle    = $toggle;\r\n    drilldown._onToggle   = options.onToggle;\r\n\r\n    drilldown._trap = new focusTrap($container.get(0), {\r\n        clickOutsideDeactivates : true,\r\n        escapeDeactivates       : true,\r\n\r\n        initialFocus            : options.initialFocus,\r\n        onDeactivate            : drilldown._onTrapDeactivate.bind(drilldown),\r\n    });\r\n\r\n    drilldown._onToggleClick   = drilldown._onToggleClick.bind(drilldown);\r\n    drilldown._onDocumentClick = drilldown._onDocumentClick.bind(drilldown);\r\n\r\n    drilldown.unpause();\r\n\r\n    return drilldown;\r\n};\r\n\r\n\r\nconst listboxProto = {\r\n    _onKeydown(event) {\r\n        const key = event.which;\r\n\r\n        const keyActions = (this._orientation === 'vertical')\r\n            ? verticalKeyActions\r\n            : horizontalKeyActions;\r\n        \r\n        if (keyActions[key]) {\r\n            keyActions[key].call(this);\r\n            return false;\r\n        }\r\n    },\r\n\r\n    firstTab() {\r\n        this.selectItem(0);\r\n    },\r\n\r\n    lastTab() {\r\n        this.selectItem(this._$items.length - 1);\r\n    },\r\n\r\n    prevTab() {\r\n        let nextIndex = this._activeIndex - 1;\r\n        if (nextIndex < 0) {\r\n            nextIndex = this._$items.length - 1;\r\n        }\r\n\r\n        this.selectItem(nextIndex);\r\n    },\r\n\r\n    nextTab() {\r\n        let nextIndex = this._activeIndex + 1;\r\n        if (nextIndex >= this._$items.length) {\r\n            nextIndex = 0;\r\n        }\r\n\r\n        this.selectItem(nextIndex);\r\n    },\r\n\r\n    selectItem(nextIndex) {\r\n        if (this._activeIndex === nextIndex) {\r\n            return;\r\n        }\r\n\r\n        if (this._onSelect) {\r\n            this._onSelect(nextIndex, this._activeIndex);\r\n        }\r\n\r\n        this._activeIndex = nextIndex;\r\n    },\r\n\r\n    setOrientation(orientation) {\r\n        this._orientation = orientation;\r\n    }\r\n};\r\n\r\nconst verticalKeyActions   = {\r\n    [KEY_END]   : listboxProto.lastTab,\r\n    [KEY_HOME]  : listboxProto.firstTab,\r\n    [KEY_UP]    : listboxProto.prevTab,\r\n    [KEY_DOWN]  : listboxProto.nextTab,\r\n};\r\nconst horizontalKeyActions = {\r\n    [KEY_END]   : listboxProto.lastTab,\r\n    [KEY_HOME]  : listboxProto.firstTab,\r\n    [KEY_LEFT]  : listboxProto.prevTab,\r\n    [KEY_RIGHT] : listboxProto.nextTab,\r\n};\r\n\r\nexport const makeListbox = function($container, $items, options) {\r\n    const listbox = Object.create(listboxProto);\r\n\r\n    listbox._$container  = $container;\r\n    listbox._$items      = $items;\r\n    listbox._activeIndex = 0;\r\n    listbox._onSelect    = options.onSelect,\r\n    listbox._onKeydown   = listbox._onKeydown.bind(listbox);\r\n\r\n    $container.keydown(listbox._onKeydown);\r\n    \r\n    $items.each(function(i) {\r\n        $(this).click(function(event) {\r\n            event.preventDefault();\r\n\r\n            listbox.selectItem(i);\r\n        });\r\n    });\r\n\r\n    listbox.setOrientation(options.orientation || 'horizontal');\r\n\r\n    return listbox;\r\n};","/**\r\n * @file Implementation of the navigation block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport {makeDropdown, makeDrilldown} from '../../../js/utils';\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\nconst DESKTOP_BREAKPOINT = 992;  // Minimum desktop screen width\r\n\r\nlet $nav, $menuToggle, $menu, $scrollpanes, $submenus;\r\nlet menuDrilldown;\r\n\r\nlet isMobile = true;\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// ----------------------------- BEGIN DOM METHODS ----------------------------\r\nconst toggleMenu = function(open) {\r\n    $menu.toggleClass('nav__menu_visible', open);\r\n    $scrollpanes.scrollTop(0);\r\n\r\n    $menuToggle\r\n        .toggleClass('hamburger_open', open)\r\n        .attr('aria-expanded', String(open));\r\n};\r\n\r\nconst toggleSubmenu = function toggleSubmenu($submenu, $toggle, open) {\r\n    $submenu.toggleClass('nav__submenu_visible', open);\r\n    $toggle.attr('aria-expanded', String(open));\r\n};\r\n// ------------------------------ END DOM METHODS -----------------------------\r\n\r\n// ---------------------------- BEGIN PUBLIC METHODS --------------------------\r\n/**\r\n * Initialize the navigation block.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    $nav         = $('.nav');\r\n    $menuToggle  = $nav.find('.nav__toggle');\r\n    $menu        = $nav.find('.nav__menu');\r\n    $scrollpanes = $menu.find('.nav__scrollpane');\r\n    $submenus    = $nav.find('.nav__submenu');\r\n\r\n    menuDrilldown = makeDrilldown($nav, $menuToggle, {\r\n        onToggle: toggleMenu,\r\n    });\r\n\r\n    // begin initialize submenus\r\n    $submenus.each(function() {\r\n        const $submenu       = $(this);\r\n        const $submenuToggle = $submenu.prev('.nav__link');\r\n        const $parentItem    = $submenu.closest('.nav__item');\r\n        const $submenuClose  = $submenu.find('.nav__link_back').first();\r\n        const $firstLink     = $submenu\r\n            .find('.nav__link')\r\n            .not('.nav__link_back')\r\n            .first();\r\n\r\n        const onSubmenuToggle = toggleSubmenu.bind(\r\n            null,\r\n            $submenu,\r\n            $submenuToggle\r\n        );\r\n\r\n        // Each submenu has two behavior patterns: drilldown menu for mobile\r\n        // and dropdown menu for larger screens.\r\n        const dropdownLogic  = makeDropdown($parentItem, $submenuToggle, {\r\n            hoverToggles : true,\r\n            onToggle     : onSubmenuToggle,\r\n        });\r\n        // By default, turn off the dropdown logic (mobile-first approach)\r\n        dropdownLogic.pause();\r\n\r\n        const drilldownLogic = makeDrilldown($submenu, $submenuToggle, {\r\n            initialFocus : $firstLink,\r\n            onToggle     : onSubmenuToggle,\r\n        });\r\n\r\n        $submenuClose.click(function onSubmenuClose() {\r\n            drilldownLogic.hide();\r\n        });\r\n\r\n        $submenu.data('dropdown',  dropdownLogic);\r\n        $submenu.data('drilldown', drilldownLogic);\r\n    });\r\n\r\n    // Scroll smoothly to internal links\r\n    $nav.on('click', '.nav__link[href^=\"#\"]', function onInternalLink(event) {\r\n        event.preventDefault();\r\n\r\n        const targetId = $(this).attr('href');\r\n        const $target  = $(targetId);\r\n        if ($target.length === 0) {\r\n            return;\r\n        }\r\n\r\n        if (isMobile) {\r\n            $submenus.each(function() {\r\n                $(this).data('drilldown').hide();\r\n            });\r\n            menuDrilldown.hide();\r\n        }\r\n\r\n        $('html, body').animate({\r\n            scrollTop: Math.max(0, $target.offset().top - 100),\r\n        }, 1000, 'swing', function() {\r\n            $target.focus();\r\n        });\r\n    });\r\n    // end initialize submenus\r\n};\r\n\r\n/**\r\n * Respond to window resize event.\r\n */\r\nexport const handleResize = function() {\r\n    // Switch between drilldown submenus on mobile and dropdown submenus on\r\n    // desktop\r\n    if (!isMobile && ($(window).outerWidth() < DESKTOP_BREAKPOINT)) {\r\n        isMobile = true;\r\n\r\n        $submenus.each(function() {\r\n            $(this).data('dropdown').hide().pause();\r\n            $(this).data('drilldown').unpause();\r\n        });\r\n    } else if (isMobile && ($(window).outerWidth() >= DESKTOP_BREAKPOINT)) {\r\n        isMobile = false;\r\n\r\n        $submenus.each(function() {\r\n            $(this).data('drilldown').hide().pause();\r\n            $(this).data('dropdown').unpause();\r\n        });\r\n\r\n        menuDrilldown.hide();\r\n    }\r\n};\r\n// ----------------------------- END PUBLIC METHODS ---------------------------\r\n","/**\r\n * @file Implementation of the portfolio filter block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport {makeListbox, makeDropdown} from '../../../js/utils';\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\nconst KEY_ENTER = 13;\r\nconst KEY_SPACE = 32;\r\n\r\nlet $portfolio, $filter, $inner, $toggle, $list, $btns;\r\n\r\nlet dropdownLogic, listboxLogic;\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// ----------------------------- BEGIN DOM METHODS ----------------------------\r\nconst showList = function() {\r\n    $toggle\r\n        .attr('aria-expanded', 'true')\r\n        .focusin(onToggleFocusin);\r\n\r\n    $list\r\n        .addClass('portfolio-filter__list_visible')\r\n        .click(onListClick)\r\n        .keydown(onListKeydown)\r\n        .focus();\r\n};\r\n\r\nconst hideList = function() {\r\n    $list\r\n        .removeClass('portfolio-filter__list_visible')\r\n        .off({\r\n            click   : onListClick,\r\n            keydown : onListKeydown,\r\n        });\r\n\r\n    $toggle\r\n        .attr('aria-expanded', 'false')\r\n        .off('focusin', onToggleFocusin);\r\n};\r\n// ------------------------------ END DOM METHODS -----------------------------\r\n\r\n// --------------------------- BEGIN EVENT HANDLERS ---------------------------\r\nconst onFilterSelect = function(next, prev) {\r\n    const $prevBtn = $btns.eq(prev);\r\n    const $nextBtn = $btns.eq(next);\r\n\r\n    $prevBtn\r\n        .removeClass('portfolio-filter__btn_active')\r\n        .attr('aria-selected', 'false');\r\n    $nextBtn\r\n        .addClass('portfolio-filter__btn_active')\r\n        .attr('aria-selected', 'true');\r\n\r\n    const activeFilter = $nextBtn.data('filter');\r\n\r\n    $list.attr('aria-activedescendant', $nextBtn.attr('id'));\r\n\r\n    $portfolio.trigger('filter', activeFilter);\r\n};\r\n\r\nconst onListClick = function() {\r\n    $toggle.focus();\r\n};\r\n\r\nconst onListKeydown = function(event) {\r\n    if (event.which === KEY_ENTER || event.which === KEY_SPACE) {\r\n        event.preventDefault();\r\n\r\n        $toggle.focus();\r\n        return false;\r\n    }\r\n};\r\n\r\nconst onToggleFocusin = function() {\r\n    dropdownLogic.hide();\r\n};\r\n\r\nconst onDropdownToggle = function(open) {\r\n    if (open) {\r\n        showList();\r\n    } else {\r\n        hideList();\r\n    }\r\n};\r\n// ---------------------------- END EVENT HANDLERS ----------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the portfolio filter module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    $portfolio = $('.portfolio');\r\n\r\n    $filter    = $('.portfolio-filter');\r\n    $inner     = $filter.find('.portfolio-filter__inner');\r\n    $toggle    = $inner.find('.portfolio-filter__toggle');\r\n    $list      = $inner.find('.portfolio-filter__list');\r\n    $btns      = $list.find('.portfolio-filter__btn');\r\n\r\n    listboxLogic = makeListbox($list, $btns, {\r\n        orientation : 'vertical',\r\n        onSelect    : onFilterSelect,\r\n    });\r\n\r\n    dropdownLogic = makeDropdown($inner, $toggle, {\r\n        onToggle: onDropdownToggle,\r\n    });\r\n\r\n    return true;\r\n};\r\n\r\n/**\r\n * Set filter orientation.\r\n * @param {string} orientation - 'horizontal' or 'vertical'\r\n */\r\nexport const setOrientation = function(orientation) {\r\n    $list.attr('aria-orientation', orientation);\r\n    listboxLogic.setOrientation(orientation);\r\n\r\n    if (orientation === 'horizontal') {\r\n        dropdownLogic.hide().pause();\r\n    } else {\r\n        dropdownLogic.unpause();\r\n    }\r\n};\r\n\r\n/**\r\n * Apply a filter.\r\n * @param {string} filter - The filter to be applied\r\n */\r\nexport const setFilter = function(filter) {\r\n    const sel = `.portfolio-filter__btn[data-filter=\"${filter}\"]`;\r\n    listboxLogic.selectItem($btns.index($(sel)));\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the portfolio grid block\r\n * @author Andrey Glotov\r\n */\r\n\r\n/* global Shuffle */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\nconst itemHtml = `\r\n<div class=\"portfolio-grid__item\">\r\n    <div class=\"portfolio-grid__item-inner\">\r\n        <img class=\"portfolio-grid__img\" />\r\n        <div class=\"portfolio-grid__text\">\r\n            <h2 class=\"portfolio-grid__title\">\r\n                <a class=\"portfolio-grid__link\"></a>\r\n            </h2>\r\n            <ul class=\"portfolio-grid__cats\">\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</div>\r\n`;\r\n\r\nlet shuffleInstance = null;\r\n\r\nlet $portfolio, $grid, $container, $sizer;\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// -------------------------- BEGIN UTILITY FUNCTIONS -------------------------\r\nconst createPortfolioItem = function(data) {\r\n    const $item = $(itemHtml);\r\n\r\n    $item.attr('data-groups', `[\"${data.categories.join('\",\"')}\"]`);\r\n    \r\n    $item.find('.portfolio-grid__link')\r\n        .text(data.title)\r\n        .attr('href', data.link);\r\n\r\n    $item.find('.portfolio-grid__img')\r\n        .attr({\r\n            src : data.image,\r\n            alt : data.title,\r\n        });\r\n\r\n    const $categories = data.categories.map(function(cat) {\r\n        const $catItem = $('<li></li>')\r\n            .addClass('portfolio-grid__cat-item');\r\n\r\n        const $catLink = $('<a></a>')\r\n            .addClass('portfolio-grid__cat-link')\r\n            .attr({\r\n                'href'        : 'javascript:void(0)',\r\n                'role'        : 'button',\r\n                'data-filter' : cat.toLowerCase(),\r\n            })\r\n            .text(cat);\r\n        \r\n        $catItem.append($catLink);\r\n        return $catItem;\r\n    });\r\n\r\n    $item.find('.portfolio-grid__cats').append($categories);\r\n\r\n    return $item;\r\n};\r\n// --------------------------- END UTILITY FUNCTIONS --------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the portfolio grid module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    $portfolio = $('.portfolio');\r\n\r\n    $grid      = $('.portfolio-grid');\r\n    $container = $grid.find('.portfolio-grid__inner');\r\n    $sizer     = $container.find('.portfolio-grid__sizer');\r\n\r\n    shuffleInstance = new Shuffle($container.get(0), {\r\n        itemSelector : '.portfolio-grid__item',\r\n        sizer        : $sizer.get(0),\r\n    });\r\n\r\n    $container\r\n        .on('click', '.portfolio-grid__cat-link', function onCatLinkClick() {\r\n            $portfolio.trigger('filter', $(this).data('filter'));\r\n        })\r\n        // Until all major browsers support the :focus-within CSS pseudo-class\r\n        // apply a class using JavaScript\r\n        .on('focusin', '.portfolio-grid__text', function onItemFocusin() {\r\n            $(this).addClass('.portfolio-grid__text_has-focus');\r\n        })\r\n        .on('focusout', '.portfolio-grid__text', function onItemFocusout() {\r\n            $(this).removeClass('.portfolio-grid__text_has-focus');\r\n        });\r\n};\r\n\r\n/**\r\n * Apply a filter.\r\n * @param {string} filter - The filter to be applied\r\n */\r\nexport const setFilter = function(filter) {\r\n    shuffleInstance.filter(filter);\r\n};\r\n\r\n/**\r\n * Add new items\r\n * @param {Array} items - the items to be added\r\n */\r\nexport const addItems = function(items) {\r\n    const newItems = $.map(items, createPortfolioItem);\r\n    \r\n    newItems.forEach(($item) => $item.insertBefore($sizer));\r\n\r\n    shuffleInstance.add(newItems.map(($item) => $item.get(0)));\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the mini cart block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport {makeDropdown} from '../../../js/utils';\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the mini cart module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    const $minicart = $('.mini-cart');\r\n    const $toggle   = $minicart.find('.mini-cart__toggle');\r\n\r\n    makeDropdown($minicart, $toggle, {\r\n        hoverToggles : true,\r\n\r\n        onToggle     : function onMinicartToggle(open) {\r\n            $minicart.toggleClass('mini-cart_open', open);\r\n            $toggle.attr('aria-expanded', String(open));\r\n        },\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the search block\r\n * @author Andrey Glotov\r\n */\r\n\r\n/* global focusTrap */\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the search module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    const $page   = $('.page');\r\n    const $search = $('.search');\r\n    const $close  = $search.find('.search__close');\r\n\r\n    const popupFocusTrap = focusTrap($search.get(0), {\r\n        clickOutsideDeactivates : true,\r\n        escapeDeactivates       : true,\r\n        \r\n        onDeactivate            : function onSearchDeactivate() {\r\n            $search.removeClass('search_visible');\r\n        },\r\n    });\r\n\r\n    $page.on('search', function onSearchToggle() {\r\n        $search.addClass('search_visible');\r\n\r\n        // Need to wait 100ms before autofocus works.\r\n        setTimeout(function() {\r\n            popupFocusTrap.activate();\r\n        }, 100);\r\n    });\r\n\r\n    $close.click(function onSearchClose() {\r\n        popupFocusTrap.deactivate();\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the tabs block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport {makeListbox} from '../../../js/utils';\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\nconst TRANSITION_DURATION = 250;\r\nconst MEDIUM_BREAKPOINT   = 768;\r\n\r\nlet verticalLayout = true;\r\n\r\nconst allTabs = [];\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\nconst tabsProto = {\r\n    _onTabSelect(next, prev) {\r\n        const $prevLink  = this._$links.eq(prev);\r\n        const $prevPanel = this._$panels.eq(prev);\r\n        const $nextLink  = this._$links.eq(next);\r\n        const $nextPanel = this._$panels.eq(next);\r\n\r\n        $prevLink\r\n            .removeClass('tabs__link_active')\r\n            .attr({\r\n                'aria-selected' : 'false',\r\n                'tabindex'      : '-1'\r\n            });\r\n\r\n        $nextLink\r\n            .addClass('tabs__link_active')\r\n            .attr({\r\n                'aria-selected' : 'true',\r\n                'tabindex'      : '0'\r\n            })\r\n            .focus();\r\n\r\n        $prevPanel.addClass('tabs__panel_fade');\r\n        $nextPanel.addClass('tabs__panel_fade');\r\n\r\n        setTimeout(() => {\r\n            $prevPanel\r\n                .removeClass('tabs__panel_fade')\r\n                .removeClass('tabs__panel_active');\r\n            $nextPanel\r\n                .removeClass('tabs__panel_fade')\r\n                .addClass('tabs__panel_active');\r\n        }, TRANSITION_DURATION);\r\n    },\r\n\r\n    setOrientation(orientation) {\r\n        this._$list.attr('aria-orientation', orientation);\r\n        this._logic.setOrientation(orientation);\r\n    },\r\n};\r\n\r\n/**\r\n * Initialize the tabs module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    $('.tabs').each(function() {\r\n        const $container = $(this);\r\n\r\n        const tabs = Object.create(tabsProto);\r\n\r\n        tabs._$list    = $container.find('.tabs__list');\r\n        tabs._$links   = tabs._$list.find('.tabs__link');\r\n        tabs._$panels  = $container.find('.tabs__panel');\r\n\r\n        tabs._logic    = makeListbox(tabs._$list, tabs._$links, {\r\n            orientation : 'vertical',\r\n            onSelect    : tabs._onTabSelect.bind(tabs),\r\n        });\r\n\r\n        allTabs.push(tabs);\r\n    });\r\n\r\n    return true;\r\n};\r\n\r\n/**\r\n * Respond to window resize event.\r\n */\r\nexport const handleResize = function() {\r\n    const screenWidth = $(window).outerWidth();\r\n    \r\n    // Switch tabs orientation to vertical on mobile and to horizontal on\r\n    // larger screens.\r\n    if (!verticalLayout && (screenWidth < MEDIUM_BREAKPOINT)) {\r\n        verticalLayout = true;\r\n\r\n        allTabs.forEach(function(tab) {\r\n            tab.setOrientation('vertical');\r\n        });\r\n    } else if (verticalLayout && (screenWidth >= MEDIUM_BREAKPOINT)) {\r\n        verticalLayout = false;\r\n\r\n        allTabs.forEach(function(tab) {\r\n            tab.setOrientation('horizontal');\r\n        });\r\n    }\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the about page gallery block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the specials carousel module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    $('.about-gallery').each(function() {\r\n        $(this).magnificPopup({\r\n            delegate  : '.about-gallery__thumb',\r\n            mainClass : 'lightbox',\r\n            gallery   : {\r\n                enabled  : true,\r\n                tCounter : '',\r\n            },\r\n\r\n            closeMarkup : '<button aria-label=\"Close\" type=\"button\" '\r\n                + 'class=\"mfp-close\">&#215;</button>',\r\n            arrowMarkup : '<button aria-label=\"%title%\" type=\"button\" '\r\n                + 'class=\"mfp-arrow mfp-arrow-%dir%\"></button>',\r\n\r\n            callbacks   : {\r\n                beforeOpen() {\r\n                    this.wrap.attr({\r\n                        'role'       : 'dialog',\r\n                        'aria-label' : 'Gallery',\r\n                    });\r\n                },\r\n            },\r\n        });\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the contact form block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the contact form module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    $('.contact-form').validate({\r\n        errorClass  : 'error contact-form__error',\r\n    \r\n        highlight   : function(element) {\r\n            if ($(element).hasClass('input')) {\r\n                $(element).addClass('input_invalid');\r\n            } else if ($(element).hasClass('text-area')) {\r\n                $(element).addClass('text-area_invalid');\r\n            }\r\n        },\r\n    \r\n        unhighlight : function(element) {\r\n            if ($(element).hasClass('input')) {\r\n                $(element).removeClass('input_invalid');\r\n            } else if ($(element).hasClass('text-area')) {\r\n                $(element).removeClass('text-area_invalid');\r\n            }\r\n        },\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the map block\r\n * @author Andrey Glotov\r\n */\r\n\r\n/* global google */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\nconst ZOOM = 11;\r\n\r\nconst coords = {\r\n    lat : 40.7,\r\n    lng : -73.6\r\n};\r\n\r\nconst style = [{\r\n    featureType : 'water',\r\n    elementType : 'geometry',\r\n    stylers     : [{\r\n        color     : '#e9e9e9',\r\n    },{\r\n        lightness : 17,\r\n    }],\r\n}, {\r\n    featureType : 'landscape',\r\n    elementType : 'geometry',\r\n    stylers     : [{\r\n        color     : '#f5f5f5',\r\n    }, {\r\n        lightness : 20,\r\n    }],\r\n}, {\r\n    featureType : 'road.highway',\r\n    elementType : 'geometry.fill',\r\n    stylers     : [{\r\n        color     : '#ffffff',\r\n    }, {\r\n        lightness : 17,\r\n    }],\r\n}, {\r\n    featureType : 'road.highway',\r\n    elementType : 'geometry.stroke',\r\n    stylers     : [{\r\n        color     : '#ffffff',\r\n    }, {\r\n        lightness : 29,\r\n    }, {\r\n        weight    : 0.2,\r\n    }],\r\n}, {\r\n    featureType : 'road.arterial',\r\n    elementType : 'geometry',\r\n    stylers     : [{\r\n        color     : '#ffffff',\r\n    }, {\r\n        lightness : 18,\r\n    }],\r\n}, {\r\n    featureType : 'road.local',\r\n    elementType : 'geometry',\r\n    stylers     : [{\r\n        color     : '#ffffff',\r\n    }, {\r\n        lightness : 16,\r\n    }],\r\n}, {\r\n    featureType : 'poi',\r\n    elementType : 'geometry',\r\n    stylers     : [{\r\n        color     : '#f5f5f5',\r\n    }, {\r\n        lightness : 21,\r\n    }],\r\n}, {\r\n    featureType : 'poi.park',\r\n    elementType : 'geometry',\r\n    stylers     : [{\r\n        color     : '#dedede',\r\n    }, {\r\n        lightness : 21,\r\n    }],\r\n}, {\r\n    elementType : 'labels.text.stroke',\r\n    stylers     : [{\r\n        visibility : 'on',\r\n    }, {\r\n        color      : '#ffffff',\r\n    }, {\r\n        lightness  : 16,\r\n    }],\r\n}, {\r\n    elementType : 'labels.text.fill',\r\n    stylers     : [{\r\n        saturation : 36,\r\n    }, {\r\n        color      : '#333333',\r\n    }, {\r\n        lightness  : 40,\r\n    }],\r\n}, {\r\n    elementType : 'labels.icon',\r\n    stylers     : [{\r\n        visibility : 'off'\r\n    }],\r\n}, {\r\n    featureType : 'transit',\r\n    elementType : 'geometry',\r\n    stylers     : [{\r\n        color     : '#f2f2f2',\r\n    }, {\r\n        lightness : 19,\r\n    }],\r\n}, {\r\n    featureType : 'administrative',\r\n    elementType : 'geometry.fill',\r\n    stylers     : [{\r\n        color     : '#fefefe',\r\n    }, {\r\n        lightness : 20,\r\n    }],\r\n}, {\r\n    featureType : 'administrative',\r\n    elementType : 'geometry.stroke',\r\n    stylers     : [{\r\n        color     : '#fefefe',\r\n    }, {\r\n        lightness : 17,\r\n    }, {\r\n        weight    : 1.2,\r\n    }],\r\n}];\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the map module.\r\n * @return true;\r\n */\r\nexport const initModule = function() {\r\n    $('.map__container').each(function() {\r\n        const map = new google.maps.Map(this, {\r\n            zoom             : ZOOM,\r\n            center           : coords,\r\n            disableDefaultUI : true,\r\n        });\r\n\r\n        map.mapTypes.set('styled_map', new google.maps.StyledMapType(style));\r\n        map.setMapTypeId('styled_map');\r\n\r\n        const mapMarker = new google.maps.Marker({\r\n            position : coords,\r\n            map      : map\r\n        });\r\n        mapMarker.setIcon('img/map-marker.png');\r\n    });\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the gallery block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the gallery module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    $('.gallery').each(function() {\r\n        $(this).magnificPopup({\r\n            delegate  : '.gallery__thumb-link',\r\n            mainClass : 'lightbox',\r\n            type      : 'image',\r\n            gallery   : {\r\n                enabled  : true,\r\n                tCounter : '',\r\n            },\r\n\r\n            closeMarkup : '<button aria-label=\"Close\" type=\"button\" '\r\n                + 'class=\"mfp-close\">&#215;</button>',\r\n            arrowMarkup : '<button aria-label=\"%title%\" type=\"button\" '\r\n                + 'class=\"mfp-arrow mfp-arrow-%dir%\"></button>',\r\n\r\n            callbacks   : {\r\n                beforeOpen() {\r\n                    this.wrap.attr({\r\n                        'role'       : 'dialog',\r\n                        'aria-label' : 'Gallery',\r\n                    });\r\n                },\r\n            },\r\n        });\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------","/**\r\n * @file Implementation of the menu block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the menu module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    $('.menu').each(function() {\r\n        $(this).magnificPopup({\r\n            delegate  : '.menu-product__link',\r\n            mainClass : 'lightbox',\r\n            type      : 'image',\r\n\r\n            closeMarkup : '<button aria-label=\"Close\" type=\"button\" '\r\n                + 'class=\"mfp-close\">&#215;</button>',\r\n\r\n            callbacks   : {\r\n                beforeOpen() {\r\n                    this.wrap.attr({\r\n                        'role'       : 'dialog',\r\n                        'aria-label' : 'View image',\r\n                    });\r\n                },\r\n            },\r\n        });\r\n    });\r\n    \r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------","/**\r\n * @file Implementation of the reservation form block\r\n * @author Andrey Glotov\r\n */\r\n\r\n/* global Pikaday, moment */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\nconst openingHours = [\r\n    {start: 10, end: 21}, // Sun\r\n    {start: 9,  end: 22}, // Mon\r\n    {start: 9,  end: 22}, // Tue\r\n    {start: 9,  end: 22}, // Wed\r\n    {start: 9,  end: 22}, // Thu\r\n    {start: 9,  end: 22}, // Fri\r\n    {start: 10, end: 21}, // Sat\r\n];\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// -------------------------- BEGIN UTILITY FUNCTIONS -------------------------\r\nconst getStartMoment = function() {\r\n    const currentMoment = moment();\r\n\r\n    // Reservation must be done at least 30 minutes ahead \r\n    currentMoment.add(30, 'minutes');\r\n\r\n    // Round up to nearest half hour\r\n    if ((currentMoment.minutes() % 30) !== 0) {\r\n        currentMoment.add(30 - (currentMoment.minutes() % 30), 'minutes');\r\n    }\r\n\r\n    // If it's too late, allow reservation from only the next day\r\n    if (currentMoment.hours() >= openingHours[currentMoment.day()].end) {\r\n        return moment({\r\n            year  : currentMoment.year(),\r\n            month : currentMoment.month(),\r\n            date  : currentMoment.date() + 1,\r\n        });\r\n    }\r\n\r\n    return currentMoment;\r\n};\r\n\r\nconst getAvailableTimes = function(startMoment) {\r\n    const hours = openingHours[startMoment.day()];\r\n\r\n    const m = moment.max(\r\n        moment(startMoment),\r\n        moment(startMoment).hours(hours.start)\r\n    );\r\n\r\n    const timeArray = [];\r\n\r\n    while (m.hour() < hours.end) {\r\n        timeArray.push(m.format('h:mm A'));\r\n        m.add(30, 'minutes');\r\n    }\r\n\r\n    return timeArray;\r\n};\r\n// --------------------------- END UTILITY FUNCTIONS --------------------------\r\n\r\n// ----------------------------- BEGIN DOM METHODS ----------------------------\r\nconst updateTimeSelect = function($time, startMoment) {\r\n    const timeArray    = getAvailableTimes(startMoment);\r\n    const selectedTime = $time.val();\r\n\r\n    const $options  = timeArray.map(function(time) {\r\n        return $('<option></option>')\r\n            .val(time)\r\n            .text(time)\r\n            .prop('selected', time == selectedTime);\r\n    });\r\n\r\n    $time\r\n        .empty()\r\n        .append($options)\r\n        .trigger('change');\r\n};\r\n\r\nconst initSelect = function($select) {\r\n    $select.select2({\r\n        theme                   : 'theme--default',\r\n        width                   : 'style',\r\n        minimumResultsForSearch : Infinity,\r\n    });\r\n\r\n    const data = $select.data('select2');\r\n    data.$container.addClass('reservation-form__input');\r\n    data.$selection.attr('aria-labelledby', $select.attr('aria-labelledby'));\r\n};\r\n// ------------------------------ END DOM METHODS -----------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the reservation form module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    const startMoment = getStartMoment();\r\n\r\n    $('.reservation-form').each(function() {\r\n        const $form   = $(this);\r\n        const $date   = $form.find('.reservation-form__date');\r\n        const $time   = $form.find('.reservation-form__time');\r\n        const $people = $form.find('.reservation-form__people');\r\n    \r\n        new Pikaday({\r\n            field          : $date.get(0),\r\n    \r\n            defaultDate    : startMoment.toDate(),\r\n            setDefaultDate : true,\r\n    \r\n            // Reservations can be made up to 6 months in advance\r\n            minDate        : startMoment.toDate(),\r\n            maxDate        : moment(startMoment).add(6, 'months').toDate(),\r\n    \r\n            format         : 'DD/MM/YYYY',\r\n            theme          : 'date-picker',\r\n    \r\n            onSelect       : function onSelectDate() {\r\n                updateTimeSelect($time, this.getMoment());\r\n            },\r\n        });\r\n\r\n        initSelect($time);\r\n        initSelect($people);\r\n\r\n        updateTimeSelect($time, startMoment);\r\n\r\n        $form.validate({\r\n            rules: {\r\n                date: {\r\n                    required  : true,\r\n                    validDate : true,\r\n                }\r\n            },\r\n            \r\n            errorClass  : 'error reservation-form__error',\r\n\r\n            highlight   : function(element) {\r\n                $(element).addClass('input_invalid');\r\n            },\r\n            unhighlight : function(element) {\r\n                $(element).removeClass('input_invalid');\r\n            },\r\n        });\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------","/**\r\n * @file Implementation of the slider block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// --------------------------- BEGIN EVENT HANDLERS ---------------------------\r\nconst onSlickBeforeChange = function(event, slick, current, next) {\r\n    // Remove the \"active\" modifier from the previous slide and apply it to the\r\n    // current one\r\n    slick.$slides.eq(current).removeClass('slider__slide_active');\r\n    slick.$slides.eq(next).addClass('slider__slide_active');\r\n};\r\n// ---------------------------- END EVENT HANDLERS ----------------------------\r\n\r\n// ---------------------------- BEGIN PUBLIC METHODS --------------------------\r\n/**\r\n * Initialize the slider module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    $('.slider').each(function() {\r\n        const $slider    = $(this);\r\n        const $container = $('.slider__container', $slider);\r\n        const $prevArrow = $('.slider__arrow_dir_prev', $slider);\r\n        const $nextArrow = $('.slider__arrow_dir_next', $slider);\r\n\r\n        $container.slick({\r\n            rows          : 0,\r\n\r\n            prevArrow     : $prevArrow,\r\n            nextArrow     : $nextArrow,\r\n\r\n            autoplay      : true,\r\n            autoplaySpeed : 5000,\r\n\r\n            cssEase       : 'linear',\r\n            fade          : true,\r\n            speed         : 500,\r\n            zIndex        : 1,\r\n\r\n            pauseOnFocus  : false,\r\n            pauseOnHover  : false,\r\n        });\r\n\r\n        $container.on('beforeChange', onSlickBeforeChange);\r\n    });\r\n};\r\n// ----------------------------- END PUBLIC METHODS ---------------------------","/**\r\n * @file Implementation of the specials slider block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\nconst GUTTER_WIDTH        = 25;\r\nconst MIN_OPACITY         = 0.5;\r\nconst MIN_SCALE           = 0.8;\r\nconst TRANSITION_DURATION = 150;\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\nconst sliderProto = {\r\n    applySlideStyles($slide, order) {\r\n        const {dOffset, dOpacity, dScale} = this._params;\r\n\r\n        $slide.css({\r\n            left      : (order * dOffset) + '%',\r\n            opacity   : (1 - (order * dOpacity)),\r\n            transform : `scale(${1 - (order * dScale)})`,\r\n            zIndex    : this._$slides.length - order,\r\n        });\r\n    },\r\n\r\n    updateStyles() { \r\n        const total    = this._$slides.length;\r\n    \r\n        this._$slides.each((i, slide) => {\r\n            const $slide = $(slide);\r\n\r\n            if ($slide.hasClass('specials-slider__slide_moving')) {\r\n                return;\r\n            }\r\n\r\n            const order = (i - this._activeIndex + total) % total;\r\n            this.applySlideStyles($slide, order);\r\n        });\r\n    },\r\n\r\n    prevSlide() {\r\n        if (this._isSliding) {\r\n            return;\r\n        }\r\n        this._isSliding = true;\r\n\r\n        let activeIndex    = this._activeIndex;\r\n        const $slides      = this._$slides;\r\n\r\n        const $prevSlide = $slides.eq(activeIndex);\r\n\r\n        activeIndex--;\r\n        if (activeIndex < 0) {\r\n            activeIndex = $slides.length - 1;\r\n        }\r\n        this._activeIndex = activeIndex;\r\n\r\n        const $movingSlide = $slides.eq(activeIndex);\r\n        \r\n        $movingSlide.addClass('specials-slider__slide_moving');\r\n        $movingSlide.css('zIndex', '-=1');\r\n        \r\n        setTimeout(() => {\r\n            this.updateStyles();\r\n            \r\n            setTimeout(() => {\r\n                $prevSlide.removeClass('specials-slider__slide_active');\r\n                $movingSlide.removeClass('specials-slider__slide_moving');\r\n                $movingSlide.addClass('specials-slider__slide_active');\r\n                \r\n                this.applySlideStyles($movingSlide, 0);\r\n\r\n                this._isSliding = false;\r\n            }, TRANSITION_DURATION);\r\n        }, TRANSITION_DURATION);\r\n    },\r\n\r\n    nextSlide() {\r\n        if (this._isSliding) {\r\n            return;\r\n        }\r\n        this._isSliding = true;\r\n\r\n        let activeIndex    = this._activeIndex;\r\n        const $slides      = this._$slides;\r\n        const $movingSlide = $slides.eq(activeIndex);\r\n        \r\n        $movingSlide.addClass('specials-slider__slide_moving');\r\n        $movingSlide.css('zIndex', '+=1');\r\n        $movingSlide.removeClass('specials-slider__slide_active');\r\n\r\n        activeIndex++;\r\n        if (activeIndex >= $slides.length) {\r\n            activeIndex = 0;\r\n        }\r\n        this._activeIndex = activeIndex;\r\n\r\n        const $nextSlide = $slides.eq(activeIndex);\r\n        $nextSlide.addClass('specials-slider__slide_active');\r\n        \r\n        setTimeout(() => {\r\n            this.updateStyles();\r\n            \r\n            setTimeout(() => {\r\n                $movingSlide.removeClass('specials-slider__slide_moving');\r\n                \r\n                this.applySlideStyles($movingSlide, $slides.length - 1);\r\n\r\n                this._isSliding = false;\r\n            }, TRANSITION_DURATION);\r\n        }, TRANSITION_DURATION);\r\n    },\r\n};\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the specials slider module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    $('.specials-slider').each(function() {\r\n        const $slider    = $(this);\r\n        const $slides    = $slider.find('.specials-slider__slide');\r\n        const $prevArrow = $slider.find('.specials-slider__arrow_dir_prev');\r\n        const $nextArrow = $slider.find('.specials-slider__arrow_dir_next');\r\n\r\n        const slider = Object.create(sliderProto);\r\n\r\n        slider._$slides     = $slides;\r\n        slider._isSliding   = false;\r\n        slider._activeIndex = 0;\r\n\r\n        const steps    = $slides.length - 1;\r\n        slider._params = {\r\n            dOffset  : GUTTER_WIDTH / steps,\r\n            dOpacity : (1 - MIN_OPACITY) / steps,\r\n            dScale   : (1 - MIN_SCALE) / steps,\r\n        };\r\n\r\n        $prevArrow.click(slider.prevSlide.bind(slider));\r\n        $nextArrow.click(slider.nextSlide.bind(slider));\r\n\r\n        slider.updateStyles();\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------","/**\r\n * @file Implementation of the portfolio block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport * as PortfolioFilter from '../portfolio-filter/portfolio-filter';\r\nimport * as PortfolioGrid   from '../portfolio-grid/portfolio-grid';\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\nconst MEDIUM_BREAKPOINT = 768;\r\nconst FAKE_LOAD_TIME    = 1000;\r\n\r\nlet $portfolio, $grid, $moreBtn;\r\n\r\nlet activeFilter   = 'all';\r\nlet verticalLayout = true;\r\n\r\nconst fakeItems = [{\r\n    title: 'Apple pie',\r\n    image: 'img/content/portfolio/projects/thumbs/apple-pie.jpg',\r\n    link: 'portfolio-single.html',\r\n    categories: ['desserts'],\r\n}, {\r\n    title: 'Fresh fruit cocktail',\r\n    image: 'img/content/portfolio/projects/thumbs/fresh-fruit-cocktail.jpg',\r\n    link: 'portfolio-single.html',\r\n    categories: ['drinks'],\r\n}, {\r\n    title: 'Green tea',\r\n    image: 'img/content/portfolio/projects/thumbs/green-tea.jpg',\r\n    link: 'portfolio-single.html',\r\n    categories: ['drinks'],\r\n}, {\r\n    title: 'Waffles with coffee',\r\n    image: 'img/content/portfolio/projects/thumbs/waffles-with-coffee.jpg',\r\n    link: 'portfolio-single.html',\r\n    categories: ['desserts', 'drinks'],\r\n}, {\r\n    title: 'Chicken livers',\r\n    image: 'img/content/portfolio/projects/thumbs/chicken-livers.jpg',\r\n    link: 'portfolio-single.html',\r\n    categories: ['lunch'],\r\n}];\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// -------------------------- BEGIN UTILITY FUNCTIONS -------------------------\r\nconst loadFakeItems = function() {\r\n    const $d = new $.Deferred();\r\n\r\n    setTimeout(() => {\r\n        $d.resolve({\r\n            items : fakeItems,\r\n            more  : false,\r\n        }); \r\n    }, FAKE_LOAD_TIME);\r\n\r\n    return $d.promise();\r\n};\r\n\r\nconst loadImage = function(src) {\r\n    const $d = new $.Deferred();\r\n\r\n    const image = new Image();\r\n    $(image).on('load', function() {\r\n        $d.resolve();\r\n    });\r\n    image.src = src;\r\n\r\n    return $d.promise();\r\n};\r\n// --------------------------- END UTILITY FUNCTIONS --------------------------\r\n\r\n// --------------------------- BEGIN EVENT HANDLERS ---------------------------\r\nconst onFilterChange = function(event, filter) {\r\n    if (activeFilter !== filter) {\r\n        activeFilter = filter;\r\n\r\n        PortfolioFilter.setFilter(filter);\r\n        PortfolioGrid.setFilter(filter);\r\n    }\r\n};\r\n\r\nconst onMoreBtnClick = function() {\r\n    $grid.attr('aria-busy', 'true');\r\n\r\n    // Show a loader\r\n    const $loader = $('<div></div>')\r\n        .addClass('loader loader_size_l portfolio__loader')\r\n        .insertAfter($moreBtn);\r\n\r\n    // Hide the button\r\n    $moreBtn.addClass('portfolio__more-btn_hidden');\r\n\r\n    let data;\r\n\r\n    loadFakeItems()\r\n        .then(function onItemsLoaded(response) {\r\n            data = response;\r\n\r\n            // Wait until all images are loaded \r\n            return $.when(...response.items.map(function(item) {\r\n                return loadImage(item.image);\r\n            }));\r\n        })\r\n        .then(function onImagesLoaded() {\r\n            $grid.attr('aria-busy', 'false');\r\n\r\n            PortfolioGrid.addItems(data.items);\r\n\r\n            // If there are more items available, show the button again\r\n            if (data.more) {\r\n                $moreBtn.removeClass('portfolio__more-btn_hidden');\r\n            }\r\n        })\r\n        .fail(function onFail() {\r\n            // Display an error message\r\n            const $error = $('<div></div>')\r\n                .addClass('error portfolio__error')\r\n                .text('An error occured');\r\n            $error.insertAfter($loader);\r\n        })\r\n        .always(function onLoadFail() {\r\n            // Hide the loader\r\n            $loader.remove();\r\n        });\r\n};\r\n// ---------------------------- END EVENT HANDLERS ----------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the portfolio module.\r\n * @return true if the portfolio block is present, false otherwise\r\n */\r\nexport const initModule = function() {\r\n    $portfolio = $('.portfolio');\r\n    if ($portfolio.length === 0) {\r\n        return false;\r\n    }\r\n\r\n    $grid    = $portfolio.find('.portfolio__grid');\r\n    $moreBtn = $portfolio.find('.portfolio__more-btn');\r\n\r\n    PortfolioFilter.initModule();\r\n    PortfolioGrid.initModule();\r\n\r\n    $portfolio.on('filter', onFilterChange);\r\n\r\n    $moreBtn.click(onMoreBtnClick);\r\n\r\n    return true;\r\n};\r\n\r\n/**\r\n * Respond to window resize event.\r\n */\r\nexport const handleResize = function() {\r\n    if ($portfolio.length === 0) {\r\n        return;\r\n    }\r\n\r\n    const screenWidth = $(window).outerWidth();\r\n    \r\n    // Switch listbox orientation to vertical on mobile and to horizontal on\r\n    // larger screens.\r\n    if (!verticalLayout && (screenWidth < MEDIUM_BREAKPOINT)) {\r\n        verticalLayout = true;\r\n\r\n        PortfolioFilter.setOrientation('vertical');\r\n    } else if (verticalLayout && (screenWidth >= MEDIUM_BREAKPOINT)) {\r\n        verticalLayout = false;\r\n\r\n        PortfolioFilter.setOrientation('horizontal');\r\n    }\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------","/**\r\n * @file Implementation of the product gallery block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\nlet $gallery, $slider, $links;\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// --------------------------- BEGIN EVENT HANDLERS ---------------------------\r\nconst onSliderBeforechange = function(event, slick, currentSlide, nextSlide) {\r\n    $links.each(function() {\r\n        const $link = $(this);\r\n        $link.toggleClass(\r\n            'product-gallery__thumb-link_active',\r\n            $link.attr('data-slide') == nextSlide\r\n        );\r\n    });\r\n};\r\n\r\nconst onLinkClick = function(event) {\r\n    event.preventDefault();\r\n    $slider.slick('slickGoTo', $(this).attr('data-slide'));\r\n};\r\n// ---------------------------- END EVENT HANDLERS ----------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the product gallery module.\r\n * @return true if the product gallery block is present, false otherwise\r\n */\r\nexport const initModule = function() {\r\n    $gallery = $('.product-gallery');\r\n    if ($gallery.length === 0) {\r\n        return false;\r\n    }\r\n\r\n    $links = $gallery.find('.product-gallery__thumb-link');\r\n\r\n    $slider = $gallery.find('.product-gallery__container');\r\n    $slider.slick({\r\n        rows      : 0,\r\n        slide      : '.product-gallery__slide',\r\n\r\n        arrows    : false,\r\n        dots      : false,\r\n\r\n        fade       : true,\r\n        speed      : 400,\r\n        zIndex     : 1,\r\n\r\n        responsive : [{\r\n            breakpoint : 768,\r\n            settings   : {\r\n                dots: true\r\n            }\r\n        }]\r\n    });\r\n\r\n    $slider.on('beforeChange', onSliderBeforechange);\r\n    $gallery.on('click', '.product-gallery__thumb-link', onLinkClick);\r\n\r\n    return false;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the project slider block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the project slider module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    $('.project-slider__container').slick({\r\n        rows      : 0,\r\n        slide     : '.project-slider__slide',\r\n\r\n        prevArrow : '.project-slider__arrow_dir_prev',\r\n        nextArrow : '.project-slider__arrow_dir_next',\r\n        dots      : true,\r\n\r\n        cssEase   : 'linear',\r\n        speed     : 250,\r\n        zIndex    : 1,\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the blog gallery block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// ---------------------------- BEGIN PUBLIC METHODS --------------------------\r\n/**\r\n * Initialize the blog gallery module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    $('.blog-gallery__container').slick({\r\n        rows       : 0,\r\n        slide      : '.blog-gallery__slide',\r\n\r\n        prevArrow  : '.blog-gallery__arrow_dir_prev',\r\n        nextArrow  : '.blog-gallery__arrow_dir_next',\r\n        dots       : false,\r\n\r\n        speed      : 250,\r\n        cssEase    : 'linear',\r\n        zIndex     : 1,\r\n\r\n        responsive : [{\r\n            breakpoint : 970,\r\n            settings   : {\r\n                dots : true\r\n            }\r\n        }]\r\n    });\r\n};\r\n// ----------------------------- END PUBLIC METHODS ---------------------------","/**\r\n * @file Implementation of the comment block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the comment module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    const $commentForm = $('#comment-form');\r\n    const $page        = $('.page');\r\n\r\n    $('.comment__reply-btn').click(function() {\r\n        const id = $(this).closest('.comment').data('id');\r\n    \r\n        $commentForm\r\n            .prependTo($(this)\r\n                .closest('.comment')\r\n                .find('.comment__replies')\r\n                .first());\r\n    \r\n        $page.trigger('comment-reply', id);\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the comment form block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the comment form module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    const $page = $('.page');\r\n\r\n    const $form    = $('.comment-form');\r\n    const $replyTo = $form.find('[name=\"reply-to\"]');\r\n\r\n    $form.validate({\r\n        errorClass  : 'error comment-form__error',\r\n    \r\n        highlight   : function(element) {\r\n            if ($(element).hasClass('input')) {\r\n                $(element).addClass('input_invalid');\r\n            } else if ($(element).hasClass('text-area')) {\r\n                $(element).addClass('text-area_invalid');\r\n            }\r\n        },\r\n    \r\n        unhighlight : function(element) {\r\n            if ($(element).hasClass('input')) {\r\n                $(element).removeClass('input_invalid');\r\n            } else if ($(element).hasClass('text-area')) {\r\n                $(element).removeClass('text-area_invalid');\r\n            }\r\n        },\r\n    });\r\n\r\n    $page.on('comment-reply', function(event, id) {      \r\n        $replyTo.val(id);\r\n\r\n        $('html, body').animate({\r\n            scrollTop: $form.offset().top - 100\r\n        }, 400, function() {\r\n            $('.input:first', $form).focus();\r\n        });\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the share block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport {makeDropdown} from '../../../js/utils';\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the share module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    $('.share').each(function() {\r\n        const $share  = $(this);\r\n        const $toggle = $share.find('.share__toggle');\r\n        const $drop   = $share.find('.share__drop');\r\n\r\n        makeDropdown($share, $toggle, {\r\n            hoverToggles : true,\r\n            onToggle     : function onShareToggle(open) {\r\n                $drop.toggleClass('share__drop_visible', open);\r\n                $toggle.attr('aria-expanded', String(open));\r\n            },\r\n        });\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------","/**\r\n * @file Implementation of the checkout block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// ----------------------------- BEGIN DOM METHODS ----------------------------\r\nconst initSelect = function() {\r\n    $(this)\r\n        .select2({\r\n            theme                   : 'theme--checkout',\r\n            width                   : 'style',\r\n            minimumResultsForSearch : Infinity,\r\n        })\r\n        .data('select2')\r\n        .$container\r\n        .addClass('checkout__input');\r\n};\r\n// ------------------------------ END DOM METHODS -----------------------------\r\n\r\n// --------------------------- BEGIN EVENT HANDLERS ---------------------------\r\nconst onCheckboxChange = function() {\r\n    const $target = $('#' + $(this).data('toggle'));\r\n    $target.slideToggle();\r\n};\r\n// ---------------------------- END EVENT HANDLERS ----------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the checkout module.\r\n * @return true if the block is present; false otherwise\r\n */\r\nexport const initModule = function() {\r\n    const $form = $('.checkout');\r\n    if ($form.length === 0) {\r\n        return false;\r\n    }\r\n\r\n    const $selects  = $form.find('.checkout__select');\r\n    $selects.each(initSelect);\r\n\r\n    const $shipping = $form.find('#shipping-fields');\r\n    $shipping.hide();\r\n\r\n    const $checkboxes = $form.find('.checkout__check-input');\r\n    $checkboxes.change(onCheckboxChange);\r\n\r\n    $form.validate({\r\n        errorClass     : 'error checkout__error',\r\n    \r\n        ignore         : '.checkout__input:hidden',\r\n    \r\n        highlight: function(element) {\r\n            if ($(element).hasClass('input')) {\r\n                $(element).addClass('input_invalid');\r\n            }\r\n        },\r\n    \r\n        unhighlight    : function(element) {\r\n            if ($(element).hasClass('input')) {\r\n                $(element).removeClass('input_invalid');\r\n            }\r\n        },\r\n    \r\n        errorPlacement : function(error, element) {\r\n            if (element.attr('name') === 'payment') {\r\n                element\r\n                    .closest('.checkout__payments')\r\n                    .prepend(error);\r\n            } else {\r\n                error.insertAfter(element);\r\n            }\r\n        },\r\n    \r\n        // messages       : {\r\n        //     payment: 'Please select a payment method',\r\n        // },\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n\r\n// $('.checkout__toggle-input').change(function() {\r\n//     $('#' + $(this).data('target-id')).slideToggle();\r\n// });\r\n\r\n// $('.checkout__payment-item').click(function() {\r\n//     $('.checkout__payment-radio', $(this))\r\n//         .prop('checked', true)\r\n//         .change();\r\n// });\r\n\r\n// $('.checkout__payment-radio').change(function() {\r\n//     $(this)\r\n//         .closest('.checkout__payments')\r\n//         .find('.checkout__payment-item')\r\n//         .each(function() {\r\n//             const isChecked = $('.checkout__payment-radio', $(this))\r\n//                 .prop('checked');\r\n            \r\n//             if (isChecked) {\r\n//                 $('.checkout__payment-desc', $(this))\r\n//                     .slideDown();\r\n//             } else {\r\n//                 $('.checkout__payment-desc', $(this))\r\n//                     .slideUp();\r\n//             }\r\n//         });\r\n// });\r\n","/**\r\n * @file Implementation of the payment block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the payment module.\r\n * @return true if the block is present; false otherwise\r\n */\r\nexport const initModule = function() {\r\n    const $payment = $('.payment');\r\n    if ($payment.length === 0) {\r\n        return false;\r\n    }\r\n\r\n    const $radios = $payment.find('.payment__radio');\r\n    const $desc   = $payment.find('.payment__desc');\r\n    $radios.change(function onRadioChange() {\r\n        $desc.slideUp();\r\n\r\n        $(this)\r\n            .closest('.payment__method')\r\n            .find('.payment__desc')\r\n            .slideDown();\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the product block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\nconst RESPONSE_TIME = 1000;\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// -------------------------- BEGIN UTILITY FUNCTIONS -------------------------\r\nconst fakeRequest = function() {\r\n    const $d = $.Deferred();\r\n\r\n    // Mock a server request\r\n    setTimeout(function() {\r\n        $d.resolve();\r\n    }, RESPONSE_TIME);\r\n\r\n    return $d.promise();\r\n};\r\n// --------------------------- END UTILITY FUNCTIONS --------------------------\r\n\r\n// --------------------------- BEGIN EVENT HANDLERS ---------------------------\r\nconst onAddBtnClick = function() {\r\n    const $loader = $('<span></span>')\r\n        .addClass('loader loader_size_s product__add-loader')\r\n        .insertAfter($(this));\r\n\r\n    $(this).remove();\r\n\r\n    fakeRequest().then(function onItemAdded() {\r\n        $('<a></a>')\r\n            .attr('href', 'shop-cart.html')\r\n            .addClass('product__cart-link')\r\n            .text('Product added')\r\n            .insertAfter($loader)\r\n            .focus();\r\n\r\n        $loader.remove();\r\n    });\r\n};\r\n\r\nconst onProductFocusin = function() {\r\n    $(this).addClass('product_has-focus');\r\n};\r\n\r\nconst onProductFocusout = function() {\r\n    $(this).removeClass('product_has-focus');\r\n};\r\n// ---------------------------- END EVENT HANDLERS ----------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the shop filter module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    $('.product').each(function() {\r\n        const $product = $(this);\r\n        const $addBtn  = $product.find('.product__add-btn');\r\n\r\n        $addBtn.click(onAddBtnClick);\r\n\r\n        // Until all major browsers support the :focus-within CSS pseudo-class\r\n        // apply a class using JavaScript\r\n        $product\r\n            .focusin(onProductFocusin)\r\n            .focusout(onProductFocusout);\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the review form block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the review form module.\r\n * @return true if the block is present, false otherwise\r\n */\r\nexport const initModule = function() {\r\n    const $form = $('.review-form');\r\n    if ($form.length === 0) {\r\n        return false;\r\n    }\r\n\r\n    $form.validate({\r\n        errorClass     : 'error review-form__error',\r\n    \r\n        errorPlacement : function(error, element) {\r\n            element.closest('.review-form__field').append(error);\r\n        },\r\n    \r\n        highlight      : function(element) {\r\n            if ($(element).hasClass('input')) {\r\n                $(element).addClass('input_invalid');\r\n            } else if ($(element).hasClass('text-area')) {\r\n                $(element).addClass('text-area_invalid');\r\n            }\r\n        },\r\n    \r\n        unhighlight    : function(element) {\r\n            if ($(element).hasClass('input')) {\r\n                $(element).removeClass('input_invalid');\r\n            } else if ($(element).hasClass('text-area')) {\r\n                $(element).removeClass('text-area_invalid');\r\n            }\r\n        },\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the shipping calculator block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the shipping calculator module.\r\n * @return true if the block is present, false otherwise\r\n */\r\nexport const initModule = function() {\r\n    const $calc = $('.shipping-calc');\r\n    if ($calc.length === 0) {\r\n        return false;\r\n    }\r\n\r\n    const $toggle  = $calc.find('.shipping-calc__toggle');\r\n    const $form    = $calc.find('.shipping-calc__form');\r\n    const $country = $calc.find('.shipping-calc__country');\r\n\r\n    let formExpanded = false;\r\n    $toggle.click(function onShippingCalcToggle() {\r\n        formExpanded = !formExpanded;\r\n\r\n        $form.slideToggle();\r\n        $toggle.attr('aria-expanded', String(formExpanded));\r\n    });\r\n    \r\n    $country\r\n        .select2({\r\n            theme                   : 'theme--small',\r\n            width                   : 'style',\r\n            minimumResultsForSearch : Infinity,\r\n            placeholder             : 'Select a country',\r\n        })\r\n        .data('select2')\r\n        .$container\r\n        .addClass('shipping-calc__input');\r\n\r\n    $form.validate({\r\n        errorClass     : 'error shipping-calc__error',\r\n    \r\n        ignore         : [],\r\n\r\n        errorPlacement : function(error, element) {\r\n            if (element.hasClass('shipping-calc__country')) {\r\n                error.insertAfter(element.next('.shipping-calc__input'));\r\n            } else {\r\n                error.insertAfter(element);\r\n            }\r\n        },\r\n    \r\n        highlight      : function(element) {\r\n            if ($(element).hasClass('input')) {\r\n                $(element).addClass('input_invalid');\r\n            } else if ($(element).hasClass('shipping-calc__country')) {\r\n                $(element)\r\n                    .next('.shipping-calc__input')\r\n                    .addClass('select2-container--error');\r\n            }\r\n        },\r\n    \r\n        unhighlight     : function(element) {\r\n            if ($(element).hasClass('input')) {\r\n                $(element).removeClass('input_invalid');\r\n            } else if ($(element).hasClass('shipping-calc__country')) {\r\n                $(element)\r\n                    .next('.shipping-calc__input')\r\n                    .removeClass('select2-container--error');\r\n            }\r\n        }\r\n    });\r\n    \r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the shop filter block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport {makeDropdown} from '../../../js/utils';\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the shop filter module.\r\n * @return true if the filter block is present, false otherwise\r\n */\r\nexport const initModule = function() {\r\n    const $filter = $('.shop-filter');\r\n    if ($filter.length === 0) {\r\n        return false;\r\n    }\r\n\r\n    const $inner  = $filter.find('.shop-filter__inner');\r\n    const $toggle = $inner.find('.shop-filter__toggle');\r\n    const $list   = $inner.find('.shop-filter__list');\r\n\r\n    makeDropdown($inner, $toggle, {\r\n        hoverToggles : true,\r\n\r\n        onToggle     : function onShopFilterToggle(open) {\r\n            $list.toggleClass('shop-filter__list_visible', open);\r\n\r\n            if (open) {\r\n                $toggle.attr('aria-expanded', 'true');\r\n            } else {\r\n                $toggle.removeAttr('aria-expanded');\r\n            }\r\n        },\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the page block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport LazyLoader from '../../../js/utils/lazy-loader';\r\n\r\nimport * as Header          from '../header/header';\r\nimport * as Minicart        from '../mini-cart/mini-cart';\r\nimport * as Nav             from '../nav/nav';\r\nimport * as Search          from '../search/search';\r\nimport * as Tabs            from '../tabs/tabs';\r\n\r\nimport * as AboutGallery    from '../../about/about-gallery/about-gallery';\r\nimport * as ContactForm     from '../../contact/contact-form/contact-form';\r\nimport * as ContactMap      from '../../contact/map/map';\r\nimport * as Gallery         from '../../index/gallery/gallery';\r\nimport * as Menu            from '../../menu/menu/menu';\r\nimport * as ReservationForm from '../../reservation/reservation-form/reservation-form';\r\nimport * as Slider          from '../../index/slider/slider';\r\nimport * as SpecialsSlider  from '../../index/specials-slider/specials-slider';\r\n\r\nimport * as Portfolio       from '../../portfolio/portfolio/portfolio';\r\nimport * as ProjectSlider   from '../../portfolio/project-slider/project-slider';\r\n\r\nimport * as BlogGallery     from '../../blog/blog-gallery/blog-gallery';\r\nimport * as Comment         from '../../blog/comment/comment';\r\nimport * as CommentForm     from '../../blog/comment-form/comment-form';\r\nimport * as Share           from '../../blog/share/share';\r\n\r\nimport * as Checkout        from '../../shop/checkout/checkout';\r\nimport * as Payment         from '../../shop/payment/payment';\r\nimport * as Product         from '../../shop/product/product';\r\nimport * as ProductGallery  from '../../shop/product-gallery/product-gallery';\r\nimport * as ReviewForm      from '../../shop/review-form/review-form';\r\nimport * as ShippingCalc    from '../../shop/shipping-calc/shipping-calc';\r\nimport * as ShopFilter      from '../../shop/shop-filter/shop-filter';\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\nconst STICKY_HEADER_OFFSET  = 100;  // Scroll offset to make the header \"sticky\"\r\nconst VISIBLE_HEADER_OFFSET = 500;  // Scroll offset to show the \"sticky\" header\r\nconst RESIZE_INTERVAL       = 200;  // Resize debouncing interval\r\nconst SCROLL_INTERVAL       = 200;  // Scroll throttling interval\r\n\r\nconst HeaderStates = { NORMAL: 0, STICKY: 1, VISIBLE: 2 };\r\nlet headerState = HeaderStates.NORMAL;\r\n\r\nconst $header = $('.header');\r\nconst isHeaderTransparent = $header.hasClass('header_transparent');\r\n\r\nlet resizeTimer = null;\r\nlet scrollTimer = null;\r\nlet wasScrolled = false;\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// ---------------------------- BEGIN DOM METHODS -----------------------------\r\n\r\n/**\r\n * Add or remove header classes basd on the current scroll offset to create an\r\n * animated sticky header effect.\r\n */\r\nconst updateHeaderStyles = function() {\r\n    const offset = $(window).scrollTop();\r\n    const newState = offset < STICKY_HEADER_OFFSET\r\n        ? HeaderStates.NORMAL\r\n        : (offset < VISIBLE_HEADER_OFFSET\r\n            ? HeaderStates.STICKY\r\n            : HeaderStates.VISIBLE);\r\n\r\n    if (newState !== headerState) {\r\n        if (newState === HeaderStates.NORMAL) {\r\n            $header\r\n                .removeClass('page__header_scroll')\r\n                .removeClass('page__header_hidden')\r\n                .toggleClass('header_transparent', isHeaderTransparent);\r\n        } else {\r\n            $header\r\n                .addClass('page__header_scroll')\r\n                .toggleClass(\r\n                    'page__header_hidden',\r\n                    newState === HeaderStates.STICKY\r\n                )\r\n                .removeClass('header_transparent');\r\n        }\r\n\r\n        headerState = newState;\r\n    }\r\n};\r\n\r\n// ----------------------------- END DOM METHODS ------------------------------\r\n\r\n// --------------------------- BEGIN EVENT HANDLERS ---------------------------\r\n\r\n/**\r\n * Handle the window scroll event\r\n */\r\nfunction handleWindowScroll() {\r\n    LazyLoader.scanImages();\r\n\r\n    updateHeaderStyles();\r\n}\r\n\r\n/**\r\n * Handle the window resize event\r\n */\r\nfunction handleWindowResize() {\r\n    Nav.handleResize();\r\n    Portfolio.handleResize();\r\n    Tabs.handleResize();\r\n}\r\n\r\n/**\r\n * Debounce the window resize event\r\n */\r\nfunction debounceWindowResize() {\r\n    clearTimeout(resizeTimer);\r\n    resizeTimer = setTimeout(handleWindowResize, RESIZE_INTERVAL);\r\n}\r\n\r\n/**\r\n * Throttle the window scroll event\r\n */\r\nfunction throttleWindowScroll() {\r\n    if (scrollTimer) {\r\n        // Ensure that we catch and execute that last invocation.\r\n        wasScrolled = true;\r\n        return;\r\n    }\r\n\r\n    handleWindowScroll();\r\n\r\n    scrollTimer = this.setTimeout(function() {\r\n        scrollTimer = null;\r\n        if (wasScrolled) {\r\n            handleWindowScroll();\r\n            wasScrolled = false;\r\n        }\r\n    }, SCROLL_INTERVAL);\r\n}\r\n\r\n// ---------------------------- END EVENT HANDLERS ----------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n\r\n/**\r\n * Initialize the page block.\r\n * @return true\r\n */\r\nfunction initBlock() {\r\n    $(window).on({\r\n        resize: debounceWindowResize,\r\n        scroll: throttleWindowScroll,\r\n    });\r\n\r\n    // Lazy image loader\r\n    LazyLoader.init();\r\n\r\n    // Common blocks\r\n    Header.initModule();\r\n    Minicart.initModule();\r\n    Nav.initModule();\r\n    Search.initModule();\r\n    Tabs.initModule();\r\n\r\n    // Inner page blocks\r\n    AboutGallery.initModule();\r\n    ContactForm.initModule();\r\n    ContactMap.initModule();\r\n    Gallery.initModule();\r\n    Menu.initModule();\r\n    ReservationForm.initModule();\r\n    Slider.initModule();\r\n    SpecialsSlider.initModule();\r\n\r\n    // Portfolio blocks\r\n    Portfolio.initModule();\r\n    ProjectSlider.initModule();\r\n\r\n    // Blog blocks\r\n    BlogGallery.initModule();\r\n    Share.initModule();\r\n    Comment.initModule();\r\n    CommentForm.initModule();\r\n\r\n    // Shop blocks\r\n    Checkout.initModule();\r\n    Payment.initModule();\r\n    Product.initModule();\r\n    ProductGallery.initModule();\r\n    ReviewForm.initModule();\r\n    ShippingCalc.initModule();\r\n    ShopFilter.initModule();\r\n\r\n    // Process the initial window size and scroll position\r\n    handleWindowResize();\r\n    handleWindowScroll();\r\n\r\n    return true;\r\n}\r\n\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n\r\nexport default {\r\n    initBlock,\r\n};\r\n","import Page from '../blocks/common/page/page';\r\n\r\n// The page block is responsible for initialization of all other blocks\r\nPage.initBlock();\r\n"],"sourceRoot":""}
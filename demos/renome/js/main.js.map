{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/utils/lazy-loader.js","webpack:///./src/blocks/common/search/search.js","webpack:///./src/js/utils/dropdown-strategy.js","webpack:///./src/blocks/common/mini-cart/mini-cart.js","webpack:///./src/js/utils/force-reflow.js","webpack:///./src/blocks/common/header/header.js","webpack:///./src/js/utils/drilldown-strategy.js","webpack:///./src/blocks/common/nav/nav.js","webpack:///./src/blocks/common/tabs/tabs.js","webpack:///./src/blocks/about/accordion-slider/accordion-slider.js","webpack:///./src/blocks/contact/contact-form/contact-form.js","webpack:///./src/blocks/contact/location-map/location-map.js","webpack:///./src/blocks/common/gallery/gallery.js","webpack:///./src/blocks/menu/menu/menu.js","webpack:///./src/blocks/reservation/reservation-form/reservation-form.js","webpack:///./src/blocks/common/slider/slider.js","webpack:///./src/blocks/common/specials-slider/specials-slider.js","webpack:///./src/js/utils.js","webpack:///./src/blocks/portfolio/portfolio-filter/portfolio-filter.js","webpack:///./src/blocks/portfolio/portfolio-grid/portfolio-grid.js","webpack:///./src/blocks/portfolio/portfolio/portfolio.js","webpack:///./src/blocks/portfolio/project-slider/project-slider.js","webpack:///./src/blocks/blog/blog-gallery/blog-gallery.js","webpack:///./src/blocks/blog/comment/comment.js","webpack:///./src/blocks/blog/comment-form/comment-form.js","webpack:///./src/blocks/blog/share/share.js","webpack:///./src/blocks/shop/product-gallery/product-gallery.js","webpack:///./src/blocks/shop/checkout/checkout.js","webpack:///./src/blocks/shop/payment/payment.js","webpack:///./src/blocks/shop/product/product.js","webpack:///./src/blocks/shop/review-form/review-form.js","webpack:///./src/blocks/shop/shipping-calc/shipping-calc.js","webpack:///./src/blocks/shop/shop-filter/shop-filter.js","webpack:///./src/blocks/common/page/page.js","webpack:///./src/js/main.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","$images","BUFFER_HEIGHT","LAZY_SELECTOR","$search","popupFocusTrap","lazy_loader","init","$","scanImages","length","filter","$elem","windowBottom","$img","this","window","scrollTop","height","offset","top","parent","is","siblings","each","$source","attr","removeAttr","removeClass","loadImage","hide","deactivate","search","initBlock","$close","find","focusTrap","clickOutsideDeactivates","escapeDeactivates","onDeactivate","click","show","addClass","setTimeout","activate","$document","document","Keys","DropdownStrategy","_ref","$root","$trigger","$drawer","onCollapse","onExpand","_classCallCheck","_elements","_isExpanded","_handlers","collapseHandler","expandHandler","handleOutsideClick","handleToggleClick","handleToggleKeyDown","handleToggleKeyUp","handleKeyDown","handleMouseLeave","handleMouseEnter","event","target","contains","collapse","toggle","which","preventDefault","focus","expand","_this","on","focusin","off","mouseenter","mouseleave","keydown","keyup","mini_cart","$minicart","forceReflow","$el","offsetHeight","isTransparent","STICKY_HEADER_OFFSET","VISIBLE_HEADER_OFFSET","elements","HeaderStates","NORMAL","STICKY","VISIBLE","headerState","handleSearchToggle","Search","header","$header","$searchToggle","hasClass","MiniCart","handleScroll","currentOffset","newState","toggleClass","updateHeaderStyles","drilldownChain","activeDrilldown","DrilldownStrategy","$initialFocus","drilldown_strategy_classCallCheck","handleTriggerClick","handleTrapDeactivate","_focusTrap","initialFocus","handleDocumentClick","prevDrilldown","pop","unpause","pause","push","submenus","mobileMenu","DESKTOP_BREAKPOINT","SCROLL_BUFFER","SCROLL_SPEED","isDesktop","NavSubmenu","nav_classCallCheck","$parentLink","prev","$parentItem","closest","$scrollpane","first","$backLink","$firstLink","not","drilldownStrategy","dropdownStrategy","_this$_elements","handleInternalLinkClick","targetId","$targetElem","forEach","submenu","animate","Math","max","nav","$nav","$menuToggle","$menu","map","toArray","handleResize","outerWidth","ClassNames","PANEL_ACTIVE","PANEL_HIDDEN","Selectors","ROOT","TABLIST","TABS","PANELS","isMobile","tabs","Tabs","tabs_classCallCheck","$list","$tabs","$panels","activeIndex","$tab","eq","aria-selected","tabindex","_state","isTransitioning","orientation","_handleTabClick","_handleTabKeyDown","tab","setOrientation","e","tabIndex","index","currentTarget","showTab","_this$_state","nextFocus","_this$_state2","$prevTab","$prevPanel","$nextTab","$nextPanel","THUMB","IMAGE","THUMB_HEIGHT","sliders","AccordionSlider","accordion_slider_classCallCheck","$thumbs","_collapsedThumbWidth","concat","_collapsedThumbHeight","_isVertical","_handleThumbExpand","_handleThumbCollapse","magnificPopup","delegate","mainClass","gallery","enabled","tCounter","closeMarkup","arrowMarkup","callbacks","beforeOpen","wrap","role","aria-label","slider","setVertical","$thumb","$image","width","vertical","initModule","validate","errorClass","highlight","element","unhighlight","markerIcon","L","icon","iconUrl","iconSize","iconAnchor","_$root$data","data","latlng","zoom","$container","scrollWheelZoom","setView","tileLayer","attribution","subdomains","maxZoom","addTo","marker","enable","disable","location_map","initAll","type","menu","openingHours","start","end","updateTimeSelect","$time","startMoment","timeArray","hours","day","moment","hour","format","add","getAvailableTimes","selectedTime","val","$options","time","text","prop","empty","append","trigger","initSelect","$select","select2","theme","minimumResultsForSearch","Infinity","$selection","currentMoment","minutes","year","month","date","$form","$date","$people","Pikaday","field","defaultDate","toDate","setDefaultDate","minDate","maxDate","onSelect","getMoment","rules","required","validDate","AUTOPLAY_SPEED","TRANSITION_SPEED","handleSlickBeforeChange","slick","current","next","$slides","$slider","$prevArrow","$nextArrow","rows","zIndex","cssEase","fade","speed","autoplay","autoplaySpeed","pauseOnFocus","pauseOnHover","prevArrow","nextArrow","GUTTER_WIDTH","MIN_OPACITY","MIN_SCALE","SLIDES","SLIDE_INNER","PREV_ARROW","NEXT_ARROW","SpecialsSlider","specials_slider_classCallCheck","_config","dOffset","dOpacity","dScale","prevSlide","nextSlide","_updateStyles","$slide","order","_this$_config","css","transform","opacity","total","slide","_applySlideStyles","_this2","$prevSlide","$movingSlide","_this3","$portfolio","$filter","$inner","$toggle","$btns","dropdownLogic","listboxLogic","$grid","$sizer","dropdownProto","_onOutsideClick","_$container","_onSwitcherClick","_onSwitcherKeydown","_onSwitcherKeyup","_onKeydown","_$switcher","_onToggle","_hoverToggles","_onMouseenter","_onMouseleave","hover","makeDropdown","$switcher","options","dropdown","onToggle","hoverToggles","listboxProto","keyActions","_orientation","verticalKeyActions","horizontalKeyActions","firstTab","selectItem","lastTab","_$items","prevTab","nextIndex","_activeIndex","nextTab","_onSelect","_defineProperty","_verticalKeyActions","_horizontalKeyActions","onFilterSelect","$prevBtn","$nextBtn","activeFilter","onListClick","onListKeydown","onToggleFocusin","onDropdownToggle","open","$items","listbox","makeListbox","shuffleInstance","createPortfolioItem","$item","categories","join","title","link","src","image","alt","$categories","cat","$catItem","$catLink","href","data-filter","toLowerCase","$moreBtn","verticalLayout","fakeItems","onFilterChange","sel","PortfolioFilter","PortfolioGrid","onMoreBtnClick","$d","$loader","insertAfter","Deferred","resolve","items","more","promise","then","response","_$","when","apply","_toConsumableArray","item","Image","newItems","insertBefore","fail","always","remove","Shuffle","itemSelector","sizer","screenWidth","dots","responsive","breakpoint","settings","$commentForm","$page","id","prependTo","$replyTo","$gallery","$links","share_share","$share","onCheckboxChange","slideToggle","change","ignore","errorPlacement","error","prepend","$payment","$radios","$desc","slideUp","slideDown","onAddBtnClick","onProductFocusin","onProductFocusout","$product","focusout","onSliderBeforechange","currentSlide","$link","onLinkClick","arrows","$calc","$country","formExpanded","String","placeholder","RESIZE_INTERVAL","SCROLL_INTERVAL","resizeTimer","scrollTimer","wasScrolled","handleWindowScroll","LazyLoader","Header","handleWindowResize","Nav","Portfolio","debounceWindowResize","clearTimeout","throttleWindowScroll","resize","scroll","ContactForm","LocationMap","Gallery","Menu","ReservationForm","Slider","ProjectSlider","BlogGallery","Comment","CommentForm","Share","Checkout","Payment","Product","ProductGallery","ReviewForm","ShippingCalc","ShopFilter"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 449);\n","/**\r\n * @file Lazy loader for images\r\n */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\nconst BUFFER_HEIGHT = 50;\r\nconst LAZY_SELECTOR = '.lazy';\r\n\r\nlet $images;\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// -------------------------- BEGIN UTILITY FUNCTIONS -------------------------\r\n\r\n/**\r\n * Check if <tt>elem</tt> is in the browser's viewport.\r\n * \r\n * @param {JQuery} $elem The element to check\r\n * @return {boolean} <tt>true</tt> if the element is in the viewport,\r\n *      <tt>false</tt> otherwise\r\n */\r\nfunction isInViewport($elem) {\r\n    const windowBottom = $(window).scrollTop() + $(window).height();\r\n    return $elem.offset().top < (windowBottom + BUFFER_HEIGHT);\r\n}\r\n\r\n// --------------------------- END UTILITY FUNCTIONS --------------------------\r\n\r\n// ----------------------------- BEGIN DOM METHODS ----------------------------\r\n\r\n/**\r\n * Lazy-load the given <tt>img</tt> element.\r\n * \r\n * @param {JQuery} $img The image element\r\n */\r\nfunction loadImage($img) {\r\n    if ($img.parent().is('picture')) {\r\n        $img.siblings('source').each(function() {\r\n            const $source = $(this);\r\n            $source\r\n                .attr('srcset', $source.attr('data-srcset'))\r\n                .removeAttr('data-srcset');\r\n        });\r\n    }\r\n\r\n    $img\r\n        .attr('src', $img.attr('data-src'))\r\n        .attr('srcset', $img.attr('data-srcset'))\r\n        .removeAttr('data-src data-srcset')\r\n        .removeClass('lazy');\r\n}\r\n\r\n// ------------------------------ END DOM METHODS -----------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n\r\n/**\r\n * Initialize the lazy image loader\r\n */\r\nfunction init() {\r\n    $images = $(LAZY_SELECTOR);\r\n}\r\n\r\n/**\r\n * Load all images that have been scrolled into the viewport for the first time\r\n */\r\nfunction scanImages() {\r\n    if ($images.length === 0) {\r\n        return;\r\n    }\r\n\r\n    $images = $images.filter(function() {\r\n        const $img = $(this);\r\n\r\n        if (!isInViewport($img)) {\r\n            return true;\r\n        }\r\n        \r\n        loadImage($img);        \r\n\r\n        return false;\r\n    });\r\n}\r\n\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n\r\nexport default {\r\n    init,\r\n    scanImages,\r\n};\r\n","/**\r\n * @file Implementation of the search block\r\n * @author Andrey Glotov\r\n */\r\n\r\n/* global focusTrap */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\nlet $search;\r\nlet popupFocusTrap;\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n\r\n/**\r\n * Initialize the search block.\r\n * @return true\r\n */\r\nfunction initBlock() {\r\n    $search = $('.search');\r\n    const $close = $search.find('.search__close');\r\n\r\n    popupFocusTrap = focusTrap($search.get(0), {\r\n        clickOutsideDeactivates: true,\r\n        escapeDeactivates: true,\r\n        \r\n        onDeactivate: function handleSearchDeactivate() {\r\n            $search.removeClass('search_visible');\r\n        },\r\n    });\r\n\r\n    $close.click(hide);\r\n\r\n    return true;\r\n}\r\n\r\n/**\r\n * Show the search modal\r\n */\r\nfunction show() {\r\n    $search.addClass('search_visible');\r\n\r\n    // Need to wait 100ms for autofocus to work\r\n    // TODO: why?\r\n    setTimeout(() => {\r\n        popupFocusTrap.activate();\r\n    }, 100);\r\n}\r\n\r\n/**\r\n * Hide the search modal\r\n */\r\nfunction hide() {\r\n    popupFocusTrap.deactivate();\r\n}\r\n\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n\r\nexport default {\r\n    initBlock,\r\n    show,\r\n    hide,\r\n};\r\n","/**\r\n * @file Implementation of the dropdown strategy for menus\r\n * @author Andrey Glotov\r\n */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\nconst $document = $(document);\r\n\r\nconst Keys = {\r\n    ESC: 27,\r\n    SPACE: 32\r\n};\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\nexport default class DropdownStrategy {\r\n    /**\r\n     * Create a dropdown strategy\r\n     * @param {Object} props - Properties object\r\n     * @param {JQuery} props.$root The root node\r\n     * @param {JQuery} props.$trigger The dropdown button\r\n     * @param {JQuery} props.$drawer The dropdown drawer\r\n     * @param {Function} props.onCollapse The callback to execute on collapse\r\n     * @param {FUnction} props.onExpand The callback to execute on expand\r\n     */\r\n    constructor({$root, $trigger, $drawer, onCollapse, onExpand}) {\r\n        this._elements = { $root, $trigger, $drawer };\r\n        this._isExpanded = false;\r\n\r\n        this._handlers = {\r\n            collapseHandler: onCollapse,\r\n            expandHandler: onExpand,\r\n        };\r\n\r\n        this.handleOutsideClick = this.handleOutsideClick.bind(this);\r\n        this.handleToggleClick = this.handleToggleClick.bind(this);\r\n        this.handleToggleKeyDown = this.handleToggleKeyDown.bind(this);\r\n        this.handleToggleKeyUp = this.handleToggleKeyUp.bind(this);\r\n        this.handleKeyDown = this.handleKeyDown.bind(this);\r\n        this.handleMouseLeave = this.handleMouseLeave.bind(this);\r\n        this.handleMouseEnter = this.handleMouseEnter.bind(this);\r\n    }\r\n\r\n    // -------------------------- BEGIN EVENT HANDLERS ------------------------\r\n\r\n    handleOutsideClick(event) {\r\n        const target = event.target;\r\n        if (!(\r\n            target === document\r\n            || this._elements.$root.is($(target))\r\n            || $.contains(this._elements.$root.get(0), target)\r\n        )) {\r\n            this.collapse();\r\n        }\r\n    }\r\n\r\n    handleToggleClick() {\r\n        this.toggle();\r\n    }\r\n\r\n    handleToggleKeyDown(event) {\r\n        if (event.which === Keys.SPACE) {\r\n            event.preventDefault();\r\n\r\n            this.toggle();\r\n        }\r\n    }\r\n\r\n    handleToggleKeyUp(event) {\r\n        if (event.which === Keys.SPACE) {\r\n            event.preventDefault();\r\n        }\r\n    }\r\n\r\n    handleKeyDown(event) {\r\n        if (event.which === Keys.ESC) {\r\n            this.collapse();\r\n            this._elements.$trigger.focus();\r\n        }\r\n    }\r\n\r\n    handleMouseEnter() {\r\n        this.expand();\r\n    }\r\n\r\n    handleMouseLeave() {\r\n        this.collapse();\r\n    }\r\n\r\n    // --------------------------- END EVENT HANDLERS -------------------------\r\n\r\n    // -------------------------- BEGIN PUBLIC METHODS ------------------------\r\n\r\n    /**\r\n     * Expand the dropdown\r\n     */\r\n    expand() {\r\n        this._isExpanded = true;\r\n\r\n        setTimeout(() => {\r\n            $document.on({\r\n                click: this.handleOutsideClick,\r\n                focusin: this.handleOutsideClick,\r\n            });\r\n            this._elements.$root.on('keydown', this.handleKeyDown);\r\n\r\n            this._elements.$trigger.attr('aria-expanded', 'true');\r\n\r\n            if (this._handlers.expandHandler) {\r\n                this._handlers.expandHandler();\r\n            }\r\n        }, 0);\r\n    }\r\n\r\n    /**\r\n     * Collapse the dropdown\r\n     */\r\n    collapse() {\r\n        this._isExpanded = false;\r\n\r\n        $document.off({\r\n            click: this.handleOutsideClick,\r\n            focusin: this.handleOutsideClick,\r\n        });\r\n        this._elements.$root.off('keydown', this.handleKeyDown);\r\n\r\n        this._elements.$trigger.attr('aria-expanded', 'false');\r\n\r\n        if (this._handlers.collapseHandler) {\r\n            this._handlers.collapseHandler();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Toggle between the collapsed and expanded states\r\n     */\r\n    toggle() {\r\n        if (!this._isExpanded) {\r\n            this.expand();\r\n        } else {\r\n            this.collapse();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Activate the strategy: add event listeners.\r\n     */\r\n    activate() {\r\n        this._elements.$root.on({\r\n            mouseenter: this.handleMouseEnter,\r\n            mouseleave: this.handleMouseLeave,\r\n        });\r\n\r\n        this._elements.$trigger.on({\r\n            click: this.handleToggleClick,\r\n            keydown: this.handleToggleKeyDown,\r\n            keyup: this.handleToggleKeyUp,\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Deactivate the strategy: collapse the dropdown and remove event\r\n     * listeners.\r\n     */\r\n    deactivate() {\r\n        if (this._isExpanded) {\r\n            this.collapse();\r\n        }\r\n\r\n        this._elements.$root.off({\r\n            mouseenter: this.handleMouseEnter,\r\n            mouseleave: this.handleMouseLeave,\r\n        });\r\n\r\n        this._elements.$trigger.off({\r\n            click: this.handleToggleClick,\r\n            keydown: this.handleToggleKeyDown,\r\n            keyup: this.handleToggleKeyUp,\r\n        });\r\n    }\r\n}\r\n","/**\r\n * Implementation of the mini cart block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport DropdownStrategy from '../../../js/utils/dropdown-strategy';\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n\r\n/**\r\n * Initialize the mini cart block.\r\n * @return true\r\n */\r\nfunction initBlock() {\r\n    const $minicart = $('.mini-cart');\r\n    const $trigger = $('.mini-cart__trigger', $minicart);\r\n    const $drawer = $('.mini-cart__drawer', $minicart);\r\n\r\n    const minicart = new DropdownStrategy({\r\n        $root: $minicart,\r\n        $trigger,\r\n        $drawer,\r\n\r\n        onExpand() {\r\n            $drawer.addClass('mini-cart__drawer_expanded');\r\n        },\r\n        onCollapse() {\r\n            $drawer.removeClass('mini-cart__drawer_expanded');\r\n        }\r\n    });\r\n    minicart.activate();\r\n\r\n    return true;\r\n}\r\n\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n\r\nexport default {\r\n    initBlock,\r\n};\r\n","/**\r\n * Force a reflow\r\n * @param {JQuery} el The element whose styles have been changed\r\n */\r\nexport default function forceReflow($el) {\r\n    void($el.get(0).offsetHeight);\r\n}\r\n","/**\r\n * @file Implementation of the header block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport Search from '../search/search';\r\nimport MiniCart from '../mini-cart/mini-cart';\r\n\r\nimport forceReflow from '../../../js/utils/force-reflow';\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\nconst STICKY_HEADER_OFFSET  = 100;  // Scroll offset to make the header \"sticky\"\r\nconst VISIBLE_HEADER_OFFSET = 500;  // Scroll offset to show the \"sticky\" header\r\n\r\nconst elements = {};\r\nlet isTransparent;\r\n\r\nconst HeaderStates = { NORMAL: 0, STICKY: 1, VISIBLE: 2 };\r\nlet headerState = HeaderStates.NORMAL;\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// ---------------------------- BEGIN DOM METHODS -----------------------------\r\n\r\n/**\r\n * Add or remove header classes basd on the current scroll offset to create an\r\n * animated sticky header effect.\r\n */\r\nfunction updateHeaderStyles() {\r\n    const currentOffset = $(window).scrollTop();\r\n\r\n    let newState = null;\r\n    if (currentOffset < STICKY_HEADER_OFFSET) {\r\n        newState = HeaderStates.NORMAL;\r\n    } else if (currentOffset < VISIBLE_HEADER_OFFSET) {\r\n        newState = HeaderStates.STICKY;\r\n    } else {\r\n        newState = HeaderStates.VISIBLE;\r\n    }\r\n\r\n    if (newState !== headerState) {\r\n        const { $header } = elements;\r\n\r\n        if (newState === HeaderStates.NORMAL) {\r\n            $header\r\n                .removeClass('header_scroll header_hidden')\r\n                .toggleClass('header_transparent', isTransparent);\r\n        } else if (newState === HeaderStates.STICKY) {\r\n            $header\r\n                .addClass('header_scroll header_hidden')\r\n                .removeClass('header_transparent');\r\n        } else {    // HeaderStates.VISIBLE\r\n            if (headerState === HeaderStates.NORMAL) {\r\n                // Make sure the animation is played\r\n                $header\r\n                    .addClass('header_scroll header_hidden')\r\n                    .removeClass('header_transparent');\r\n\r\n                forceReflow($header);\r\n            }\r\n            \r\n            $header.removeClass('header_hidden');\r\n        }\r\n\r\n        headerState = newState;\r\n    }\r\n}\r\n\r\n// ----------------------------- END DOM METHODS ------------------------------\r\n\r\n// --------------------------- BEGIN EVENT HANDLERS ---------------------------\r\n\r\nfunction handleSearchToggle() {\r\n    Search.show();\r\n}\r\n\r\n// ---------------------------- END EVENT HANDLERS ----------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n\r\n/**\r\n * Initialize the header module.\r\n * @return true\r\n */\r\nfunction initBlock() {\r\n    elements.$header = $('.header');\r\n    elements.$searchToggle = $('.header__search-toggle', elements.$header);\r\n\r\n    isTransparent = elements.$header.hasClass('header_transparent');\r\n\r\n    Search.initBlock();\r\n    MiniCart.initBlock();\r\n\r\n    elements.$searchToggle.click(handleSearchToggle);\r\n\r\n    return true;\r\n}\r\n\r\nfunction handleScroll() {\r\n    updateHeaderStyles();\r\n}\r\n\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n\r\nexport default {\r\n    initBlock,\r\n    handleScroll,\r\n};\r\n","/**\r\n * @file Implementation of the drilldown strategy for menus\r\n * @author Andrey Glotov\r\n */\r\n\r\n/* global focusTrap */\r\n\r\n// ------------------------- BEGIN MODULE VARIABLES ---------------------------\r\n\r\nconst $document = $(document);\r\n\r\nconst drilldownChain = [];\r\nlet activeDrilldown = null;\r\n\r\n// -------------------------- END MODULE VARIABLES ----------------------------\r\n\r\nexport default class DrilldownStrategy {\r\n    /**\r\n     * Create a drilldown strategy\r\n     * @param {Object} props - Properties object\r\n     * @param {JQuery} props.$trigger The drilldown button\r\n     * @param {JQuery} props.$drawer The drilldown drawer\r\n     * @param {JQuery} props.$initialFocus The element to receive initialFocus\r\n     * @param {Function} props.onCollapse The callback to execute on collapse\r\n     * @param {FUnction} props.onExpand The callback to execute on expand\r\n     */\r\n    constructor({$trigger, $drawer, $initialFocus, onCollapse, onExpand}) {\r\n        this._elements = { $trigger, $drawer, $initialFocus };\r\n        this._isExpanded = false;\r\n\r\n        this.handleOutsideClick = this.handleOutsideClick.bind(this);\r\n        this.handleTriggerClick = this.handleTriggerClick.bind(this);\r\n        this.handleTrapDeactivate = this.handleTrapDeactivate.bind(this);\r\n\r\n        this._handlers = {\r\n            collapseHandler: onCollapse,\r\n            expandHandler: onExpand,\r\n        };\r\n\r\n        this._focusTrap = new focusTrap($drawer.get(0), {\r\n            clickOutsideDeactivates: true,\r\n            escapeDeactivates: true,\r\n            initialFocus: $initialFocus && $initialFocus.get(0),\r\n            onDeactivate: this.handleTrapDeactivate,\r\n        });\r\n    }\r\n\r\n    // -------------------------- BEGIN EVENT HANDLERS ------------------------\r\n\r\n    handleOutsideClick(event) {\r\n        if (!$.contains(this._elements.$drawer.get(0), event.target)) {\r\n            this.collapse();\r\n        }\r\n    }\r\n\r\n    handleTriggerClick() {\r\n        this.toggle();\r\n    }\r\n\r\n    handleTrapDeactivate() {\r\n        $document.off('click', this.handleDocumentClick);\r\n\r\n        if (drilldownChain.length !== 0) {\r\n            const prevDrilldown = drilldownChain.pop();\r\n\r\n            if (prevDrilldown._isExpanded) {\r\n                activeDrilldown = prevDrilldown;\r\n                activeDrilldown._focusTrap.unpause();\r\n            }\r\n        } else {\r\n            activeDrilldown = null;\r\n        }\r\n\r\n        this._isExpanded = false;\r\n\r\n        this._elements.$trigger.attr('aria-expanded', 'false');\r\n\r\n        if (this._handlers.collapseHandler) {\r\n            this._handlers.collapseHandler();\r\n        }\r\n    }\r\n\r\n    // --------------------------- END EVENT HANDLERS -------------------------\r\n\r\n    // -------------------------- BEGIN PUBLIC METHODS ------------------------\r\n\r\n    /**\r\n     * Expand the drilldown menu\r\n     */\r\n    expand() {\r\n        this._isExpanded = true;\r\n\r\n        if (activeDrilldown) {\r\n            activeDrilldown._focusTrap.pause();\r\n            drilldownChain.push(activeDrilldown);\r\n        }\r\n\r\n        activeDrilldown = this;\r\n\r\n        this._focusTrap.activate();\r\n\r\n        setTimeout(() => {\r\n            $document.click(this.handleDocumentClick);\r\n\r\n            if (this._handlers.expandHandler) {\r\n                this._handlers.expandHandler();\r\n            }\r\n        }, 0);\r\n\r\n        this._elements.$trigger.attr('aria-expanded', 'true');\r\n    }\r\n\r\n    /**\r\n     * Collapse the drilldown menu\r\n     */\r\n    collapse() {\r\n        this._focusTrap.deactivate();\r\n    }\r\n\r\n    /**\r\n     * Toggle between the collapsed and expanded states\r\n     */\r\n    toggle() {\r\n        if (!this._isExpanded) {\r\n            this.expand();\r\n        } else {\r\n            this.collapse();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Activate the strategy: add event listeners.\r\n     */\r\n    activate() {\r\n        this._elements.$trigger.click(this.handleTriggerClick);\r\n        this._elements.$drawer.keydown(this.handleKeyDown);\r\n    }\r\n\r\n    /**\r\n     * Deactivate the strategy: collapse the dropdown and remove event\r\n     * listeners.\r\n     */\r\n    deactivate() {\r\n        if (this._isExpanded) {\r\n            this.collapse();\r\n        }\r\n\r\n        this._elements.$trigger.off('click', this.handleTriggerClick);\r\n        this._elements.$drawer.off('keydown', this.handleKeyDown);\r\n    }\r\n}\r\n","/**\r\n * @file Implementation of the navigation block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport DropdownStrategy from '../../../js/utils/dropdown-strategy';\r\nimport DrilldownStrategy from '../../../js/utils/drilldown-strategy';\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\nconst DESKTOP_BREAKPOINT = 992;  // Minimum desktop screen width\r\n\r\nconst SCROLL_BUFFER = 100;  // Offset from window top to scroll target\r\nconst SCROLL_SPEED = 1000;\r\n\r\nlet submenus;\r\nlet mobileMenu;\r\n\r\nlet isDesktop = false;\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n/**\r\n * Implementation of submenus.\r\n * \r\n * Each submenu has two behavior strategies: drilldown menu for smaller screens\r\n * and dropdown menu for larger screens.\r\n */\r\nclass NavSubmenu {\r\n    /**\r\n     * Initialize submenu.\r\n     * \r\n     * @param {JQuery} $root Submenu root element\r\n     */\r\n    constructor($root) {\r\n        this._elements = {\r\n            $root,\r\n            $parentLink: $root.prev('.nav__link'),\r\n            $parentItem: $root.closest('.nav__item'),\r\n            $scrollpane: $('.nav__scrollpane', $root).first(),\r\n            $backLink: $('.nav__link_back', $root).first(),\r\n            $firstLink: $('.nav__link', $root).not('.nav__link_back').first(),\r\n        };\r\n\r\n        this.drilldownStrategy = new DrilldownStrategy({\r\n            $trigger: this._elements.$parentLink,\r\n            $drawer: this._elements.$root,\r\n            $initialFocus:  this._elements.$firstLink,\r\n\r\n            onCollapse: this.collapse.bind(this), \r\n            onExpand: this.expand.bind(this),\r\n        });\r\n\r\n        this.dropdownStrategy = new DropdownStrategy({\r\n            $root: this._elements.$parentItem,\r\n            $trigger: this._elements.$parentLink,\r\n            $drawer: this._elements.$root,\r\n\r\n            onCollapse: this.collapse.bind(this), \r\n            onExpand: this.expand.bind(this),\r\n        });\r\n\r\n        // Mobile by default\r\n        this.drilldownStrategy.activate();\r\n\r\n        this._elements.$backLink.click(() => this.drilldownStrategy.collapse());\r\n    }\r\n\r\n    collapse() {\r\n        const { $root } = this._elements;\r\n\r\n        $root.removeClass('nav__submenu_visible');\r\n    }\r\n\r\n    expand() {\r\n        const { $root, $scrollpane } = this._elements;\r\n\r\n        $scrollpane.scrollTop(0);   // Reset submenu scroll position\r\n        $root.addClass('nav__submenu_visible');\r\n    }\r\n}\r\n\r\n// --------------------------- BEGIN EVENT HANDLERS ---------------------------\r\n\r\n/**\r\n * Scroll smoothly when navigating to internal links.\r\n */\r\nfunction handleInternalLinkClick() {\r\n    const $link = $(this);\r\n\r\n    const targetId = $link.attr('href');\r\n    const $targetElem = $(targetId);\r\n    if ($targetElem.length === 0) {\r\n        return;\r\n    }\r\n\r\n    if (!isDesktop) {\r\n        submenus.forEach((submenu) => submenu.drilldownStrategy.collapse());\r\n        mobileMenu.collapse();\r\n    }\r\n\r\n    $('html, body').animate({\r\n        scrollTop: Math.max(0, $targetElem.offset().top - SCROLL_BUFFER),\r\n    }, SCROLL_SPEED, 'swing', function() {\r\n        $targetElem.focus();\r\n    });\r\n\r\n    return false;\r\n}\r\n\r\n// ---------------------------- END EVENT HANDLERS ----------------------------\r\n\r\n// ---------------------------- BEGIN PUBLIC METHODS --------------------------\r\n\r\n/**\r\n * Initialize the navigation block.\r\n * @return true\r\n */\r\nfunction initBlock() {\r\n    const $nav = $('.nav');\r\n    const $menuToggle = $('.nav__toggle', $nav);\r\n    const $menu = $('.nav__menu', $nav);\r\n    const $scrollpane = $('.nav__scrollpane', $nav);\r\n\r\n    mobileMenu = new DrilldownStrategy({\r\n        $trigger: $menuToggle,\r\n        $drawer: $nav,\r\n\r\n        onCollapse() {\r\n            $menu.removeClass('nav__menu_visible');\r\n            $menuToggle.removeClass('hamburger_open');\r\n        },\r\n\r\n        onExpand() {\r\n            $menu.addClass('nav__menu_visible');\r\n            $scrollpane.scrollTop(0);\r\n            $menuToggle.addClass('hamburger_open');\r\n        },\r\n    });\r\n    mobileMenu.activate();\r\n\r\n    submenus = $('.nav__submenu', $nav)\r\n        .map(function() {\r\n            return new NavSubmenu($(this));\r\n        })\r\n        .toArray();\r\n\r\n    $nav.on('click', '.nav__link[href^=\"#\"]', handleInternalLinkClick);\r\n}\r\n\r\n/**\r\n * Respond to window resize event.\r\n * \r\n * Switch between drilldown behavior for submenus on mobile and dropdown \r\n * behavior on desktop.\r\n */\r\nfunction handleResize() {\r\n    if (isDesktop && ($(window).outerWidth() < DESKTOP_BREAKPOINT)) {\r\n        isDesktop = false;\r\n\r\n        submenus.forEach((submenu) => {\r\n            submenu.dropdownStrategy.deactivate();\r\n            submenu.drilldownStrategy.activate();\r\n        });\r\n    } else if (!isDesktop && ($(window).outerWidth() >= DESKTOP_BREAKPOINT)) {\r\n        isDesktop = true;\r\n\r\n        submenus.forEach((submenu) => {\r\n            submenu.drilldownStrategy.deactivate();\r\n            submenu.dropdownStrategy.activate();\r\n        });\r\n\r\n        mobileMenu.collapse();\r\n    }\r\n}\r\n\r\n// ----------------------------- END PUBLIC METHODS ---------------------------\r\n\r\nexport default {\r\n    initBlock,\r\n    handleResize,\r\n};\r\n","/**\r\n * @file Implementation of the tabs block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport forceReflow from '../../../js/utils/force-reflow';\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\nconst TRANSITION_DURATION = 200;\r\nconst MOBILE_BREAKPOINT = 768;\r\n\r\nconst ClassNames = {\r\n    PANEL_ACTIVE: 'tabs__panel_active',\r\n    PANEL_HIDDEN: 'tabs__panel_hidden',\r\n};\r\n  \r\nconst Selectors = {\r\n    ROOT: '.tabs',\r\n    TABLIST: '.tabs__list',\r\n    TABS: '.tabs__tab',\r\n    PANELS: '.tabs__panel',\r\n};\r\n  \r\nconst Keys = {\r\n    ENTER: 13,\r\n    SPACE: 32,\r\n    END: 35,\r\n    HOME: 36,\r\n    LEFT: 37,\r\n    UP: 38,\r\n    RIGHT: 39,\r\n    DOWN: 40,\r\n};\r\n\r\nlet isMobile = true;\r\nconst tabs = [];\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n/**\r\n * Tabs implementation\r\n */\r\nclass Tabs {\r\n\r\n    /**\r\n     * Create tabs.\r\n     * \r\n     * @param {JQuery} $root The root element\r\n     */\r\n    constructor($root) {\r\n        const $list = $(Selectors.TABLIST, $root);\r\n        const $tabs = $(Selectors.TABS, $list);\r\n        const $panels = $(Selectors.PANELS, $root);\r\n\r\n        if (($tabs.length === 0) || ($tabs.length !== $panels.length)) {\r\n            return;\r\n        }\r\n\r\n        let activeIndex = null;\r\n\r\n        $tabs.each(function(i) {\r\n            const $tab = $(this);\r\n\r\n            if ($tab.attr('aria-selected') === 'true') {\r\n                if (activeIndex === -1) {\r\n                    activeIndex = i;\r\n                } else {\r\n                    $tab.attr('aria-selected', 'false');\r\n                }\r\n\r\n                $tab.attr('tabindex', '0');\r\n            } else {\r\n                $tab.attr('tabindex', '-1');\r\n            }\r\n        });\r\n        \r\n        if (activeIndex == null) {\r\n            $tabs.eq(0).attr({\r\n                'aria-selected': 'true',\r\n                'tabindex': '0',\r\n            });\r\n\r\n            activeIndex = 0;\r\n        }\r\n        \r\n        $panels.each(function(i) {\r\n            $(this).toggleClass(ClassNames.PANEL_ACTIVE, i === activeIndex);\r\n        });\r\n\r\n        this._elements = {\r\n            $root,\r\n            $list,\r\n            $tabs,\r\n            $panels,\r\n        };\r\n    \r\n        this._state = {\r\n            activeIndex,\r\n            isTransitioning: false,\r\n            orientation: 'vertical',\r\n        };\r\n\r\n        this._handleTabClick = this._handleTabClick.bind(this);\r\n        this._handleTabKeyDown = this._handleTabKeyDown.bind(this);\r\n\r\n        $list.on('click', Selectors.TABS, this._handleTabClick);\r\n        $list.on('keydown', Selectors.TABS, this._handleTabKeyDown);\r\n    }\r\n    \r\n    // --------------------------- BEGIN EVENT HANDLERS --------------------------\r\n    \r\n    /**\r\n     * Handle the tab click event\r\n     * \r\n     * @param {JQuery.Event} e The event object\r\n     */\r\n    _handleTabClick(e) {\r\n        const tabIndex = this._elements.$tabs.index($(e.currentTarget));\r\n        this.showTab(tabIndex);\r\n        return false;\r\n    }\r\n  \r\n    /**\r\n     * Handle the tab keydown event\r\n     * \r\n     * @param {JQuery.Event} e The event object\r\n     */\r\n    _handleTabKeyDown(e) {  \r\n        const { $tabs } = this._elements;\r\n        const { orientation, activeIndex } = this._state;\r\n        const { which } = e;\r\n      \r\n        let nextFocus = null;\r\n\r\n        switch (which) {\r\n        case Keys.END:\r\n            // Move focus to the last tab\r\n            nextFocus = $tabs.length - 1;\r\n            break;\r\n  \r\n        case Keys.HOME:\r\n            // Move focus to the first tab\r\n            nextFocus = 0;\r\n            break;\r\n  \r\n        case Keys.DOWN:\r\n            // Move focus to the next tab (in vertical tab list)\r\n            if (orientation === 'vertical') {\r\n                nextFocus = ($tabs.length + activeIndex + 1) % $tabs.length;\r\n            }\r\n            break;\r\n  \r\n        case Keys.LEFT:\r\n            // Move focus to the previous tab (in horizontal tab list)\r\n            if (orientation === 'horizontal') {\r\n                nextFocus = ($tabs.length + activeIndex - 1) % $tabs.length;\r\n            }\r\n            break;\r\n  \r\n        case Keys.UP:\r\n            // Move focus to the previous tab (in vertical tab list)\r\n            if (orientation === 'vertical') {\r\n                nextFocus = ($tabs.length + activeIndex - 1) % $tabs.length;\r\n            }\r\n            break;\r\n  \r\n        case Keys.RIGHT:\r\n            // Move focus to the next tab (in horizontal tab list)\r\n            if (orientation === 'horizontal') {\r\n                nextFocus = ($tabs.length + activeIndex + 1) % $tabs.length;\r\n            }\r\n            break;\r\n        }\r\n\r\n        if (nextFocus != null) {\r\n            this.showTab(nextFocus);\r\n            return false;\r\n        }\r\n    }\r\n    \r\n    // ---------------------------- END EVENT HANDLERS ---------------------------\r\n    \r\n    // --------------------------- BEGIN PUBLIC METHODS --------------------------\r\n    \r\n    /**\r\n     * Activate the given tab.\r\n     * \r\n     * @param {number} i index of the tab to be activated\r\n     */\r\n    showTab(i) {\r\n        const { $tabs, $panels } = this._elements;\r\n        const { isTransitioning, activeIndex } = this._state;\r\n\r\n        if ((i < 0) || (i >= $tabs.length)) {\r\n            return;\r\n        }\r\n      \r\n        if (isTransitioning || (activeIndex === i)) {\r\n            return;\r\n        }\r\n      \r\n        this._state.isTransitioning = true;\r\n      \r\n        const $prevTab = $tabs.eq(activeIndex);\r\n        const $prevPanel = $panels.eq(activeIndex);\r\n        const $nextTab = $tabs.eq(i);\r\n        const $nextPanel = $panels.eq(i);\r\n      \r\n        $prevTab.attr({\r\n            'aria-selected': 'false',\r\n            'tabindex': '-1',\r\n        });\r\n        $nextTab.attr({\r\n            'aria-selected': 'true',\r\n            'tabindex': '0',\r\n        });\r\n\r\n        $nextTab.focus();\r\n\r\n        $prevPanel.addClass(ClassNames.PANEL_HIDDEN);\r\n\r\n        setTimeout(() => {\r\n            $prevPanel\r\n                .removeClass(ClassNames.PANEL_ACTIVE)\r\n                .removeClass(ClassNames.PANEL_HIDDEN);\r\n            $nextPanel\r\n                .addClass(ClassNames.PANEL_ACTIVE)\r\n                .addClass(ClassNames.PANEL_HIDDEN);\r\n            \r\n            forceReflow($nextPanel);\r\n            \r\n            $nextPanel.removeClass(ClassNames.PANEL_HIDDEN);\r\n            \r\n            this._state.activeIndex = i;\r\n            this._state.isTransitioning = false;\r\n        }, TRANSITION_DURATION);\r\n    }\r\n    \r\n    /**\r\n     * Change tabs orienation.\r\n     * \r\n     * @param {string} orientation 'vertical' or 'horizontal'\r\n     */\r\n    setOrientation(orientation) {\r\n        this._state.orientation = orientation;\r\n        this._elements.$list.attr('aria-orientation', orientation);\r\n    }\r\n    \r\n    /** \r\n     * Initialize all tabs blocks on the page.\r\n     */\r\n    static initAll() {\r\n        $(Selectors.ROOT).each(function() {\r\n            tabs.push(new Tabs($(this)));\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Respond to window resize event.\r\n     * \r\n     * Switch between vertical orientation on mobile devices and horizontal\r\n     * orientation on larger screens.\r\n     */\r\n    static handleResize() {\r\n        if (!isMobile && ($(window).outerWidth() < MOBILE_BREAKPOINT)) {\r\n            isMobile = true;\r\n    \r\n            tabs.forEach((tab) => tab.setOrientation('vertical'));\r\n        } else if (isMobile && ($(window).outerWidth() >= MOBILE_BREAKPOINT)) {\r\n            isMobile = false;\r\n    \r\n            tabs.forEach((tab) => tab.setOrientation('horizontal'));\r\n        }\r\n    }\r\n\r\n    // ---------------------------- END PUBLIC METHODS ---------------------------\r\n}\r\n\r\nexport default Tabs;\r\n","/**\r\n * @file Implementation of the accordion slider block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES -------------------------- \r\nconst Selectors = {\r\n    ROOT: '.accordion-slider',\r\n    THUMB: '.accordion-slider__thumb',\r\n    IMAGE: '.accordion-slider__thumb-img',\r\n};\r\n\r\nconst MOBILE_BREAKPOINT = 768;\r\nconst THUMB_HEIGHT = 100;\r\n\r\nlet isMobile = true;\r\nconst sliders = [];\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n/**\r\n * Accordion slider.\r\n */\r\nclass AccordionSlider {\r\n\r\n    /**\r\n     * Create an accordion slider\r\n     * \r\n     * @param {JQuery} $root The root element\r\n     */\r\n    constructor($root) {\r\n        const $thumbs = $(Selectors.THUMB, $root);\r\n\r\n        this._elements = { $root, $thumbs };\r\n\r\n        this._collapsedThumbWidth = `${100 / $thumbs.length}%`;\r\n        this._collapsedThumbHeight = THUMB_HEIGHT;\r\n\r\n        this._isVertical = true;\r\n\r\n        this._handleThumbExpand = this._handleThumbExpand.bind(this);\r\n        this._handleThumbCollapse = this._handleThumbCollapse.bind(this);\r\n\r\n        $root.on('mouseenter', Selectors.THUMB, this._handleThumbExpand);\r\n        $root.on('focus', Selectors.THUMB, this._handleThumbExpand);\r\n        $root.on('mouseleave', Selectors.THUMB, this._handleThumbCollapse);\r\n        $root.on('blur', Selectors.THUMB, this._handleThumbCollapse);\r\n\r\n        /**\r\n         * Each slide acts as a thumbnail for gallery managed by the\r\n         * magnific-popup jQuery plugin\r\n         */\r\n        $root.magnificPopup({\r\n            delegate: Selectors.THUMB,\r\n            mainClass: 'lightbox',\r\n            gallery: {\r\n                enabled: true,\r\n                tCounter: '',\r\n            },\r\n\r\n            closeMarkup: `\r\n                <button aria-label=\"Close\" type=\"button\" class=\"mfp-close\">\r\n                    &#215;\r\n                </button>\r\n            `,\r\n            arrowMarkup: `\r\n                <button \r\n                    aria-label=\"%title%\"\r\n                    type=\"button\"\r\n                    class=\"mfp-arrow mfp-arrow-%dir%\"\r\n                >\r\n                </button>\r\n            `,\r\n\r\n            callbacks: {\r\n                beforeOpen() {\r\n                    // For web accessibility\r\n                    this.wrap.attr({\r\n                        'role': 'dialog',\r\n                        'aria-label': 'Gallery',\r\n                    });\r\n                },\r\n            },\r\n        });\r\n    }\r\n\r\n    // -------------------------- BEGIN EVENT HANDLERS ------------------------\r\n\r\n    /**\r\n     * Handle the thumbnail expand event\r\n     * \r\n     * @param {jQuery.Event} e The event object\r\n     */\r\n    _handleThumbExpand(e) {\r\n        const $thumb = $(e.currentTarget);\r\n        const $image = $(Selectors.IMAGE, $thumb);\r\n\r\n        if (this._isVertical) {\r\n            $thumb.height($image.height());\r\n        } else {\r\n            $thumb.width($image.width());\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Handle the thumbnail collapse event\r\n     * \r\n     * @param {jQuery.Event} e The event object\r\n     */\r\n    _handleThumbCollapse(e) {\r\n        const $thumb = $(e.currentTarget);\r\n\r\n        if (this._isVertical) {\r\n            $thumb.height(this._collapsedThumbHeight);\r\n        } else {\r\n            $thumb.width(this._collapsedThumbWidth);\r\n        }\r\n    }\r\n\r\n    // --------------------------- END EVENT HANDLERS -------------------------\r\n\r\n    // -------------------------- BEGIN PUBLIC METHODS ------------------------\r\n\r\n    /**\r\n     * Switch slider orientation.\r\n     * \r\n     * @param {boolean} vertical\r\n     *      true for vertical orientation, false for horizontal\r\n     */\r\n    setVertical(vertical) {\r\n        this._isVertical = vertical;\r\n\r\n        if (vertical) {\r\n            this._elements.$thumbs.width('').height(this._collapsedThumbHeight);\r\n        } else {\r\n            this._elements.$thumbs.width(this._collapsedThumbWidth).height('');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Initialize all accordion sliders on the page.\r\n     */\r\n    static initAll() {\r\n        $(Selectors.ROOT).map(function() {\r\n            sliders.push(new AccordionSlider($(this)));\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Respond to window resize event.\r\n     * \r\n     * Switch between vertical orientation on mobile devices and horizontal\r\n     * orientation on larger screens.\r\n     */\r\n    static handleResize() {\r\n        if (!isMobile && ($(window).outerWidth() < MOBILE_BREAKPOINT)) {\r\n            isMobile = true;\r\n    \r\n            sliders.forEach((slider) => slider.setVertical(true));\r\n        } else if (isMobile && ($(window).outerWidth() >= MOBILE_BREAKPOINT)) {\r\n            isMobile = false;\r\n    \r\n            sliders.forEach((slider) => slider.setVertical(false));\r\n        }\r\n    }\r\n\r\n    // --------------------------- END PUBLIC METHODS -------------------------\r\n}\r\n\r\nexport default AccordionSlider;\r\n","/**\r\n * @file Implementation of the contact form block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the contact form module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    $('.contact-form').validate({\r\n        errorClass  : 'error contact-form__error',\r\n    \r\n        highlight   : function(element) {\r\n            if ($(element).hasClass('input')) {\r\n                $(element).addClass('input_invalid');\r\n            } else if ($(element).hasClass('text-area')) {\r\n                $(element).addClass('text-area_invalid');\r\n            }\r\n        },\r\n    \r\n        unhighlight : function(element) {\r\n            if ($(element).hasClass('input')) {\r\n                $(element).removeClass('input_invalid');\r\n            } else if ($(element).hasClass('text-area')) {\r\n                $(element).removeClass('text-area_invalid');\r\n            }\r\n        },\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the location map block\r\n * @author Andrey Glotov\r\n */\r\n\r\n/* global L */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\nconst markerIcon = L.icon({\r\n    iconUrl: 'img/map-marker.png',\r\n    iconSize: [35, 53], \r\n    iconAnchor: [18, 53],\r\n});\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n\r\n/**\r\n * Initialize the the location map module.\r\n * \r\n * @param {JQuery} $root The block root node\r\n */\r\nfunction initBlock($root) {\r\n    const { latlng, zoom } = $root.data('map');\r\n\r\n    const $container = $('.location-map__container', $root);\r\n\r\n    const map = L.map($container.get(0), {\r\n        scrollWheelZoom: false,\r\n    }).setView(latlng, zoom);\r\n\r\n    L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {\r\n        attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy; <a href=\"https://carto.com/attributions\">CARTO</a>',\r\n        subdomains: 'abcd',\r\n        maxZoom: 19,\r\n    }).addTo(map);\r\n\r\n    L.marker(latlng, {\r\n        icon: markerIcon\r\n    }).addTo(map);\r\n\r\n    map.on('focus', function handleMapFocus() {\r\n        map.scrollWheelZoom.enable();\r\n    });\r\n    map.on('blur', function handleMapBlur() {\r\n        map.scrollWheelZoom.disable();\r\n    });\r\n}\r\n\r\n/**\r\n * Initialize all location map blocks on the page.\r\n */\r\nfunction initAll() {\r\n    $('.location-map').each(function() {\r\n        initBlock($(this));\r\n    });\r\n}\r\n\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n\r\nexport default {\r\n    initBlock,\r\n    initAll,\r\n};\r\n","/**\r\n * @file Implementation of the gallery block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the gallery module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    $('.gallery').each(function() {\r\n        $(this).magnificPopup({\r\n            delegate  : '.gallery__thumb-link',\r\n            mainClass : 'lightbox',\r\n            type      : 'image',\r\n            gallery   : {\r\n                enabled  : true,\r\n                tCounter : '',\r\n            },\r\n\r\n            closeMarkup : '<button aria-label=\"Close\" type=\"button\" '\r\n                + 'class=\"mfp-close\">&#215;</button>',\r\n            arrowMarkup : '<button aria-label=\"%title%\" type=\"button\" '\r\n                + 'class=\"mfp-arrow mfp-arrow-%dir%\"></button>',\r\n\r\n            callbacks   : {\r\n                beforeOpen() {\r\n                    this.wrap.attr({\r\n                        'role'       : 'dialog',\r\n                        'aria-label' : 'Gallery',\r\n                    });\r\n                },\r\n            },\r\n        });\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------","/**\r\n * @file Implementation of the menu block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n\r\n/**\r\n * Initialize a menu block.\r\n * @param {JQuery} $menu The root element\r\n * @return true\r\n */\r\nfunction initBlock($menu) {\r\n    $menu.magnificPopup({\r\n        delegate: '.menu-product__link',\r\n        mainClass: 'lightbox',\r\n        type: 'image',\r\n\r\n        closeMarkup: `\r\n            <button aria-label=\"Close\" type=\"button\" class=\"mfp-close\">\r\n                &#215;\r\n            </button>\r\n        `,\r\n\r\n        callbacks: {\r\n            beforeOpen() {\r\n                // for web accessibility purposes\r\n                this.wrap.attr({\r\n                    'role': 'dialog',\r\n                    'aria-label': 'View image',\r\n                });\r\n            },\r\n        },\r\n    });\r\n\r\n    return true;\r\n}\r\n\r\n/**\r\n * Initialize all menu blocks on the page.\r\n * @return true\r\n */\r\nfunction initAll() {\r\n    $('.menu').each(function() {\r\n        initBlock($(this));\r\n    });\r\n    \r\n    return true;\r\n}\r\n\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n\r\nexport default {\r\n    initBlock,\r\n    initAll,\r\n};\r\n","/**\r\n * @file Implementation of the reservation form block\r\n * @author Andrey Glotov\r\n */\r\n\r\n/* global Pikaday, moment */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\nconst openingHours = [\r\n    {start: 10, end: 21}, // Sun\r\n    {start: 9,  end: 22}, // Mon\r\n    {start: 9,  end: 22}, // Tue\r\n    {start: 9,  end: 22}, // Wed\r\n    {start: 9,  end: 22}, // Thu\r\n    {start: 9,  end: 22}, // Fri\r\n    {start: 10, end: 21}, // Sat\r\n];\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// -------------------------- BEGIN UTILITY FUNCTIONS -------------------------\r\nconst getStartMoment = function() {\r\n    const currentMoment = moment();\r\n\r\n    // Reservation must be done at least 30 minutes ahead \r\n    currentMoment.add(30, 'minutes');\r\n\r\n    // Round up to nearest half hour\r\n    if ((currentMoment.minutes() % 30) !== 0) {\r\n        currentMoment.add(30 - (currentMoment.minutes() % 30), 'minutes');\r\n    }\r\n\r\n    // If it's too late, allow reservation from only the next day\r\n    if (currentMoment.hours() >= openingHours[currentMoment.day()].end) {\r\n        return moment({\r\n            year  : currentMoment.year(),\r\n            month : currentMoment.month(),\r\n            date  : currentMoment.date() + 1,\r\n        });\r\n    }\r\n\r\n    return currentMoment;\r\n};\r\n\r\nconst getAvailableTimes = function(startMoment) {\r\n    const hours = openingHours[startMoment.day()];\r\n\r\n    const m = moment.max(\r\n        moment(startMoment),\r\n        moment(startMoment).hours(hours.start)\r\n    );\r\n\r\n    const timeArray = [];\r\n\r\n    while (m.hour() < hours.end) {\r\n        timeArray.push(m.format('h:mm A'));\r\n        m.add(30, 'minutes');\r\n    }\r\n\r\n    return timeArray;\r\n};\r\n// --------------------------- END UTILITY FUNCTIONS --------------------------\r\n\r\n// ----------------------------- BEGIN DOM METHODS ----------------------------\r\nconst updateTimeSelect = function($time, startMoment) {\r\n    const timeArray    = getAvailableTimes(startMoment);\r\n    const selectedTime = $time.val();\r\n\r\n    const $options  = timeArray.map(function(time) {\r\n        return $('<option></option>')\r\n            .val(time)\r\n            .text(time)\r\n            .prop('selected', time == selectedTime);\r\n    });\r\n\r\n    $time\r\n        .empty()\r\n        .append($options)\r\n        .trigger('change');\r\n};\r\n\r\nconst initSelect = function($select) {\r\n    $select.select2({\r\n        theme                   : 'theme--default',\r\n        width                   : 'style',\r\n        minimumResultsForSearch : Infinity,\r\n    });\r\n\r\n    const data = $select.data('select2');\r\n    data.$container.addClass('reservation-form__input');\r\n    data.$selection.attr('aria-labelledby', $select.attr('aria-labelledby'));\r\n};\r\n// ------------------------------ END DOM METHODS -----------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the reservation form module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    const startMoment = getStartMoment();\r\n\r\n    $('.reservation-form').each(function() {\r\n        const $form   = $(this);\r\n        const $date   = $form.find('.reservation-form__date');\r\n        const $time   = $form.find('.reservation-form__time');\r\n        const $people = $form.find('.reservation-form__people');\r\n    \r\n        new Pikaday({\r\n            field          : $date.get(0),\r\n    \r\n            defaultDate    : startMoment.toDate(),\r\n            setDefaultDate : true,\r\n    \r\n            // Reservations can be made up to 6 months in advance\r\n            minDate        : startMoment.toDate(),\r\n            maxDate        : moment(startMoment).add(6, 'months').toDate(),\r\n    \r\n            format         : 'DD/MM/YYYY',\r\n            theme          : 'date-picker',\r\n    \r\n            onSelect       : function onSelectDate() {\r\n                updateTimeSelect($time, this.getMoment());\r\n            },\r\n        });\r\n\r\n        initSelect($time);\r\n        initSelect($people);\r\n\r\n        updateTimeSelect($time, startMoment);\r\n\r\n        $form.validate({\r\n            rules: {\r\n                date: {\r\n                    required  : true,\r\n                    validDate : true,\r\n                }\r\n            },\r\n            \r\n            errorClass  : 'error reservation-form__error',\r\n\r\n            highlight   : function(element) {\r\n                $(element).addClass('input_invalid');\r\n            },\r\n            unhighlight : function(element) {\r\n                $(element).removeClass('input_invalid');\r\n            },\r\n        });\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------","/**\r\n * @file Implementation of the slider block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// ----------------------------- BEGIN CONSTANTS ------------------------------\r\nconst AUTOPLAY_SPEED = 5000;\r\nconst TRANSITION_SPEED = 500;\r\n// ------------------------------ END CONSTANTS -------------------------------\r\n\r\n// --------------------------- BEGIN EVENT HANDLERS ---------------------------\r\n\r\n/**\r\n * Remove the \"active\" modifier from the previous slide and apply it to the\r\n * current one\r\n * @param {Object} e The event\r\n * @param {Object} slick Slider instance\r\n * @param {number} current Current slide index\r\n * @param {number} next Next slide index\r\n */\r\nfunction handleSlickBeforeChange(e, slick, current, next) {\r\n    slick.$slides.eq(current).removeClass('slider__slide_active');\r\n    slick.$slides.eq(next).addClass('slider__slide_active');\r\n}\r\n\r\n// ---------------------------- END EVENT HANDLERS ----------------------------\r\n\r\n// ---------------------------- BEGIN PUBLIC METHODS --------------------------\r\n\r\n/**\r\n * Initialize the slider block.\r\n * @return true\r\n */\r\nfunction initBlock($slider) {\r\n    const $container = $('.slider__container', $slider);\r\n    const $prevArrow = $('.slider__arrow_dir_prev', $slider);\r\n    const $nextArrow = $('.slider__arrow_dir_next', $slider);\r\n\r\n    $container.slick({\r\n        rows: 0,\r\n        zIndex: 1,\r\n\r\n        cssEase: 'linear',\r\n        fade: true,\r\n        speed: TRANSITION_SPEED,\r\n\r\n        autoplay: true,\r\n        autoplaySpeed: AUTOPLAY_SPEED,\r\n        pauseOnFocus  : false,\r\n        pauseOnHover  : false,\r\n\r\n        prevArrow: $prevArrow,\r\n        nextArrow: $nextArrow,\r\n    });\r\n\r\n    $container.on('beforeChange', handleSlickBeforeChange);\r\n}\r\n\r\n/**\r\n * Initialize all slider blocks on the page.\r\n */\r\nfunction initAll() {\r\n    $('.slider').each(function() {\r\n        initBlock($(this));\r\n    });\r\n}\r\n\r\n// ----------------------------- END PUBLIC METHODS ---------------------------\r\n\r\nexport default {\r\n    initAll,\r\n    initBlock,\r\n};\r\n","/**\r\n * @file Implementation of the specials slider block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport forceReflow from '../../../js/utils/force-reflow';\r\n\r\n// ----------------------------- BEGIN CONSTANTS ------------------------------\r\n\r\n// Keep these in sync with css!\r\n// TODO: read these values using the computed styles\r\nconst GUTTER_WIDTH = 25;\r\nconst MIN_OPACITY = 0.5;\r\nconst MIN_SCALE = 0.8;\r\nconst TRANSITION_DURATION = 150;\r\n\r\nconst Selectors = {\r\n    ROOT: '.specials-slider',\r\n    SLIDES: '.specials-slider__slide',\r\n    SLIDE_INNER: '.specials-slider__slide-inner',\r\n    PREV_ARROW: '.specials-slider__arrow_dir_prev',\r\n    NEXT_ARROW: '.specials-slider__arrow_dir_next',\r\n};\r\n\r\nconst ClassNames = {\r\n    SLIDE_MOVING: 'specials-slider__slide_moving',\r\n    SLIDE_ACTIVE: 'specials-slider__slide_active',\r\n};\r\n\r\n// ------------------------------- END CONSTANT -------------------------------\r\n\r\n/**\r\n * Specials Slider\r\n */\r\nclass SpecialsSlider {\r\n\r\n    /**\r\n     * Create a slider\r\n     * \r\n     * @param {JQuery} $root The root element\r\n     */\r\n    constructor($root) {\r\n        const $slides = $(Selectors.SLIDES, $root);\r\n        const $prevArrow = $(Selectors.PREV_ARROW, $root);\r\n        const $nextArrow = $(Selectors.NEXT_ARROW, $root);\r\n\r\n        this._elements = { $root, $slides, $prevArrow, $nextArrow };\r\n\r\n        this._state = {\r\n            isTransitioning: false,\r\n            activeIndex: 0,\r\n        };\r\n\r\n        this._config = {\r\n            dOffset: GUTTER_WIDTH / ($slides.length - 1),\r\n            dOpacity: (1 - MIN_OPACITY) / ($slides.length - 1),\r\n            dScale: (1 - MIN_SCALE) / ($slides.length - 1),\r\n        };\r\n\r\n        $prevArrow.click(this.prevSlide.bind(this));\r\n        $nextArrow.click(this.nextSlide.bind(this));\r\n\r\n        this._updateStyles();\r\n    }\r\n\r\n    // -------------------------- BEGIN PRIVATE METHODS -----------------------\r\n\r\n    /**\r\n     * Apply CSS styles to the given slide\r\n     * \r\n     * @param {JQuery} $slide The slide to apply styles to\r\n     * @param {number} order Current stacking order of this slide\r\n     */\r\n    _applySlideStyles($slide, order) {\r\n        const {dOffset, dOpacity, dScale} = this._config;\r\n        \r\n        $slide.css({\r\n            transform: `translateX(${order * dOffset}%)`,\r\n            zIndex: this._elements.$slides.length - order,\r\n        }).find(Selectors.SLIDE_INNER).css({\r\n            opacity: (1 - (order * dOpacity)),\r\n            transform: `scale(${1 - (order * dScale)})`,\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Update CSS styles of all slides\r\n     */\r\n    _updateStyles() { \r\n        const total = this._elements.$slides.length;\r\n    \r\n        this._elements.$slides.each((i, slide) => {\r\n            const $slide = $(slide);\r\n\r\n            if (!$slide.hasClass(ClassNames.SLIDE_MOVING)) {\r\n                const order = (i - this._state.activeIndex + total) % total;\r\n                this._applySlideStyles($slide, order);\r\n            }\r\n        });\r\n    }\r\n\r\n    // --------------------------- END PRIVATE METHODS ------------------------\r\n\r\n    // -------------------------- BEGIN PUBLIC METHODS ------------------------\r\n\r\n    /**\r\n     * Transition to the previous slide\r\n     */\r\n    prevSlide() {\r\n        if (this._state.isTransitioning) {\r\n            return;\r\n        }\r\n        this._state.isTransitioning = true;\r\n\r\n        let activeIndex = this._state.activeIndex;\r\n        const $slides = this._elements.$slides;\r\n\r\n        const $prevSlide = $slides.eq(activeIndex);\r\n\r\n        activeIndex--;\r\n        if (activeIndex < 0) {\r\n            activeIndex = $slides.length - 1;\r\n        }\r\n        this._state.activeIndex = activeIndex;\r\n\r\n        const $movingSlide = $slides.eq(activeIndex);\r\n        \r\n        $movingSlide.addClass(ClassNames.SLIDE_MOVING);\r\n        $movingSlide.css('zIndex', '-=1');\r\n\r\n        setTimeout(() => {\r\n            this._updateStyles();\r\n\r\n            setTimeout(() => {\r\n                forceReflow($movingSlide);\r\n\r\n                $prevSlide.removeClass(ClassNames.SLIDE_ACTIVE);\r\n                $movingSlide.addClass(ClassNames.SLIDE_ACTIVE);\r\n                $movingSlide.removeClass(ClassNames.SLIDE_MOVING);\r\n\r\n                this._applySlideStyles($movingSlide, 0);\r\n\r\n                this._state.isTransitioning = false;\r\n            }, TRANSITION_DURATION);\r\n        }, TRANSITION_DURATION);\r\n    }\r\n\r\n    /**\r\n     * Transition to the next slide\r\n     */\r\n    nextSlide() {\r\n        if (this._state.isTransitioning) {\r\n            return;\r\n        }\r\n        this._state.isTransitioning = true;\r\n\r\n        let activeIndex = this._state.activeIndex;\r\n        const $slides = this._elements.$slides;\r\n        const $movingSlide = $slides.eq(activeIndex);\r\n        \r\n        $movingSlide.addClass(ClassNames.SLIDE_MOVING);\r\n        $movingSlide.css('zIndex', '+=1');\r\n        $movingSlide.removeClass(ClassNames.SLIDE_ACTIVE);\r\n\r\n        activeIndex++;\r\n        if (activeIndex >= $slides.length) {\r\n            activeIndex = 0;\r\n        }\r\n        this._state.activeIndex = activeIndex;\r\n\r\n        const $nextSlide = $slides.eq(activeIndex);\r\n        $nextSlide.addClass(ClassNames.SLIDE_ACTIVE);\r\n        \r\n        setTimeout(() => {\r\n            this._updateStyles();\r\n            \r\n            setTimeout(() => {\r\n                $movingSlide.removeClass(ClassNames.SLIDE_MOVING);\r\n                \r\n                this._applySlideStyles($movingSlide, $slides.length - 1);\r\n\r\n                this._state.isTransitioning = false;\r\n            }, TRANSITION_DURATION);\r\n        }, TRANSITION_DURATION);\r\n    }\r\n\r\n    /**\r\n     * Initialize all specials slider blocks on the page\r\n     */\r\n    static initAll() {\r\n        $(Selectors.ROOT).init(function() {\r\n            new SpecialsSlider($(this));\r\n        });\r\n    }\r\n\r\n    // --------------------------- END PUBLIC METHODS -------------------------\r\n}\r\n\r\nexport default SpecialsSlider;\r\n","/**\r\n * @file Miscellaneous utility functions and classes\r\n * @author Andrey Glotov\r\n */\r\n\r\n/* global focusTrap */\r\n\r\nconst KEY_ESC   = 27;\r\nconst KEY_SPACE = 32;\r\nconst KEY_END   = 35;\r\nconst KEY_HOME  = 36;\r\nconst KEY_LEFT  = 37;\r\nconst KEY_UP    = 38;\r\nconst KEY_RIGHT = 39;\r\nconst KEY_DOWN  = 40;\r\n\r\nconst $document = $(document);\r\n\r\nconst dropdownProto = {\r\n    _onOutsideClick(event) {\r\n        const target = event.target;\r\n        if (!(\r\n            target === document\r\n            || this._$container.is($(target))\r\n            || $.contains(this._$container.get(0), target)\r\n        )) {\r\n            this.hide();\r\n        }\r\n    },\r\n\r\n    _onSwitcherClick() {\r\n        if (!this._isExpanded) {\r\n            this.show();\r\n        } else {\r\n            this.hide();\r\n        }\r\n    },\r\n\r\n    _onSwitcherKeydown(event) {\r\n        if (event.which === KEY_SPACE) {\r\n            event.preventDefault();\r\n            \r\n            if (!this._isExpanded) {\r\n                this.show();\r\n            } else {\r\n                this.hide();\r\n            }\r\n        }\r\n    },\r\n\r\n    _onSwitcherKeyup(event) {\r\n        if (event.which === KEY_SPACE) {\r\n            event.preventDefault();\r\n        }\r\n    },\r\n\r\n    _onKeydown(event) {\r\n        if (event.which === KEY_ESC) {\r\n            this.hide();\r\n            this._$switcher.focus();\r\n        }\r\n    },\r\n\r\n    show() {\r\n        this._isExpanded = true;\r\n\r\n        setTimeout(() => {\r\n            $document.on({\r\n                click   : this._onOutsideClick,\r\n                focusin : this._onOutsideClick,\r\n            });\r\n            this._$container.on('keydown', this._onKeydown);\r\n\r\n            if (this._onToggle) {\r\n                this._onToggle(true);\r\n            }\r\n        }, 0);\r\n\r\n        return this;\r\n    },\r\n\r\n    hide() {\r\n        this._isExpanded = false;\r\n\r\n        $document.off({\r\n            click   : this._onOutsideClick,\r\n            focusin : this._onOutsideClick,\r\n        });\r\n        this._$container.off('keydown', this._onKeydown);\r\n\r\n        if (this._onToggle) {\r\n            this._onToggle(false);\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n    pause() {\r\n        this._$switcher\r\n            .off({\r\n                click   : this._onSwitcherClick,\r\n                keydown : this._onSwitcherKeydown,\r\n                keyup   : this._onSwitcherKeyup,\r\n            });\r\n\r\n        if (this._hoverToggles) {\r\n            this._$container.off({\r\n                mouseenter : this._onMouseenter,\r\n                mouseleave : this._onMouseleave,\r\n            });\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n    unpause() {\r\n        this._$switcher\r\n            .click(this._onSwitcherClick)\r\n            .keydown(this._onSwitcherKeydown)\r\n            .keyup(this._onSwitcherKeyup);\r\n\r\n        if (this._hoverToggles) {\r\n            this._$container.hover(this._onMouseenter, this._onMouseleave);\r\n        }\r\n\r\n        return this;\r\n    },\r\n};\r\n\r\nexport const makeDropdown = function($container, $switcher, options) {\r\n    const dropdown = Object.create(dropdownProto);\r\n\r\n    dropdown._$container   = $container;\r\n    dropdown._$switcher    = $switcher;\r\n    dropdown._onToggle     = options.onToggle;\r\n    dropdown._hoverToggles = !!options.hoverToggles;\r\n    dropdown._isExpanded   = false;\r\n\r\n    // Bind the event handlers\r\n    dropdown._onOutsideClick    = dropdown._onOutsideClick.bind(dropdown);\r\n    dropdown._onSwitcherClick   = dropdown._onSwitcherClick.bind(dropdown);\r\n    dropdown._onSwitcherKeydown = dropdown._onSwitcherKeydown.bind(dropdown);\r\n    dropdown._onSwitcherKeyup   = dropdown._onSwitcherKeyup.bind(dropdown);\r\n    dropdown._onKeydown         = dropdown._onKeydown.bind(dropdown);\r\n\r\n    if (options.hoverToggles) {\r\n        dropdown._onMouseenter = dropdown.show.bind(dropdown);\r\n        dropdown._onMouseleave = dropdown.hide.bind(dropdown);\r\n    }\r\n\r\n    dropdown.unpause();\r\n\r\n    return dropdown;\r\n};\r\n\r\n\r\nconst drilldownChain = [];\r\nlet activeDrilldown  = null;\r\n\r\nconst drilldownProto = {\r\n    _onDocumentClick(event) {\r\n        if (!$.contains(this._$container.get(0), event.target)) {\r\n            this.hide();\r\n        }\r\n    },\r\n\r\n    _onToggleClick() {\r\n        if (this._isExpanded) {\r\n            this.hide();\r\n        } else {\r\n            this.show();\r\n        }\r\n    },\r\n\r\n    _onTrapDeactivate() {\r\n        $document.off('click', this._onDocumentClick);\r\n\r\n        if (drilldownChain.length !== 0) {\r\n            const prevDrilldown = drilldownChain.pop();\r\n\r\n            if (prevDrilldown._isExpanded) {\r\n                activeDrilldown = prevDrilldown;\r\n                activeDrilldown._trap.unpause();\r\n            }\r\n        } else {\r\n            activeDrilldown = null;\r\n        }\r\n\r\n        this._isExpanded = false;\r\n\r\n        if (this._onToggle) {\r\n            this._onToggle(false);\r\n        }\r\n    },\r\n\r\n    show() {\r\n        this._isExpanded = true;\r\n\r\n        if (activeDrilldown) {\r\n            activeDrilldown._trap.pause();\r\n            drilldownChain.push(activeDrilldown);\r\n        }\r\n\r\n        activeDrilldown = this;\r\n\r\n        if (this._onToggle) {\r\n            this._onToggle(true);\r\n        }\r\n\r\n        this._trap.activate();\r\n\r\n        setTimeout(() => {\r\n            $document.click(this._onDocumentClick);\r\n        }, 0);\r\n\r\n        return this;\r\n    },\r\n\r\n    hide() {\r\n        this._trap.deactivate();\r\n        return this;\r\n    },\r\n\r\n    pause() {\r\n        this._$toggle.off('click', this._onToggleClick);\r\n        return this;\r\n    },\r\n\r\n    unpause() {\r\n        this._$toggle.click(this._onToggleClick);\r\n        return this;\r\n    },\r\n};\r\n\r\nexport const makeDrilldown = function($container, $toggle, options) {\r\n    const drilldown = Object.create(drilldownProto);\r\n\r\n    drilldown._$container = $container;\r\n    drilldown._$toggle    = $toggle;\r\n    drilldown._onToggle   = options.onToggle;\r\n\r\n    drilldown._trap = new focusTrap($container.get(0), {\r\n        clickOutsideDeactivates : true,\r\n        escapeDeactivates       : true,\r\n\r\n        initialFocus            : options.initialFocus,\r\n        onDeactivate            : drilldown._onTrapDeactivate.bind(drilldown),\r\n    });\r\n\r\n    drilldown._onToggleClick   = drilldown._onToggleClick.bind(drilldown);\r\n    drilldown._onDocumentClick = drilldown._onDocumentClick.bind(drilldown);\r\n\r\n    drilldown.unpause();\r\n\r\n    return drilldown;\r\n};\r\n\r\n\r\nconst listboxProto = {\r\n    _onKeydown(event) {\r\n        const key = event.which;\r\n\r\n        const keyActions = (this._orientation === 'vertical')\r\n            ? verticalKeyActions\r\n            : horizontalKeyActions;\r\n        \r\n        if (keyActions[key]) {\r\n            keyActions[key].call(this);\r\n            return false;\r\n        }\r\n    },\r\n\r\n    firstTab() {\r\n        this.selectItem(0);\r\n    },\r\n\r\n    lastTab() {\r\n        this.selectItem(this._$items.length - 1);\r\n    },\r\n\r\n    prevTab() {\r\n        let nextIndex = this._activeIndex - 1;\r\n        if (nextIndex < 0) {\r\n            nextIndex = this._$items.length - 1;\r\n        }\r\n\r\n        this.selectItem(nextIndex);\r\n    },\r\n\r\n    nextTab() {\r\n        let nextIndex = this._activeIndex + 1;\r\n        if (nextIndex >= this._$items.length) {\r\n            nextIndex = 0;\r\n        }\r\n\r\n        this.selectItem(nextIndex);\r\n    },\r\n\r\n    selectItem(nextIndex) {\r\n        if (this._activeIndex === nextIndex) {\r\n            return;\r\n        }\r\n\r\n        if (this._onSelect) {\r\n            this._onSelect(nextIndex, this._activeIndex);\r\n        }\r\n\r\n        this._activeIndex = nextIndex;\r\n    },\r\n\r\n    setOrientation(orientation) {\r\n        this._orientation = orientation;\r\n    }\r\n};\r\n\r\nconst verticalKeyActions   = {\r\n    [KEY_END]   : listboxProto.lastTab,\r\n    [KEY_HOME]  : listboxProto.firstTab,\r\n    [KEY_UP]    : listboxProto.prevTab,\r\n    [KEY_DOWN]  : listboxProto.nextTab,\r\n};\r\nconst horizontalKeyActions = {\r\n    [KEY_END]   : listboxProto.lastTab,\r\n    [KEY_HOME]  : listboxProto.firstTab,\r\n    [KEY_LEFT]  : listboxProto.prevTab,\r\n    [KEY_RIGHT] : listboxProto.nextTab,\r\n};\r\n\r\nexport const makeListbox = function($container, $items, options) {\r\n    const listbox = Object.create(listboxProto);\r\n\r\n    listbox._$container  = $container;\r\n    listbox._$items      = $items;\r\n    listbox._activeIndex = 0;\r\n    listbox._onSelect    = options.onSelect,\r\n    listbox._onKeydown   = listbox._onKeydown.bind(listbox);\r\n\r\n    $container.keydown(listbox._onKeydown);\r\n    \r\n    $items.each(function(i) {\r\n        $(this).click(function(event) {\r\n            event.preventDefault();\r\n\r\n            listbox.selectItem(i);\r\n        });\r\n    });\r\n\r\n    listbox.setOrientation(options.orientation || 'horizontal');\r\n\r\n    return listbox;\r\n};\r\n","/**\r\n * @file Implementation of the portfolio filter block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport {makeListbox, makeDropdown} from '../../../js/utils';\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\nconst KEY_ENTER = 13;\r\nconst KEY_SPACE = 32;\r\n\r\nlet $portfolio, $filter, $inner, $toggle, $list, $btns;\r\n\r\nlet dropdownLogic, listboxLogic;\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// ----------------------------- BEGIN DOM METHODS ----------------------------\r\nconst showList = function() {\r\n    $toggle\r\n        .attr('aria-expanded', 'true')\r\n        .focusin(onToggleFocusin);\r\n\r\n    $list\r\n        .addClass('portfolio-filter__list_visible')\r\n        .click(onListClick)\r\n        .keydown(onListKeydown)\r\n        .focus();\r\n};\r\n\r\nconst hideList = function() {\r\n    $list\r\n        .removeClass('portfolio-filter__list_visible')\r\n        .off({\r\n            click   : onListClick,\r\n            keydown : onListKeydown,\r\n        });\r\n\r\n    $toggle\r\n        .attr('aria-expanded', 'false')\r\n        .off('focusin', onToggleFocusin);\r\n};\r\n// ------------------------------ END DOM METHODS -----------------------------\r\n\r\n// --------------------------- BEGIN EVENT HANDLERS ---------------------------\r\nconst onFilterSelect = function(next, prev) {\r\n    const $prevBtn = $btns.eq(prev);\r\n    const $nextBtn = $btns.eq(next);\r\n\r\n    $prevBtn\r\n        .removeClass('portfolio-filter__btn_active')\r\n        .attr('aria-selected', 'false');\r\n    $nextBtn\r\n        .addClass('portfolio-filter__btn_active')\r\n        .attr('aria-selected', 'true');\r\n\r\n    const activeFilter = $nextBtn.data('filter');\r\n\r\n    $list.attr('aria-activedescendant', $nextBtn.attr('id'));\r\n\r\n    $portfolio.trigger('filter', activeFilter);\r\n};\r\n\r\nconst onListClick = function() {\r\n    $toggle.focus();\r\n};\r\n\r\nconst onListKeydown = function(event) {\r\n    if (event.which === KEY_ENTER || event.which === KEY_SPACE) {\r\n        event.preventDefault();\r\n\r\n        $toggle.focus();\r\n        return false;\r\n    }\r\n};\r\n\r\nconst onToggleFocusin = function() {\r\n    dropdownLogic.hide();\r\n};\r\n\r\nconst onDropdownToggle = function(open) {\r\n    if (open) {\r\n        showList();\r\n    } else {\r\n        hideList();\r\n    }\r\n};\r\n// ---------------------------- END EVENT HANDLERS ----------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the portfolio filter module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    $portfolio = $('.portfolio');\r\n\r\n    $filter    = $('.portfolio-filter');\r\n    $inner     = $filter.find('.portfolio-filter__inner');\r\n    $toggle    = $inner.find('.portfolio-filter__toggle');\r\n    $list      = $inner.find('.portfolio-filter__list');\r\n    $btns      = $list.find('.portfolio-filter__btn');\r\n\r\n    listboxLogic = makeListbox($list, $btns, {\r\n        orientation : 'vertical',\r\n        onSelect    : onFilterSelect,\r\n    });\r\n\r\n    dropdownLogic = makeDropdown($inner, $toggle, {\r\n        onToggle: onDropdownToggle,\r\n    });\r\n\r\n    return true;\r\n};\r\n\r\n/**\r\n * Set filter orientation.\r\n * @param {string} orientation - 'horizontal' or 'vertical'\r\n */\r\nexport const setOrientation = function(orientation) {\r\n    $list.attr('aria-orientation', orientation);\r\n    listboxLogic.setOrientation(orientation);\r\n\r\n    if (orientation === 'horizontal') {\r\n        dropdownLogic.hide().pause();\r\n    } else {\r\n        dropdownLogic.unpause();\r\n    }\r\n};\r\n\r\n/**\r\n * Apply a filter.\r\n * @param {string} filter - The filter to be applied\r\n */\r\nexport const setFilter = function(filter) {\r\n    const sel = `.portfolio-filter__btn[data-filter=\"${filter}\"]`;\r\n    listboxLogic.selectItem($btns.index($(sel)));\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the portfolio grid block\r\n * @author Andrey Glotov\r\n */\r\n\r\n/* global Shuffle */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\nconst itemHtml = `\r\n<div class=\"portfolio-grid__item\">\r\n    <div class=\"portfolio-grid__item-inner\">\r\n        <img class=\"portfolio-grid__img\" />\r\n        <div class=\"portfolio-grid__text\">\r\n            <h2 class=\"portfolio-grid__title\">\r\n                <a class=\"portfolio-grid__link\"></a>\r\n            </h2>\r\n            <ul class=\"portfolio-grid__cats\">\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</div>\r\n`;\r\n\r\nlet shuffleInstance = null;\r\n\r\nlet $portfolio, $grid, $container, $sizer;\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// -------------------------- BEGIN UTILITY FUNCTIONS -------------------------\r\nconst createPortfolioItem = function(data) {\r\n    const $item = $(itemHtml);\r\n\r\n    $item.attr('data-groups', `[\"${data.categories.join('\",\"')}\"]`);\r\n    \r\n    $item.find('.portfolio-grid__link')\r\n        .text(data.title)\r\n        .attr('href', data.link);\r\n\r\n    $item.find('.portfolio-grid__img')\r\n        .attr({\r\n            src : data.image,\r\n            alt : data.title,\r\n        });\r\n\r\n    const $categories = data.categories.map(function(cat) {\r\n        const $catItem = $('<li></li>')\r\n            .addClass('portfolio-grid__cat-item');\r\n\r\n        const $catLink = $('<a></a>')\r\n            .addClass('portfolio-grid__cat-link')\r\n            .attr({\r\n                'href'        : 'javascript:void(0)',\r\n                'role'        : 'button',\r\n                'data-filter' : cat.toLowerCase(),\r\n            })\r\n            .text(cat);\r\n        \r\n        $catItem.append($catLink);\r\n        return $catItem;\r\n    });\r\n\r\n    $item.find('.portfolio-grid__cats').append($categories);\r\n\r\n    return $item;\r\n};\r\n// --------------------------- END UTILITY FUNCTIONS --------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the portfolio grid module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    $portfolio = $('.portfolio');\r\n\r\n    $grid      = $('.portfolio-grid');\r\n    $container = $grid.find('.portfolio-grid__inner');\r\n    $sizer     = $container.find('.portfolio-grid__sizer');\r\n\r\n    shuffleInstance = new Shuffle($container.get(0), {\r\n        itemSelector : '.portfolio-grid__item',\r\n        sizer        : $sizer.get(0),\r\n    });\r\n\r\n    $container\r\n        .on('click', '.portfolio-grid__cat-link', function onCatLinkClick() {\r\n            $portfolio.trigger('filter', $(this).data('filter'));\r\n        })\r\n        // Until all major browsers support the :focus-within CSS pseudo-class\r\n        // apply a class using JavaScript\r\n        .on('focusin', '.portfolio-grid__text', function onItemFocusin() {\r\n            $(this).addClass('.portfolio-grid__text_has-focus');\r\n        })\r\n        .on('focusout', '.portfolio-grid__text', function onItemFocusout() {\r\n            $(this).removeClass('.portfolio-grid__text_has-focus');\r\n        });\r\n};\r\n\r\n/**\r\n * Apply a filter.\r\n * @param {string} filter - The filter to be applied\r\n */\r\nexport const setFilter = function(filter) {\r\n    shuffleInstance.filter(filter);\r\n};\r\n\r\n/**\r\n * Add new items\r\n * @param {Array} items - the items to be added\r\n */\r\nexport const addItems = function(items) {\r\n    const newItems = $.map(items, createPortfolioItem);\r\n    \r\n    newItems.forEach(($item) => $item.insertBefore($sizer));\r\n\r\n    shuffleInstance.add(newItems.map(($item) => $item.get(0)));\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the portfolio block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport * as PortfolioFilter from '../portfolio-filter/portfolio-filter';\r\nimport * as PortfolioGrid   from '../portfolio-grid/portfolio-grid';\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\nconst MEDIUM_BREAKPOINT = 768;\r\nconst FAKE_LOAD_TIME    = 1000;\r\n\r\nlet $portfolio, $grid, $moreBtn;\r\n\r\nlet activeFilter   = 'all';\r\nlet verticalLayout = true;\r\n\r\nconst fakeItems = [{\r\n    title: 'Apple pie',\r\n    image: 'img/content/portfolio/projects/thumbs/apple-pie.jpg',\r\n    link: 'portfolio-single.html',\r\n    categories: ['desserts'],\r\n}, {\r\n    title: 'Fresh fruit cocktail',\r\n    image: 'img/content/portfolio/projects/thumbs/fresh-fruit-cocktail.jpg',\r\n    link: 'portfolio-single.html',\r\n    categories: ['drinks'],\r\n}, {\r\n    title: 'Green tea',\r\n    image: 'img/content/portfolio/projects/thumbs/green-tea.jpg',\r\n    link: 'portfolio-single.html',\r\n    categories: ['drinks'],\r\n}, {\r\n    title: 'Waffles with coffee',\r\n    image: 'img/content/portfolio/projects/thumbs/waffles-with-coffee.jpg',\r\n    link: 'portfolio-single.html',\r\n    categories: ['desserts', 'drinks'],\r\n}, {\r\n    title: 'Chicken livers',\r\n    image: 'img/content/portfolio/projects/thumbs/chicken-livers.jpg',\r\n    link: 'portfolio-single.html',\r\n    categories: ['lunch'],\r\n}];\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// -------------------------- BEGIN UTILITY FUNCTIONS -------------------------\r\nconst loadFakeItems = function() {\r\n    const $d = new $.Deferred();\r\n\r\n    setTimeout(() => {\r\n        $d.resolve({\r\n            items : fakeItems,\r\n            more  : false,\r\n        }); \r\n    }, FAKE_LOAD_TIME);\r\n\r\n    return $d.promise();\r\n};\r\n\r\nconst loadImage = function(src) {\r\n    const $d = new $.Deferred();\r\n\r\n    const image = new Image();\r\n    $(image).on('load', function() {\r\n        $d.resolve();\r\n    });\r\n    image.src = src;\r\n\r\n    return $d.promise();\r\n};\r\n// --------------------------- END UTILITY FUNCTIONS --------------------------\r\n\r\n// --------------------------- BEGIN EVENT HANDLERS ---------------------------\r\nconst onFilterChange = function(event, filter) {\r\n    if (activeFilter !== filter) {\r\n        activeFilter = filter;\r\n\r\n        PortfolioFilter.setFilter(filter);\r\n        PortfolioGrid.setFilter(filter);\r\n    }\r\n};\r\n\r\nconst onMoreBtnClick = function() {\r\n    $grid.attr('aria-busy', 'true');\r\n\r\n    // Show a loader\r\n    const $loader = $('<div></div>')\r\n        .addClass('loader loader_size_l portfolio__loader')\r\n        .insertAfter($moreBtn);\r\n\r\n    // Hide the button\r\n    $moreBtn.addClass('portfolio__more-btn_hidden');\r\n\r\n    let data;\r\n\r\n    loadFakeItems()\r\n        .then(function onItemsLoaded(response) {\r\n            data = response;\r\n\r\n            // Wait until all images are loaded \r\n            return $.when(...response.items.map(function(item) {\r\n                return loadImage(item.image);\r\n            }));\r\n        })\r\n        .then(function onImagesLoaded() {\r\n            $grid.attr('aria-busy', 'false');\r\n\r\n            PortfolioGrid.addItems(data.items);\r\n\r\n            // If there are more items available, show the button again\r\n            if (data.more) {\r\n                $moreBtn.removeClass('portfolio__more-btn_hidden');\r\n            }\r\n        })\r\n        .fail(function onFail() {\r\n            // Display an error message\r\n            const $error = $('<div></div>')\r\n                .addClass('error portfolio__error')\r\n                .text('An error occured');\r\n            $error.insertAfter($loader);\r\n        })\r\n        .always(function onLoadFail() {\r\n            // Hide the loader\r\n            $loader.remove();\r\n        });\r\n};\r\n// ---------------------------- END EVENT HANDLERS ----------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the portfolio module.\r\n * @return true if the portfolio block is present, false otherwise\r\n */\r\nexport const initModule = function() {\r\n    $portfolio = $('.portfolio');\r\n    if ($portfolio.length === 0) {\r\n        return false;\r\n    }\r\n\r\n    $grid    = $portfolio.find('.portfolio__grid');\r\n    $moreBtn = $portfolio.find('.portfolio__more-btn');\r\n\r\n    PortfolioFilter.initModule();\r\n    PortfolioGrid.initModule();\r\n\r\n    $portfolio.on('filter', onFilterChange);\r\n\r\n    $moreBtn.click(onMoreBtnClick);\r\n\r\n    return true;\r\n};\r\n\r\n/**\r\n * Respond to window resize event.\r\n */\r\nexport const handleResize = function() {\r\n    if ($portfolio.length === 0) {\r\n        return;\r\n    }\r\n\r\n    const screenWidth = $(window).outerWidth();\r\n    \r\n    // Switch listbox orientation to vertical on mobile and to horizontal on\r\n    // larger screens.\r\n    if (!verticalLayout && (screenWidth < MEDIUM_BREAKPOINT)) {\r\n        verticalLayout = true;\r\n\r\n        PortfolioFilter.setOrientation('vertical');\r\n    } else if (verticalLayout && (screenWidth >= MEDIUM_BREAKPOINT)) {\r\n        verticalLayout = false;\r\n\r\n        PortfolioFilter.setOrientation('horizontal');\r\n    }\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------","/**\r\n * @file Implementation of the project slider block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the project slider module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    $('.project-slider__container').slick({\r\n        rows      : 0,\r\n        slide     : '.project-slider__slide',\r\n\r\n        prevArrow : '.project-slider__arrow_dir_prev',\r\n        nextArrow : '.project-slider__arrow_dir_next',\r\n        dots      : true,\r\n\r\n        cssEase   : 'linear',\r\n        speed     : 250,\r\n        zIndex    : 1,\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the blog gallery block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// ---------------------------- BEGIN PUBLIC METHODS --------------------------\r\n/**\r\n * Initialize the blog gallery module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    $('.blog-gallery__container').slick({\r\n        rows       : 0,\r\n        slide      : '.blog-gallery__slide',\r\n\r\n        prevArrow  : '.blog-gallery__arrow_dir_prev',\r\n        nextArrow  : '.blog-gallery__arrow_dir_next',\r\n        dots       : false,\r\n\r\n        speed      : 250,\r\n        cssEase    : 'linear',\r\n        zIndex     : 1,\r\n\r\n        responsive : [{\r\n            breakpoint : 970,\r\n            settings   : {\r\n                dots : true\r\n            }\r\n        }]\r\n    });\r\n};\r\n// ----------------------------- END PUBLIC METHODS ---------------------------","/**\r\n * @file Implementation of the comment block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the comment module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    const $commentForm = $('#comment-form');\r\n    const $page        = $('.page');\r\n\r\n    $('.comment__reply-btn').click(function() {\r\n        const id = $(this).closest('.comment').data('id');\r\n    \r\n        $commentForm\r\n            .prependTo($(this)\r\n                .closest('.comment')\r\n                .find('.comment__replies')\r\n                .first());\r\n    \r\n        $page.trigger('comment-reply', id);\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the comment form block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the comment form module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    const $page = $('.page');\r\n\r\n    const $form    = $('.comment-form');\r\n    const $replyTo = $form.find('[name=\"reply-to\"]');\r\n\r\n    $form.validate({\r\n        errorClass  : 'error comment-form__error',\r\n    \r\n        highlight   : function(element) {\r\n            if ($(element).hasClass('input')) {\r\n                $(element).addClass('input_invalid');\r\n            } else if ($(element).hasClass('text-area')) {\r\n                $(element).addClass('text-area_invalid');\r\n            }\r\n        },\r\n    \r\n        unhighlight : function(element) {\r\n            if ($(element).hasClass('input')) {\r\n                $(element).removeClass('input_invalid');\r\n            } else if ($(element).hasClass('text-area')) {\r\n                $(element).removeClass('text-area_invalid');\r\n            }\r\n        },\r\n    });\r\n\r\n    $page.on('comment-reply', function(event, id) {      \r\n        $replyTo.val(id);\r\n\r\n        $('html, body').animate({\r\n            scrollTop: $form.offset().top - 100\r\n        }, 400, function() {\r\n            $('.input:first', $form).focus();\r\n        });\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * Implementation of the share block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport DropdownStrategy from '../../../js/utils/dropdown-strategy';\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n\r\n/**\r\n * Initialize the share block.\r\n * @return true\r\n */\r\nfunction initBlock() {\r\n    const $share = $('.share');\r\n    const $trigger = $('.share__trigger', $share);\r\n    const $drawer = $('.share__drawer', $share);\r\n\r\n    const share = new DropdownStrategy({\r\n        $root: $share,\r\n        $trigger,\r\n        $drawer,\r\n\r\n        onExpand() {\r\n            $drawer.addClass('share__drawer_expanded');\r\n        },\r\n        onCollapse() {\r\n            $drawer.removeClass('share__drawer_expanded');\r\n        }\r\n    });\r\n    share.activate();\r\n\r\n    return true;\r\n}\r\n\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n\r\nexport default {\r\n    initBlock,\r\n};\r\n","/**\r\n * @file Implementation of the product gallery block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\nlet $gallery, $slider, $links;\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// --------------------------- BEGIN EVENT HANDLERS ---------------------------\r\nconst onSliderBeforechange = function(event, slick, currentSlide, nextSlide) {\r\n    $links.each(function() {\r\n        const $link = $(this);\r\n        $link.toggleClass(\r\n            'product-gallery__thumb-link_active',\r\n            $link.attr('data-slide') == nextSlide\r\n        );\r\n    });\r\n};\r\n\r\nconst onLinkClick = function(event) {\r\n    event.preventDefault();\r\n    $slider.slick('slickGoTo', $(this).attr('data-slide'));\r\n};\r\n// ---------------------------- END EVENT HANDLERS ----------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the product gallery module.\r\n * @return true if the product gallery block is present, false otherwise\r\n */\r\nexport const initModule = function() {\r\n    $gallery = $('.product-gallery');\r\n    if ($gallery.length === 0) {\r\n        return false;\r\n    }\r\n\r\n    $links = $gallery.find('.product-gallery__thumb-link');\r\n\r\n    $slider = $gallery.find('.product-gallery__container');\r\n    $slider.slick({\r\n        rows      : 0,\r\n        slide      : '.product-gallery__slide',\r\n\r\n        arrows    : false,\r\n        dots      : false,\r\n\r\n        fade       : true,\r\n        speed      : 400,\r\n        zIndex     : 1,\r\n\r\n        responsive : [{\r\n            breakpoint : 768,\r\n            settings   : {\r\n                dots: true\r\n            }\r\n        }]\r\n    });\r\n\r\n    $slider.on('beforeChange', onSliderBeforechange);\r\n    $gallery.on('click', '.product-gallery__thumb-link', onLinkClick);\r\n\r\n    return false;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the checkout block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// ----------------------------- BEGIN DOM METHODS ----------------------------\r\nconst initSelect = function() {\r\n    $(this)\r\n        .select2({\r\n            theme                   : 'theme--checkout',\r\n            width                   : 'style',\r\n            minimumResultsForSearch : Infinity,\r\n        })\r\n        .data('select2')\r\n        .$container\r\n        .addClass('checkout__input');\r\n};\r\n// ------------------------------ END DOM METHODS -----------------------------\r\n\r\n// --------------------------- BEGIN EVENT HANDLERS ---------------------------\r\nconst onCheckboxChange = function() {\r\n    const $target = $('#' + $(this).data('toggle'));\r\n    $target.slideToggle();\r\n};\r\n// ---------------------------- END EVENT HANDLERS ----------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the checkout module.\r\n * @return true if the block is present; false otherwise\r\n */\r\nexport const initModule = function() {\r\n    const $form = $('.checkout');\r\n    if ($form.length === 0) {\r\n        return false;\r\n    }\r\n\r\n    const $selects  = $form.find('.checkout__select');\r\n    $selects.each(initSelect);\r\n\r\n    const $shipping = $form.find('#shipping-fields');\r\n    $shipping.hide();\r\n\r\n    const $checkboxes = $form.find('.checkout__check-input');\r\n    $checkboxes.change(onCheckboxChange);\r\n\r\n    $form.validate({\r\n        errorClass     : 'error checkout__error',\r\n    \r\n        ignore         : '.checkout__input:hidden',\r\n    \r\n        highlight: function(element) {\r\n            if ($(element).hasClass('input')) {\r\n                $(element).addClass('input_invalid');\r\n            }\r\n        },\r\n    \r\n        unhighlight    : function(element) {\r\n            if ($(element).hasClass('input')) {\r\n                $(element).removeClass('input_invalid');\r\n            }\r\n        },\r\n    \r\n        errorPlacement : function(error, element) {\r\n            if (element.attr('name') === 'payment') {\r\n                element\r\n                    .closest('.checkout__payments')\r\n                    .prepend(error);\r\n            } else {\r\n                error.insertAfter(element);\r\n            }\r\n        },\r\n    \r\n        // messages       : {\r\n        //     payment: 'Please select a payment method',\r\n        // },\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n\r\n// $('.checkout__toggle-input').change(function() {\r\n//     $('#' + $(this).data('target-id')).slideToggle();\r\n// });\r\n\r\n// $('.checkout__payment-item').click(function() {\r\n//     $('.checkout__payment-radio', $(this))\r\n//         .prop('checked', true)\r\n//         .change();\r\n// });\r\n\r\n// $('.checkout__payment-radio').change(function() {\r\n//     $(this)\r\n//         .closest('.checkout__payments')\r\n//         .find('.checkout__payment-item')\r\n//         .each(function() {\r\n//             const isChecked = $('.checkout__payment-radio', $(this))\r\n//                 .prop('checked');\r\n            \r\n//             if (isChecked) {\r\n//                 $('.checkout__payment-desc', $(this))\r\n//                     .slideDown();\r\n//             } else {\r\n//                 $('.checkout__payment-desc', $(this))\r\n//                     .slideUp();\r\n//             }\r\n//         });\r\n// });\r\n","/**\r\n * @file Implementation of the payment block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the payment module.\r\n * @return true if the block is present; false otherwise\r\n */\r\nexport const initModule = function() {\r\n    const $payment = $('.payment');\r\n    if ($payment.length === 0) {\r\n        return false;\r\n    }\r\n\r\n    const $radios = $payment.find('.payment__radio');\r\n    const $desc   = $payment.find('.payment__desc');\r\n    $radios.change(function onRadioChange() {\r\n        $desc.slideUp();\r\n\r\n        $(this)\r\n            .closest('.payment__method')\r\n            .find('.payment__desc')\r\n            .slideDown();\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the product block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\nconst RESPONSE_TIME = 1000;\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// -------------------------- BEGIN UTILITY FUNCTIONS -------------------------\r\nconst fakeRequest = function() {\r\n    const $d = $.Deferred();\r\n\r\n    // Mock a server request\r\n    setTimeout(function() {\r\n        $d.resolve();\r\n    }, RESPONSE_TIME);\r\n\r\n    return $d.promise();\r\n};\r\n// --------------------------- END UTILITY FUNCTIONS --------------------------\r\n\r\n// --------------------------- BEGIN EVENT HANDLERS ---------------------------\r\nconst onAddBtnClick = function() {\r\n    const $loader = $('<span></span>')\r\n        .addClass('loader loader_size_s product__add-loader')\r\n        .insertAfter($(this));\r\n\r\n    $(this).remove();\r\n\r\n    fakeRequest().then(function onItemAdded() {\r\n        $('<a></a>')\r\n            .attr('href', 'shop-cart.html')\r\n            .addClass('product__cart-link')\r\n            .text('Product added')\r\n            .insertAfter($loader)\r\n            .focus();\r\n\r\n        $loader.remove();\r\n    });\r\n};\r\n\r\nconst onProductFocusin = function() {\r\n    $(this).addClass('product_has-focus');\r\n};\r\n\r\nconst onProductFocusout = function() {\r\n    $(this).removeClass('product_has-focus');\r\n};\r\n// ---------------------------- END EVENT HANDLERS ----------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the shop filter module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    $('.product').each(function() {\r\n        const $product = $(this);\r\n        const $addBtn  = $product.find('.product__add-btn');\r\n\r\n        $addBtn.click(onAddBtnClick);\r\n\r\n        // Until all major browsers support the :focus-within CSS pseudo-class\r\n        // apply a class using JavaScript\r\n        $product\r\n            .focusin(onProductFocusin)\r\n            .focusout(onProductFocusout);\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the review form block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the review form module.\r\n * @return true if the block is present, false otherwise\r\n */\r\nexport const initModule = function() {\r\n    const $form = $('.review-form');\r\n    if ($form.length === 0) {\r\n        return false;\r\n    }\r\n\r\n    $form.validate({\r\n        errorClass     : 'error review-form__error',\r\n    \r\n        errorPlacement : function(error, element) {\r\n            element.closest('.review-form__field').append(error);\r\n        },\r\n    \r\n        highlight      : function(element) {\r\n            if ($(element).hasClass('input')) {\r\n                $(element).addClass('input_invalid');\r\n            } else if ($(element).hasClass('text-area')) {\r\n                $(element).addClass('text-area_invalid');\r\n            }\r\n        },\r\n    \r\n        unhighlight    : function(element) {\r\n            if ($(element).hasClass('input')) {\r\n                $(element).removeClass('input_invalid');\r\n            } else if ($(element).hasClass('text-area')) {\r\n                $(element).removeClass('text-area_invalid');\r\n            }\r\n        },\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the shipping calculator block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the shipping calculator module.\r\n * @return true if the block is present, false otherwise\r\n */\r\nexport const initModule = function() {\r\n    const $calc = $('.shipping-calc');\r\n    if ($calc.length === 0) {\r\n        return false;\r\n    }\r\n\r\n    const $toggle  = $calc.find('.shipping-calc__toggle');\r\n    const $form    = $calc.find('.shipping-calc__form');\r\n    const $country = $calc.find('.shipping-calc__country');\r\n\r\n    let formExpanded = false;\r\n    $toggle.click(function onShippingCalcToggle() {\r\n        formExpanded = !formExpanded;\r\n\r\n        $form.slideToggle();\r\n        $toggle.attr('aria-expanded', String(formExpanded));\r\n    });\r\n    \r\n    $country\r\n        .select2({\r\n            theme                   : 'theme--small',\r\n            width                   : 'style',\r\n            minimumResultsForSearch : Infinity,\r\n            placeholder             : 'Select a country',\r\n        })\r\n        .data('select2')\r\n        .$container\r\n        .addClass('shipping-calc__input');\r\n\r\n    $form.validate({\r\n        errorClass     : 'error shipping-calc__error',\r\n    \r\n        ignore         : [],\r\n\r\n        errorPlacement : function(error, element) {\r\n            if (element.hasClass('shipping-calc__country')) {\r\n                error.insertAfter(element.next('.shipping-calc__input'));\r\n            } else {\r\n                error.insertAfter(element);\r\n            }\r\n        },\r\n    \r\n        highlight      : function(element) {\r\n            if ($(element).hasClass('input')) {\r\n                $(element).addClass('input_invalid');\r\n            } else if ($(element).hasClass('shipping-calc__country')) {\r\n                $(element)\r\n                    .next('.shipping-calc__input')\r\n                    .addClass('select2-container--error');\r\n            }\r\n        },\r\n    \r\n        unhighlight     : function(element) {\r\n            if ($(element).hasClass('input')) {\r\n                $(element).removeClass('input_invalid');\r\n            } else if ($(element).hasClass('shipping-calc__country')) {\r\n                $(element)\r\n                    .next('.shipping-calc__input')\r\n                    .removeClass('select2-container--error');\r\n            }\r\n        }\r\n    });\r\n    \r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the shop filter block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport {makeDropdown} from '../../../js/utils';\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the shop filter module.\r\n * @return true if the filter block is present, false otherwise\r\n */\r\nexport const initModule = function() {\r\n    const $filter = $('.shop-filter');\r\n    if ($filter.length === 0) {\r\n        return false;\r\n    }\r\n\r\n    const $inner  = $filter.find('.shop-filter__inner');\r\n    const $toggle = $inner.find('.shop-filter__toggle');\r\n    const $list   = $inner.find('.shop-filter__list');\r\n\r\n    makeDropdown($inner, $toggle, {\r\n        hoverToggles : true,\r\n\r\n        onToggle     : function onShopFilterToggle(open) {\r\n            $list.toggleClass('shop-filter__list_visible', open);\r\n\r\n            if (open) {\r\n                $toggle.attr('aria-expanded', 'true');\r\n            } else {\r\n                $toggle.removeAttr('aria-expanded');\r\n            }\r\n        },\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the page block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport LazyLoader from '../../../js/utils/lazy-loader';\r\n\r\nimport Header from '../header/header';\r\n\r\nimport Nav from '../nav/nav';\r\nimport Tabs from '../tabs/tabs';\r\n\r\nimport AccordionSlider from '../../about/accordion-slider/accordion-slider';\r\nimport * as ContactForm from '../../contact/contact-form/contact-form';\r\nimport LocationMap from '../../contact/location-map/location-map';\r\nimport * as Gallery         from '../../common/gallery/gallery';\r\nimport Menu from '../../menu/menu/menu';\r\nimport * as ReservationForm from '../../reservation/reservation-form/reservation-form';\r\nimport Slider from '../../common/slider/slider';\r\nimport SpecialsSlider from '../../common/specials-slider/specials-slider';\r\n\r\nimport * as Portfolio       from '../../portfolio/portfolio/portfolio';\r\nimport * as ProjectSlider   from '../../portfolio/project-slider/project-slider';\r\n\r\nimport * as BlogGallery     from '../../blog/blog-gallery/blog-gallery';\r\nimport * as Comment         from '../../blog/comment/comment';\r\nimport * as CommentForm     from '../../blog/comment-form/comment-form';\r\nimport Share from '../../blog/share/share';\r\n\r\nimport * as Checkout        from '../../shop/checkout/checkout';\r\nimport * as Payment         from '../../shop/payment/payment';\r\nimport * as Product         from '../../shop/product/product';\r\nimport * as ProductGallery  from '../../shop/product-gallery/product-gallery';\r\nimport * as ReviewForm      from '../../shop/review-form/review-form';\r\nimport * as ShippingCalc    from '../../shop/shipping-calc/shipping-calc';\r\nimport * as ShopFilter      from '../../shop/shop-filter/shop-filter';\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\nconst RESIZE_INTERVAL       = 200;  // Resize debouncing interval\r\nconst SCROLL_INTERVAL       = 200;  // Scroll throttling interval\r\n\r\nlet resizeTimer = null;\r\nlet scrollTimer = null;\r\nlet wasScrolled = false;\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// --------------------------- BEGIN EVENT HANDLERS ---------------------------\r\n\r\n/**\r\n * Handle the window scroll event\r\n */\r\nfunction handleWindowScroll() {\r\n    LazyLoader.scanImages();\r\n    Header.handleScroll();\r\n}\r\n\r\n/**\r\n * Handle the window resize event\r\n */\r\nfunction handleWindowResize() {\r\n    Nav.handleResize();\r\n    AccordionSlider.handleResize();\r\n    Portfolio.handleResize();\r\n    Tabs.handleResize();\r\n}\r\n\r\n/**\r\n * Debounce the window resize event\r\n */\r\nfunction debounceWindowResize() {\r\n    clearTimeout(resizeTimer);\r\n    resizeTimer = setTimeout(handleWindowResize, RESIZE_INTERVAL);\r\n}\r\n\r\n/**\r\n * Throttle the window scroll event\r\n */\r\nfunction throttleWindowScroll() {\r\n    if (scrollTimer) {\r\n        // Ensure that we catch and execute that last invocation.\r\n        wasScrolled = true;\r\n        return;\r\n    }\r\n\r\n    handleWindowScroll();\r\n\r\n    scrollTimer = this.setTimeout(function() {\r\n        scrollTimer = null;\r\n        if (wasScrolled) {\r\n            handleWindowScroll();\r\n            wasScrolled = false;\r\n        }\r\n    }, SCROLL_INTERVAL);\r\n}\r\n\r\n// ---------------------------- END EVENT HANDLERS ----------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n\r\n/**\r\n * Initialize the page block.\r\n * @return true\r\n */\r\nfunction initBlock() {\r\n    $(window).on({\r\n        resize: debounceWindowResize,\r\n        scroll: throttleWindowScroll,\r\n    });\r\n\r\n    // Lazy image loader\r\n    LazyLoader.init();\r\n\r\n    // Common blocks\r\n    Header.initBlock();\r\n    Nav.initBlock();\r\n\r\n    // Inner page blocks\r\n    AccordionSlider.initAll();\r\n    ContactForm.initModule();\r\n    LocationMap.initAll();\r\n    Gallery.initModule();\r\n    Menu.initAll();\r\n    ReservationForm.initModule();\r\n    Slider.initAll();\r\n    SpecialsSlider.initAll();\r\n    Tabs.initAll();\r\n\r\n    // Portfolio blocks\r\n    Portfolio.initModule();\r\n    ProjectSlider.initModule();\r\n\r\n    // Blog blocks\r\n    BlogGallery.initModule();\r\n    Comment.initModule();\r\n    CommentForm.initModule();\r\n    Share.initBlock();\r\n\r\n    // Shop blocks\r\n    Checkout.initModule();\r\n    Payment.initModule();\r\n    Product.initModule();\r\n    ProductGallery.initModule();\r\n    ReviewForm.initModule();\r\n    ShippingCalc.initModule();\r\n    ShopFilter.initModule();\r\n\r\n    // Process the initial window size and scroll position\r\n    handleWindowResize();\r\n    handleWindowScroll();\r\n\r\n    return true;\r\n}\r\n\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n\r\nexport default {\r\n    initBlock,\r\n};\r\n","import Page from '../blocks/common/page/page';\r\n\r\n// The page block is responsible for initialization of all other blocks\r\nPage.initBlock();\r\n"],"sourceRoot":""}
{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/blocks/common/select/select.js","webpack:///./src/blocks/blog/comment-form/comment-form.js","webpack:///./src/blocks/portfolio/project-carousel/project-carousel.js","webpack:///./src/blocks/shop/payments/payments.js","webpack:///./src/blocks/shop/product-list/product-list.js","webpack:///./src/blocks/shop/review-form/review-form.js","webpack:///./src/js/util/focus.js","webpack:///./src/js/util/index.js","webpack:///./src/js/util/lazy-loader.js","webpack:///./src/blocks/common/gallery/gallery.js","webpack:///./src/blocks/common/search/search.js","webpack:///./src/blocks/common/header/header.js","webpack:///./src/js/util/dropdown-strategy.js","webpack:///./src/blocks/common/mini-cart/mini-cart.js","webpack:///./src/js/util/drilldown-strategy.js","webpack:///./src/blocks/common/nav/nav.js","webpack:///./src/blocks/common/slider/slider.js","webpack:///./src/blocks/common/specials-slider/specials-slider.js","webpack:///./src/blocks/common/tabs/tabs.js","webpack:///./src/blocks/about/accordion-gallery/accordion-gallery.js","webpack:///./src/blocks/blog/post-gallery/post-gallery.js","webpack:///./src/blocks/blog/share/share.js","webpack:///./src/blocks/blog/video/video.js","webpack:///./src/blocks/contact/contact-form/contact-form.js","webpack:///./src/blocks/contact/location-map/location-map.js","webpack:///./src/blocks/menu/menu/menu.js","webpack:///./src/blocks/portfolio/portfolio-filter/portfolio-filter.js","webpack:///./src/blocks/portfolio/portfolio-grid/portfolio-grid.js","webpack:///./src/blocks/portfolio/portfolio/portfolio.js","webpack:///./src/blocks/shop/checkout/checkout.js","webpack:///./src/blocks/shop/product-gallery/product-gallery.js","webpack:///./src/blocks/shop/shipping-calc/shipping-calc.js","webpack:///./src/blocks/shop/shop-filter/shop-filter.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","BLOCK","SELECTORS","OPTION","CLASSES","ORIGIN","BUTTON","LIST","LIST_EXPANDED","OPTION_HIGHLIGHTED","ERROR","KEYS","THEMES","Select","$origin","theme","id","attr","labelledBy","themeClass","$root","$","addClass","before","detach","append","removeClass","removeAttr","$button","type","appendTo","$list","tabindex","role","this","elements","state","expanded","selectedIndex","highlightedIndex","searchString","popper","Popper","placement","update","handleOptionClick","handleButtonClick","handleOutsideClick","handleListKeyDown","handleKeyPress","handleOptionMouseOver","keypress","keydown","on","mouseover","click","$options","offsetTop","eq","position","top","offsetBottom","outerHeight","scrollTop","listHeight","innerHeight","scrollToHighlighted","str","length","text","startsWith","nextIndex","findOption","_findOption","selectOption","highlightOption","e","search","String","fromCharCode","which","$highlightedOption","currentTarget","newIndex","index","$selectedOption","collapse","focus","expand","contains","target","val","data","change","empty","prop","each","$originalOption","optionId","$option","document","off","error","toggleClass","getInvalidClassName","$element","hasClass","validate","errorClass","highlight","element","unhighlight","CONTAINER","SLIDE","ARROW_PREV","ARROW_NEXT","slick","rows","slide","prevArrow","nextArrow","dots","cssEase","speed","zIndex","RADIO","DESC","METHOD","$payments","$radios","$desc","slideUp","closest","find","slideDown","initBlock","PRODUCT","focusin","focusout","$form","FIELD","errorPlacement","$error","handleKeyDown","handleMouseDown","$activeElement","is","forceReflow","$el","offsetHeight","getEmSize","$elem","css","match","debounce","cb","interval","timer","clearTimeout","setTimeout","throttle","called","$images","scanImages","filter","windowBottom","$img","window","height","offset","parent","siblings","$source","loadImage","THUMB_LINK","Gallery","magnificPopup","delegate","mainClass","gallery","enabled","tCounter","closeMarkup","arrowMarkup","callbacks","beforeOpen","wrap","popupFocusTrap","$search","$close","CLOSE","BLOCK_VISIBLE","show","activate","hide","deactivate","focusTrap","clickOutsideDeactivates","escapeDeactivates","onDeactivate","SEARCH_TOGGLE","BLOCK_TRANSPARENT","BLOCK_HIDDEN","BLOCK_ANIMATED","BLOCK_SCROLL","HEADER_STATES","isTransparent","headerState","updateHeaderStyles","currentOffsetEm","newState","$header","$searchToggle","showSearch","scroll","$minicart","$trigger","$drawer","$document","Keys","DropdownStrategy","onCollapse","onExpand","_elements","_isExpanded","_handlers","collapseHandler","expandHandler","handleToggleClick","handleToggleKeyDown","handleToggleKeyUp","handleMouseLeave","handleMouseEnter","event","toggle","preventDefault","mouseenter","mouseleave","keyup","TRIGGER","DRAWER","DRAWER_EXPANDED","drilldownChain","activeDrilldown","DrilldownStrategy","$initialFocus","handleTriggerClick","handleTrapDeactivate","_focusTrap","initialFocus","handleDocumentClick","prevDrilldown","pop","unpause","pause","push","mobileMenu","$nav","$menuToggle","$menu","$scrollpane","TOGGLE","MENU","SUBMENU","ITEM","LINK","INTERNAL_LINK","LINK_BACK","SCROLLPANE","PAGE","MENU_VISIBLE","SUBMENU_VISIBLE","PAGE_MENU_EXPANDED","HAMBURGER_OPEN","submenus","isDesktop","NavSubmenu","$parentLink","prev","$parentItem","first","$backLink","$firstLink","not","drilldownStrategy","dropdownStrategy","handleInternalLinkClick","targetId","$targetElem","forEach","submenu","animate","Math","max","handleWindowResize","screenWidth","outerWidth","map","toArray","resize","SLIDE_ACTIVE","Slider","$container","$prevArrow","$nextArrow","fade","autoplay","autoplaySpeed","pauseOnFocus","pauseOnHover","handleSlickBeforeChange","current","next","$slides","SLIDES","SLIDE_INNER","PREV_ARROW","NEXT_ARROW","SLIDE_MOVING","SpecialsSlider","isTransitioning","activeIndex","config","dOffset","dOpacity","dScale","prevSlide","nextSlide","updateStyles","$slide","order","transform","opacity","total","applySlideStyles","$prevSlide","$movingSlide","SELECTOR","TABLIST","TABS","PANELS","PANEL_ACTIVE","PANEL_HIDDEN","isMobile","tabs","Tabs","$tabs","$panels","$tab","orientation","handleTabClick","handleTabKeyDown","tab","setOrientation","tabIndex","showTab","nextFocus","$prevTab","$prevPanel","$nextTab","$nextPanel","handleResize","THUMB","IMAGE","allGalleries","AccordionGallery","$thumbs","collapsedThumbWidth","collapsedThumbHeight","isVertical","handleThumbActivate","handleThumbDeactivate","screenWidthEms","setVertical","$thumb","$image","width","vertical","PostGallery","pageEmSize","responsive","breakpoint","settings","$share","PLACEHOLDER","FRAME","Video","$placeholder","load","url","format","$frame","src","frameborder","allowfullscreen","replaceAll","ContactForm","markerIcon","L","icon","iconUrl","iconSize","iconAnchor","LocationMap","latlng","zoom","scrollWheelZoom","setView","tileLayer","attribution","subdomains","maxZoom","addTo","marker","handleMapFocus","handleMapBlur","enable","disable","PRODUCT_LINK","Menu","INNER","LIST_VISIBLE","isDropdown","isExpanded","collapseList","$toggle","onChange","$inner","setDropdownMode","dropdown","IMG","SOURCE_WEBP","SOURCE_JPEG","CATS","SIZER","CAT_LINK","OVERLAY","ITEM_INNER","TITLE","CAT_ITEM","OVERLAY_FOCUS","itemHtml","shuffleInstance","createPortfolioItem","$item","categories","join","title","link","images","jpeg","small","alt","webp","medium","large","cat","toLowerCase","$d","Deferred","resolve","promise","$portfolio","GRID","MORE","LOADER","MORE_HIDDEN","activeFilter","fakeItems","handleFilterChange","sel","PortfolioFilter","PortfolioGrid","handleMoreBtnClick","$grid","$moreBtn","$loader","insertAfter","items","more","then","when","$sizer","add","fail","always","remove","onCatLinkClick","Shuffle","itemSelector","sizer","SELECT","CHECKBOX","INPUT_HIDDEN","PAYMENTS","handleCheckboxChange","slideToggle","ignore","prepend","messages","payment","NAV","$gallery","arrows","asNavFor","focusOnSelect","slidesToShow","slidesToScroll","verticalSwiping","FORM","COUNTRY","FORM_ANIMATED","FORM_EXPANDED","INPUT","INPUT_INVALID","$calc","$country","formExpanded","targetHeight","startHeight","countrySelect","rules","calc_shipping_country","required","setError","$filter","mousedown","addEventListener"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 16);\n","/**\r\n * @file Implementation of the select block\r\n * @author Andrey Glotov\r\n */\r\n\r\n/* global Popper */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\n// Block name\r\nconst BLOCK = 'select';\r\n\r\n// Element selectors\r\nconst SELECTORS = {\r\n    OPTION: `.${BLOCK}__option`,\r\n};\r\n\r\n// Element class names\r\nconst CLASSES = {\r\n    ORIGIN: `${BLOCK}__origin`,\r\n    BUTTON: `${BLOCK}__button`,\r\n    LIST: `${BLOCK}__list`,\r\n    LIST_EXPANDED: `${BLOCK}__list_expanded`,\r\n    OPTION: `${BLOCK}__option`,\r\n    OPTION_HIGHLIGHTED: `${BLOCK}__option_highlighted`,\r\n    ERROR: `${BLOCK}_error`,\r\n};\r\n\r\n// Key codes\r\nconst KEYS = {\r\n    TAB: 9,\r\n    ENTER: 13,\r\n    ESC: 27,\r\n    SPACE: 32,\r\n    END: 35,\r\n    HOME: 36,\r\n    UP: 38,\r\n    DOWN: 40,\r\n};\r\n\r\n// Select block theme modifiers\r\nconst THEMES = {\r\n    'default': `${BLOCK}_theme_default`,\r\n    'small': `${BLOCK}_theme_small`,\r\n    'checkout': `${BLOCK}_theme_checkout`,\r\n};\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// -------------------------- BEGIN CLASS DEFINITION -------------------------- \r\n\r\n/**\r\n * Collapsible dropdown select box\r\n */\r\nclass Select {\r\n  \r\n    /**\r\n     * Create a select\r\n     * \r\n     * @param {JQuery} $origin The original <select> element to replace\r\n     */\r\n    constructor($origin, { theme = 'default' } = {}) {\r\n        const id = $origin.attr('id');\r\n        const labelledBy = $origin.attr('aria-labelledby');\r\n        \r\n        const themeClass = (theme && (theme in THEMES))\r\n            ? THEMES[theme]\r\n            : THEMES['default'];\r\n\r\n        // Create the root node\r\n        const $root = $('<div>').addClass(`${BLOCK} ${themeClass}`);\r\n\r\n        // Wrap original <select> into the root node and then hide\r\n        $origin.before($root).detach();\r\n        $root\r\n            .append($origin)\r\n            .addClass($origin.attr('class'));\r\n        $origin\r\n            .attr('tabindex', -1)\r\n            .removeClass()\r\n            .addClass(CLASSES.ORIGIN)\r\n            .removeAttr('id');\r\n\r\n        // Create the button\r\n        const $button = $('<button></button>', {\r\n            id,\r\n            type: 'button',\r\n            'aria-haspopup': 'listbox',\r\n            'aria-labelledby': labelledBy,\r\n            'aria-expanded': 'false',\r\n        }).addClass(CLASSES.BUTTON).appendTo($root);\r\n        \r\n        // Create the options list\r\n        const $list = $('<ul></ul>', {\r\n            tabindex: -1,\r\n            role: 'listbox',\r\n            'aria-labelledby': labelledBy,\r\n            'aria-orientation': 'horizontal',\r\n        }).addClass(CLASSES.LIST).appendTo($root);\r\n\r\n        this.elements = {\r\n            $root,\r\n            $origin,\r\n            $button,\r\n            $list,\r\n        };\r\n        \r\n        this.state = {\r\n            expanded: false,\r\n            selectedIndex: -1,\r\n            highlightedIndex: -1,\r\n            searchString: '',\r\n\r\n            popper: new Popper($button.get(0), $list.get(0), {\r\n                placement: 'bottom-start'\r\n            }),\r\n        };\r\n\r\n        this.update();\r\n        \r\n        this.handleOptionClick = this.handleOptionClick.bind(this);\r\n        this.handleButtonClick = this.handleButtonClick.bind(this);\r\n        this.handleOutsideClick = this.handleOutsideClick.bind(this);\r\n        this.handleListKeyDown = this.handleListKeyDown.bind(this);\r\n        this.handleKeyPress = this.handleKeyPress.bind(this);\r\n        this.handleOptionMouseOver = this.handleOptionMouseOver.bind(this);\r\n\r\n        $root.keypress(this.handleKeyPress);\r\n        $list.keydown(this.handleListKeyDown);\r\n        $list.on({\r\n            mouseover: this.handleOptionMouseOver,\r\n            click: this.handleOptionClick\r\n        }, SELECTORS.OPTION);\r\n        $button.click(this.handleButtonClick);\r\n    }\r\n\r\n    // ------------------------- BEGIN PRIVATE METHODS ------------------------\r\n\r\n    /**\r\n     * Update the list scroll position to show the highlighted option.\r\n     */\r\n    scrollToHighlighted() {\r\n        const { $list, $options } = this.elements;\r\n        const { highlightedIndex } = this.state;\r\n\r\n        if  (highlightedIndex !== -1) {\r\n            const offsetTop = $options.eq(highlightedIndex).position().top;\r\n            const offsetBottom = offsetTop + \r\n                $options.eq(highlightedIndex).outerHeight();\r\n            const scrollTop = $list.scrollTop();\r\n            const listHeight = $list.innerHeight();\r\n\r\n            if (offsetTop < 0) {\r\n                $list.scrollTop(scrollTop + offsetTop);\r\n            } else if (offsetBottom > listHeight) {\r\n                $list.scrollTop(scrollTop + (offsetBottom - listHeight));\r\n            }\r\n        }\r\n    }\r\n  \r\n    /**\r\n     * Highlight the specified option\r\n     * \r\n     * @param {number} i Index of the option to highlight\r\n     */\r\n    highlightOption(i) {\r\n        const { $options } = this.elements;\r\n        const { highlightedIndex } = this.state;\r\n        \r\n        if (highlightedIndex === i) {\r\n            return;\r\n        }\r\n        \r\n        $options.eq(highlightedIndex)\r\n            .removeClass(CLASSES.OPTION_HIGHLIGHTED);\r\n        \r\n        $options.eq(i).addClass(CLASSES.OPTION_HIGHLIGHTED);\r\n        \r\n        this.state.highlightedIndex = i;\r\n        \r\n        this.scrollToHighlighted();\r\n    }\r\n\r\n    /**\r\n     * Search the next option starting with the given substring\r\n     * \r\n     * @param {string} str The search string\r\n     */\r\n    findOption(str) {\r\n        const { selectedIndex } = this.state;\r\n        const { $options } = this.elements;\r\n\r\n        if (selectedIndex === -1) {\r\n            for (let i = 0; i < $options.length; i++) {\r\n                if ($($options[i]).text().startsWith(str)) {\r\n                    return i;\r\n                }\r\n            }\r\n        } else {\r\n            for (let i = selectedIndex; i < $options.length; i++) {\r\n                if ($($options[i]).text().startsWith(str)) {\r\n                    return i;\r\n                }\r\n            }\r\n\r\n            for (let i = 0; (i < selectedIndex) && (i < $options.length); i++) {\r\n                if ($($options[i]).text().startsWith(str)) {\r\n                    return i;\r\n                }\r\n            }\r\n        }\r\n\r\n        return -1;\r\n    }\r\n\r\n    /**\r\n     * Search options\r\n     * \r\n     * @param {string} c The next character to search\r\n     */\r\n    search(c) {\r\n        const { searchString, expanded } = this.state;\r\n        let nextIndex = null;\r\n\r\n        if (~(nextIndex = this.findOption(searchString + c))) {\r\n            this.state.searchString += c;\r\n        } else if (~(nextIndex = this._findOption(c))) {\r\n            this.state.searchString = c;\r\n        } else {\r\n            this.state.searchString = '';\r\n            return;\r\n        }\r\n\r\n        this.selectOption(nextIndex);\r\n        if (expanded) {\r\n            this.highlightOption(nextIndex);\r\n        }\r\n    }\r\n\r\n    // -------------------------- END PRIVATE METHODS -------------------------\r\n\r\n    // -------------------------- BEGIN EVENT HANDLERS ------------------------\r\n\r\n    /**\r\n     * Handle the keypress event\r\n     * \r\n     * @param {JQuery} e The dispatched event\r\n     */\r\n    handleKeyPress(e) {\r\n        this.search(String.fromCharCode(e.which));\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Handle the option mouseover event\r\n     * \r\n     * @param {jQuery.Event} e The event object\r\n     */\r\n    handleOptionMouseOver(e) {\r\n        const { $options } = this.elements;\r\n        \r\n        const $highlightedOption = $(e.currentTarget);\r\n        \r\n        const newIndex = $options.index($highlightedOption);\r\n        if (newIndex === -1) {\r\n            return;\r\n        }\r\n        \r\n        const { highlightedIndex } = this.state;\r\n        \r\n        $options.eq(highlightedIndex)\r\n            .removeClass(CLASSES.OPTION_HIGHLIGHTED);\r\n\r\n        $options.eq(newIndex).addClass(CLASSES.OPTION_HIGHLIGHTED);\r\n        \r\n        this.state.highlightedIndex = newIndex;\r\n    }\r\n  \r\n    /**\r\n     * Handle the option click event\r\n     * \r\n     * @param {jQuery.Event} e The event object\r\n     */\r\n    handleOptionClick(e) {\r\n        const { $options, $button } = this.elements;\r\n        \r\n        const $selectedOption = $(e.currentTarget);\r\n        const newIndex = $options.index($selectedOption);\r\n        \r\n        this.selectOption(newIndex);\r\n\r\n        this.collapse();\r\n        $button.focus();\r\n    }\r\n  \r\n    /**\r\n     * Handle the button click event\r\n     * \r\n     * @param {jQuery.Event} e The event object\r\n     */\r\n    handleButtonClick() {\r\n        if (!this.state.expanded) {\r\n            this.expand();\r\n        } else {\r\n            this.collapse();\r\n        }\r\n    }\r\n  \r\n    /**\r\n     * Handle the click event outside expanded option list\r\n     * \r\n     * @param {jQuery.Event} e The event object\r\n     */\r\n    handleOutsideClick(e) {\r\n        const { $root } = this.elements;\r\n\r\n        if (!$.contains($root.get(0), e.target)) {\r\n            this.collapse();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Handle the options list keydown event\r\n     * \r\n     * @param {jQuery.Event} e The event object\r\n     */\r\n    handleListKeyDown(e) {\r\n        const { which } = e;\r\n        const { $button, $options } = this.elements;\r\n        const { highlightedIndex } = this.state;\r\n\r\n        switch (which) {\r\n        case KEYS.TAB:\r\n            this.collapse();\r\n            break;\r\n            \r\n        case KEYS.ENTER:\r\n            this.selectOption(highlightedIndex);\r\n            this.collapse();\r\n            $button.focus();\r\n            return false;\r\n            \r\n        case KEYS.ESC:\r\n            this.collapse();\r\n            $button.focus();\r\n            return false;\r\n            \r\n        case KEYS.UP:\r\n            if (highlightedIndex > 0) {\r\n                this.highlightOption(highlightedIndex - 1);\r\n                this.selectOption(highlightedIndex - 1);\r\n            }\r\n            return false;\r\n            \r\n        case KEYS.DOWN:\r\n            if (highlightedIndex < $options.length - 1) {\r\n                this.highlightOption(highlightedIndex + 1);\r\n                this.selectOption(highlightedIndex + 1);\r\n            }\r\n            return false;\r\n            \r\n        case KEYS.HOME:\r\n            this.highlightOption(0);\r\n            this.selectOption(0);\r\n            return false;\r\n            \r\n        case KEYS.END:\r\n            this.highlightOption($options.length - 1);\r\n            this.selectOption($options.length - 1);\r\n            return false;\r\n        }\r\n    }\r\n\r\n    // --------------------------- END EVENT HANDLERS -------------------------\r\n\r\n    // -------------------------- BEGIN PUBLIC METHODS ------------------------\r\n\r\n    /**\r\n     * Select the given option\r\n     * \r\n     * @param {number} i Index of the option to be selected\r\n     */\r\n    selectOption(i) {\r\n        const { $origin, $options, $list, $button } = this.elements;\r\n        const { selectedIndex } = this.state;\r\n        \r\n        if ((i < 0) || (i > $options.length) || (i === selectedIndex)) {\r\n            return;\r\n        }\r\n        \r\n        $options.eq(selectedIndex).removeAttr('aria-selected');\r\n        \r\n        $options.eq(i).attr('aria-selected', 'true');\r\n        $list.attr('aria-activedescendant', $options.eq(i).attr('id'));\r\n        $button.text($options.eq(i).text());\r\n        $origin.val($options.eq(i).data('value')).change();\r\n        \r\n        this.state.selectedIndex = i;\r\n    }\r\n\r\n    /**\r\n     * Update options list.\r\n     * Call this method after you added/removed options manually.\r\n     */\r\n    update() {\r\n        const { $button, $origin, $list } = this.elements;\r\n\r\n        $list.empty();\r\n\r\n        const selectedIndex = $origin.prop('selectedIndex');\r\n        \r\n        $('option', $origin).each(function(i) {\r\n            const $originalOption = $(this);\r\n\r\n            const optionId = $originalOption.attr('id');\r\n\r\n            const $option = $('<li></li>', {\r\n                id: optionId,\r\n                role: 'option',\r\n            })\r\n                .text($originalOption.text())\r\n                .data('value', $originalOption.val())\r\n                .addClass(CLASSES.OPTION);\r\n\r\n            if (selectedIndex === i) {\r\n                $option.attr('aria-selected', 'true');\r\n                $list.attr('aria-activedescendant', optionId);\r\n                $button.text($originalOption.text());\r\n            }\r\n\r\n            $option.appendTo($list);\r\n\r\n            return $option;\r\n        });\r\n\r\n        this.elements.$options = $('li', $list);\r\n        \r\n        this.state.selectedIndex = selectedIndex;\r\n        this.state.popper.update();\r\n    }\r\n  \r\n    /**\r\n     * Collapse the options list.\r\n     */\r\n    collapse() {\r\n        const { $button, $list, $options } = this.elements;\r\n        const { highlightedIndex, expanded } = this.state;\r\n        \r\n        if (!expanded) {\r\n            return;\r\n        }\r\n\r\n        $list.removeClass(CLASSES.LIST_EXPANDED);\r\n        $button.attr('aria-expanded', 'false');\r\n        \r\n        if (highlightedIndex !== -1) {\r\n            $options.eq(highlightedIndex)\r\n                .removeClass(CLASSES.OPTION_HIGHLIGHTED);\r\n            this.state.highlightedIndex = -1;\r\n        }\r\n        \r\n        this.state.expanded = false;\r\n        \r\n        $(document).off('click', this.handleOutsideClick);\r\n    }\r\n  \r\n    /**\r\n     * Expand the options list.\r\n     */\r\n    expand() {\r\n        const { $button, $list, $options } = this.elements;\r\n        const { selectedIndex, expanded } = this.state;\r\n        \r\n        if (expanded) {\r\n            return;\r\n        }\r\n\r\n        $list.addClass(CLASSES.LIST_EXPANDED);\r\n\r\n        $button.attr('aria-expanded', 'true');\r\n        $list.scrollTop(0);\r\n\r\n        if (selectedIndex !== -1) {\r\n            $options.eq(selectedIndex).addClass(CLASSES.OPTION_HIGHLIGHTED);\r\n            this.state.highlightedIndex = selectedIndex;\r\n        }\r\n        \r\n        this.scrollToHighlighted();\r\n        \r\n        this.state.expanded = true;\r\n        \r\n        this.state.popper.update();\r\n        $list.focus();\r\n\r\n        $(document).on('click', this.handleOutsideClick);\r\n    }\r\n\r\n    /**\r\n     * Set the invalid modifier.\r\n     * \r\n     * @param {boolean} error true if the select's value is invalid\r\n     */\r\n    setError(error) {\r\n        this.elements.$root.toggleClass(CLASSES.ERROR, error);\r\n    }\r\n\r\n    // --------------------------- END PUBLIC METHODS -------------------------\r\n}\r\n\r\n// --------------------------- END CLASS DEFINITION --------------------------- \r\n\r\nexport default Select;\r\n","/**\r\n * @file Implementation of the comment form block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\n// Block name\r\nconst BLOCK = 'comment-form';\r\n\r\n// Element selectors\r\nconst SELECTORS = {\r\n    BLOCK: `.${BLOCK}`,\r\n};\r\n\r\n// Element class names\r\nconst CLASSES = {\r\n    ERROR: 'error form__error',\r\n    INPUT: 'input',\r\n    INPUT_INVALID: 'input_invalid',\r\n    TEXTAREA: 'text-area',\r\n    TEXTAREA_INVALID: 'text-area_invalid',\r\n};\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// ------------------------- BEGIN UTILITY FUNCTIONS --------------------------\r\n\r\n/**\r\n * Given the input element, get a classname containing the invalid modifier\r\n * \r\n * @param {JQuery} $element The input element to be highlighted as invalid\r\n */\r\nfunction getInvalidClassName($element) {\r\n    if ($element.hasClass(CLASSES.INPUT)) {\r\n        return CLASSES.INPUT_INVALID;\r\n    } else if ($element.hasClass(CLASSES.TEXTAREA)) {\r\n        return CLASSES.TEXTAREA_INVALID;\r\n    }\r\n}\r\n\r\n// -------------------------- END UTILITY FUNCTIONS ---------------------------\r\n\r\n$(SELECTORS.BLOCK).validate({\r\n    errorClass: CLASSES.ERROR,\r\n\r\n    highlight(element) {\r\n        $(element).addClass(getInvalidClassName($(element)));\r\n    },\r\n\r\n    unhighlight(element) {\r\n        $(element).removeClass(getInvalidClassName($(element)));\r\n    },\r\n});\r\n","/**\r\n * @file Implementation of the project carousel block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\n// Block name\r\nconst BLOCK = 'project-carousel';\r\n\r\n// Element selectors\r\nconst SELECTORS = {\r\n    BLOCK: `.${BLOCK}`,\r\n    CONTAINER: `.${BLOCK}__container`,\r\n    SLIDE: `.${BLOCK}__slide`,\r\n    ARROW_PREV: `.${BLOCK}__arrow_dir_prev`,\r\n    ARROW_NEXT: `.${BLOCK}__arrow_dir_next`,\r\n};\r\n\r\n// Animation speed\r\nconst SLIDE_SPEED = 250;\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// Initialize the project carousel block\r\n$(SELECTORS.CONTAINER).slick({\r\n    rows: 0,\r\n    slide: SELECTORS.SLIDE,\r\n\r\n    prevArrow: SELECTORS.ARROW_PREV,\r\n    nextArrow: SELECTORS.ARROW_NEXT,\r\n    dots: true,\r\n\r\n    cssEase: 'linear',\r\n    speed: SLIDE_SPEED,\r\n    zIndex: 1,\r\n});\r\n","/**\r\n * @file Implementation of the checkout payments block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\n// Block name\r\nconst BLOCK = 'payments';\r\n\r\n// Element selectors\r\nconst SELECTORS = {\r\n    BLOCK: `.${BLOCK}`,\r\n    RADIO: `.${BLOCK}__radio`,\r\n    DESC: `.${BLOCK}__desc`,\r\n    METHOD: `.${BLOCK}__method`,\r\n};\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// --------------------------- BEGIN PRIVATE METHODS --------------------------\r\n\r\n/**\r\n * Initialize the payments block.\r\n */\r\nfunction initBlock() {\r\n    const $payments = $(SELECTORS.BLOCK);\r\n    if ($payments.length == 0) {\r\n        return;\r\n    }\r\n\r\n    const $radios = $(SELECTORS.RADIO, $payments);\r\n    const $desc   = $(SELECTORS.DESC, $payments);\r\n    $radios.change(function handleRadioChange() {\r\n        $desc.slideUp();\r\n\r\n        $(this)\r\n            .closest(SELECTORS.METHOD)\r\n            .find(SELECTORS.DESC)\r\n            .slideDown();\r\n    });\r\n}\r\n\r\n// ---------------------------- END PRIVATE METHODS ---------------------------\r\n\r\ninitBlock();","/**\r\n * @file Implementation of the product list block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\n// Block name\r\nconst BLOCK = 'product-list';\r\n\r\n// Element selectors\r\nconst SELECTORS = {\r\n    BLOCK: `.${BLOCK}`,\r\n    PRODUCT: '.product',\r\n};\r\n\r\n// Element class names\r\nconst CLASSES = {\r\n    PRODUCT_FOCUS: 'product_has-focus',\r\n};\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n\r\n/**\r\n * Initialize the product list block.\r\n */\r\nfunction initBlock() {\r\n    const $root = $(SELECTORS.BLOCK);\r\n    if ($root.length === 0) {\r\n        return;\r\n    }\r\n\r\n    // Until all major browsers support the :focus-within CSS pseudo-class\r\n    // apply a focus class using JavaScript\r\n    $root.on({\r\n        focusin: function handleProductFocusin() {\r\n            $(this).addClass(CLASSES.PRODUCT_FOCUS);\r\n        },\r\n        focusout: function handleProductFocusout() {\r\n            $(this).removeClass(CLASSES.PRODUCT_FOCUS);\r\n        },\r\n    }, SELECTORS.PRODUCT);\r\n}\r\n\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n\r\ninitBlock();\r\n","/**\r\n * @file Implementation of the review form block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\n// Block name\r\nconst BLOCK = 'review-form';\r\n\r\n// Element selectors\r\nconst SELECTORS = {\r\n    BLOCK: `.${BLOCK}`,\r\n    FIELD: '.form__field',\r\n};\r\n\r\n// Element class names\r\nconst CLASSES = {\r\n    ERROR: 'error form__error',\r\n    INPUT: 'input',\r\n    INPUT_INVALID: 'input_invalid',\r\n    TEXTAREA: 'text-area',\r\n    TEXTAREA_INVALID: 'text-area_invalid',\r\n};\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// ------------------------- BEGIN UTILITY FUNCTIONS --------------------------\r\n\r\n/**\r\n * Given the input element, get a classname containing the invalid modifier\r\n * \r\n * @param {JQuery} $element The input element\r\n */\r\nfunction getInvalidClassName($element) {\r\n    if ($element.hasClass(CLASSES.INPUT)) {\r\n        return CLASSES.INPUT_INVALID;\r\n    } else if ($element.hasClass(CLASSES.TEXTAREA)) {\r\n        return CLASSES.TEXTAREA_INVALID;\r\n    }\r\n}\r\n\r\n// -------------------------- END UTILITY FUNCTIONS ---------------------------\r\n\r\n// --------------------------- BEGIN PRIVATE METHODS --------------------------\r\n\r\n/**\r\n * Initialize the review form block.\r\n */\r\nfunction initBlock() {\r\n    const $form = $(SELECTORS.BLOCK);\r\n    if ($form.length == 0) {\r\n        return;\r\n    }\r\n\r\n    $form.validate({\r\n        errorClass: CLASSES.ERROR,\r\n    \r\n        errorPlacement: function($error, $element) {\r\n            $element.closest(SELECTORS.FIELD).append($error);\r\n        },\r\n    \r\n        highlight(element) {\r\n            $(element).addClass(getInvalidClassName($(element)));\r\n        },\r\n    \r\n        unhighlight(element) {\r\n            $(element).removeClass(getInvalidClassName($(element)));\r\n        },\r\n    });\r\n}\r\n\r\n// ---------------------------- END PRIVATE METHODS ---------------------------\r\n\r\ninitBlock();","/**\r\n * Utility to focus.\r\n * @author Andrey Glotov\r\n */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\nconst FOCUS_CLASS = 'focus-utility';\r\nconst KEY_TAB = 9;\r\n\r\nconst $root = $('html');\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// ---------------------------- BEGIN EVENT HANDLERS --------------------------\r\n\r\n/**\r\n * Detect tab key press event and apply the focus utility class to the root\r\n * element.\r\n * \r\n * @param {jQuery.Event} e The event object\r\n */\r\nfunction handleKeyDown(e) {\r\n    if (e.which === KEY_TAB) {\r\n        $root.addClass(FOCUS_CLASS);\r\n    }\r\n}\r\n\r\n/**\r\n * Detect mouse down event and remove the focus utility class when clicked\r\n * outside of the active element.\r\n * \r\n * @param {jQuery.Event} e The event object\r\n */\r\nfunction handleMouseDown(e) {\r\n    const $activeElement = $(':focus');\r\n    if ($activeElement.length === 0) {\r\n        return;\r\n    }\r\n\r\n    const target = e.target;\r\n    if (!(\r\n        target === document\r\n        || $activeElement.is($(target))\r\n        || $.contains($activeElement.get(0), target)\r\n    )) {\r\n        $root.removeClass(FOCUS_CLASS);\r\n    }\r\n}\r\n\r\n// ----------------------------- END EVENT HANDLERS ---------------------------\r\n\r\n// ---------------------------- BEGIN PUBLIC METHODS --------------------------\r\n\r\n/**\r\n * Initialize the focus utility.\r\n */\r\nexport function init() {\r\n    $root.on({\r\n        keydown: handleKeyDown,\r\n        mousedown: handleMouseDown,\r\n    });\r\n}\r\n\r\n// ----------------------------- END PUBLIC METHODS ---------------------------\r\n","/**\r\n * Force a reflow\r\n * @param {JQuery} el The element whose styles have been changed\r\n */\r\nexport function forceReflow($el) {\r\n    void($el.get(0).offsetHeight);\r\n}\r\n\r\n/**\r\n * Get size of ems in pixels\r\n * \r\n * @param {JQuery} $elem The element whose em size is to be computed\r\n * @return {number} The size of ems in pixels\r\n */\r\nexport function getEmSize( $elem ) {\r\n    return +$elem.css('font-size').match(/\\d*\\.?\\d*/)[0];\r\n}\r\n\r\n/**\r\n * Debounce function execution\r\n * \r\n * @param {function} cb The function to execute\r\n * @param {number} interval The debouncing interval in milliseconds\r\n * @return {function} The debounced function\r\n */\r\nexport function debounce(cb, interval) {\r\n    let timer = null;\r\n\r\n    return function() {\r\n        clearTimeout(timer);\r\n        timer = setTimeout(cb, interval);\r\n    };\r\n}\r\n\r\n/**\r\n * Throttle function execution\r\n * \r\n * @param {function} cb The function to execute\r\n * @param {number} interval The throttling interval in milliseconds\r\n * @return {function} The throttled function\r\n */\r\nexport function throttle(cb, interval) {\r\n    let called = false;\r\n    let timer = null;\r\n\r\n    return function() {\r\n        if (timer !== null) {\r\n            // Ensure that we catch and execute that last invocation.\r\n            called = true;\r\n            return;\r\n        }\r\n\r\n        cb();\r\n\r\n        timer = this.setTimeout(function() {\r\n            timer = null;\r\n            if (called) {\r\n                cb();\r\n                called = false;\r\n            }\r\n        }, interval);\r\n    };\r\n}\r\n","/**\r\n * @file Lazy loader for images.\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport { throttle } from './index';\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\nconst BUFFER_HEIGHT = 50;\r\nconst LAZY_SELECTOR = '.lazy';\r\nconst SCROLL_INTERVAL = 200;  // Scroll throttling interval\r\n\r\nlet $images = $(LAZY_SELECTOR);\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// -------------------------- BEGIN UTILITY FUNCTIONS -------------------------\r\n\r\n/**\r\n * Check if <tt>elem</tt> is in the browser's viewport.\r\n * \r\n * @param {JQuery} $elem The element to check\r\n * @return {boolean} <tt>true</tt> if the element is in the viewport,\r\n *      <tt>false</tt> otherwise\r\n */\r\nfunction isInViewport($elem) {\r\n    const windowBottom = $(window).scrollTop() + $(window).height();\r\n    return $elem.offset().top < (windowBottom + BUFFER_HEIGHT);\r\n}\r\n\r\n// --------------------------- END UTILITY FUNCTIONS --------------------------\r\n\r\n// ----------------------------- BEGIN DOM METHODS ----------------------------\r\n\r\n/**\r\n * Lazy-load the given <tt>img</tt> element.\r\n * \r\n * @param {JQuery} $img The image element\r\n */\r\nfunction loadImage($img) {\r\n    if ($img.parent().is('picture')) {\r\n        $img.siblings('source').each(function() {\r\n            const $source = $(this);\r\n            $source\r\n                .attr('srcset', $source.attr('data-srcset'))\r\n                .removeAttr('data-srcset');\r\n        });\r\n    }\r\n\r\n    $img\r\n        .attr('src', $img.attr('data-src'))\r\n        .attr('srcset', $img.attr('data-srcset'))\r\n        .removeAttr('data-src data-srcset')\r\n        .removeClass('lazy');\r\n}\r\n\r\n// ------------------------------ END DOM METHODS -----------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n\r\n/**\r\n * Load all images that have been scrolled into the viewport for the first time\r\n */\r\nexport function scanImages() {\r\n    if ($images.length === 0) {\r\n        return;\r\n    }\r\n\r\n    $images = $images.filter(function() {\r\n        const $img = $(this);\r\n\r\n        if (!isInViewport($img)) {\r\n            return true;\r\n        }\r\n        \r\n        loadImage($img);        \r\n\r\n        return false;\r\n    });\r\n}\r\n\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n\r\n// ---------------------------- BEGIN PUBLIC METHODS --------------------------\r\n\r\n/**\r\n * Initialize the lazy loader.\r\n */\r\nexport function init() {\r\n    window.addEventListener(\r\n        'scroll',\r\n        throttle(scanImages, SCROLL_INTERVAL)\r\n    );\r\n\r\n    scanImages();\r\n}\r\n\r\n// ----------------------------- END PUBLIC METHODS ---------------------------\r\n","/**\r\n * @file Implementation of the gallery block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\n// Block name\r\nconst BLOCK = 'gallery';\r\n\r\n// Element selectors\r\nconst SELECTORS = {\r\n    BLOCK: `.${BLOCK}`,\r\n    THUMB_LINK: `.${BLOCK}__thumb-link`,\r\n};\r\n\r\n// Element class names\r\nconst CLASSES = {\r\n    LIGHTBOX: 'lightbox',\r\n};\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// -------------------------- BEGIN CLASS DEFINITION -------------------------- \r\n\r\n/**\r\n * Lighbox image gallery\r\n */\r\nclass Gallery {\r\n    \r\n    /**\r\n     * Initialize a gallery block\r\n     * \r\n     * @param {JQuery} $root The block's root\r\n     */\r\n    constructor($root) {\r\n        $root.magnificPopup({\r\n            delegate: SELECTORS.THUMB_LINK,\r\n            mainClass: CLASSES.LIGHTBOX,\r\n\r\n            type: 'image',\r\n\r\n            gallery: {\r\n                enabled: true,\r\n                tCounter: '',\r\n            },\r\n\r\n            closeMarkup: `\r\n                <button aria-label=\"Close\" type=\"button\" class=\"mfp-close\">\r\n                    &#215;\r\n                </button>\r\n            `,\r\n            arrowMarkup: `\r\n                <button \r\n                    aria-label=\"%title%\"\r\n                    type=\"button\"\r\n                    class=\"mfp-arrow mfp-arrow-%dir%\"\r\n                >\r\n                </button>\r\n            `,\r\n\r\n            callbacks: {\r\n                beforeOpen() {\r\n                    // Add role and label attributes for accessibility purposes\r\n                    this.wrap.attr({\r\n                        'role': 'dialog',\r\n                        'aria-label': 'Gallery',\r\n                    });\r\n                },\r\n            },\r\n        });\r\n    }\r\n\r\n}\r\n\r\n// --------------------------- END CLASS DEFINITION --------------------------- \r\n\r\n// Initialize all gallery blocks on the page.\r\n$(SELECTORS.BLOCK).each(function() {\r\n    new Gallery($(this));\r\n});\r\n\r\nexport default Gallery;\r\n","/**\r\n * @file Implementation of the search block\r\n * @author Andrey Glotov\r\n */\r\n\r\n/* global focusTrap */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\n// Block name\r\nconst BLOCK = 'search';\r\n\r\n// Element selectors\r\nconst SELECTORS = {\r\n    BLOCK: `.${BLOCK}`,\r\n    CLOSE: `.${BLOCK}__close`,\r\n};\r\n\r\n// Element class names\r\nconst CLASSES = {\r\n    BLOCK_VISIBLE: `${BLOCK}_visible`,\r\n};\r\n\r\nconst elements = {};\r\nlet popupFocusTrap;\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// --------------------------- BEGIN PRIVATE METHODS --------------------------\r\n\r\n/**\r\n * Initialize the search block\r\n */\r\nfunction initBlock() {\r\n    const $search = $(SELECTORS.BLOCK);\r\n    const $close = $(SELECTORS.CLOSE, $search);\r\n\r\n    elements.$search = $search;\r\n\r\n    popupFocusTrap = focusTrap($search.get(0), {\r\n        clickOutsideDeactivates: true,\r\n        escapeDeactivates: true,\r\n        \r\n        onDeactivate: function handleSearchDeactivate() {\r\n            $search.removeClass(CLASSES.BLOCK_VISIBLE);\r\n        },\r\n    });\r\n\r\n    $close.click(hide);\r\n}\r\n\r\n// ---------------------------- END PRIVATE METHODS ---------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n\r\n/**\r\n * Show the search modal\r\n */\r\nexport function show() {\r\n    elements.$search.addClass(CLASSES.BLOCK_VISIBLE);\r\n\r\n    // Need to wait 100ms for autofocus to work\r\n    // TODO: why?\r\n    setTimeout(() => {\r\n        popupFocusTrap.activate();\r\n    }, 100);\r\n}\r\n\r\n/**\r\n * Hide the search modal\r\n */\r\nexport function hide() {\r\n    popupFocusTrap.deactivate();\r\n}\r\n\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n\r\ninitBlock();\r\n","/**\r\n * @file Implementation of the header block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport { show as showSearch } from '../search/search';\r\nimport { getEmSize, forceReflow, throttle } from '../../../js/util/index';\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\n// Block name\r\nconst BLOCK = 'header';\r\n\r\n// Element selectors\r\nconst SELECTORS = {\r\n    BLOCK: `.${BLOCK}`,\r\n    SEARCH_TOGGLE: `.${BLOCK}__search-toggle`,\r\n};\r\n\r\n// Element class names\r\nconst CLASSES = {\r\n    BLOCK_TRANSPARENT: `${BLOCK}_transparent`,\r\n    BLOCK_HIDDEN: `${BLOCK}_hidden`,\r\n    BLOCK_ANIMATED: `${BLOCK}_animated`,\r\n    BLOCK_SCROLL: `${BLOCK}_scroll`,\r\n};\r\n\r\nconst STICKY_HEADER_OFFSET = 6;     // Scroll offset to make the header \"sticky\"\r\nconst VISIBLE_HEADER_OFFSET = 32;   // Scroll offset to show the \"sticky\" header\r\nconst SCROLL_INTERVAL= 200;         // Scroll throttling interval\r\n\r\n// Possible header states\r\nconst HEADER_STATES = {\r\n    NORMAL: 0,\r\n    STICKY: 1,\r\n    VISIBLE: 2,\r\n};\r\n\r\n// jQuery elements map\r\nconst elements = {};\r\n\r\n// Is header initially transparent?\r\nlet isTransparent = false;\r\n\r\n// Default header state\r\nlet headerState = HEADER_STATES.NORMAL;\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// --------------------------- BEGIN PRIVATE METHODS --------------------------\r\n\r\n/**\r\n * Add or remove header classes basd on the current scroll offset to create an\r\n * animated sticky header effect.\r\n */\r\nfunction updateHeaderStyles() {\r\n    const currentOffsetEm = $(window).scrollTop() / getEmSize($('.page'));\r\n\r\n    let newState = null;\r\n    if (currentOffsetEm < STICKY_HEADER_OFFSET) {\r\n        newState = HEADER_STATES.NORMAL;\r\n    } else if (currentOffsetEm < VISIBLE_HEADER_OFFSET) {\r\n        newState = HEADER_STATES.STICKY;\r\n    } else {\r\n        newState = HEADER_STATES.VISIBLE;\r\n    }\r\n\r\n    if (newState !== headerState) {\r\n        const { $header } = elements;\r\n\r\n        if (newState === HEADER_STATES.NORMAL) {\r\n            $header\r\n                .removeClass(CLASSES.BLOCK_SCROLL)\r\n                .removeClass(CLASSES.BLOCK_HIDDEN)\r\n                .removeClass(CLASSES.BLOCK_ANIMATED)\r\n                .toggleClass(CLASSES.BLOCK_TRANSPARENT, isTransparent);\r\n        } else if (newState === HEADER_STATES.STICKY) {\r\n            $header\r\n                .addClass(CLASSES.BLOCK_SCROLL)\r\n                .addClass(CLASSES.BLOCK_HIDDEN)\r\n                .removeClass(CLASSES.BLOCK_TRANSPARENT);\r\n                \r\n            forceReflow($header);\r\n\r\n            $header.addClass(CLASSES.BLOCK_ANIMATED);\r\n        } else {    // HEADER_STATES.VISIBLE\r\n            if (headerState === HEADER_STATES.NORMAL) {\r\n                // Make sure the animation is played\r\n                $header\r\n                    .addClass(CLASSES.BLOCK_SCROLL)\r\n                    .addClass(CLASSES.BLOCK_HIDDEN)\r\n                    .removeClass(CLASSES.BLOCK_TRANSPARENT);\r\n\r\n                forceReflow($header);\r\n\r\n                $header.addClass(CLASSES.BLOCK_ANIMATED);\r\n            }\r\n            \r\n            $header.removeClass(CLASSES.BLOCK_HIDDEN);\r\n        }\r\n\r\n        headerState = newState;\r\n    }\r\n}\r\n\r\n/**\r\n * Initialize the header block\r\n */\r\nfunction initBlock() {\r\n    elements.$header = $(SELECTORS.BLOCK);\r\n    elements.$searchToggle = $(SELECTORS.SEARCH_TOGGLE, elements.$header);\r\n\r\n    isTransparent = elements.$header.hasClass(CLASSES.BLOCK_TRANSPARENT);\r\n\r\n    elements.$searchToggle.click(showSearch);\r\n\r\n    $(window).scroll(throttle(updateHeaderStyles, SCROLL_INTERVAL));\r\n\r\n    // Process initial scroll position\r\n    updateHeaderStyles();\r\n}\r\n\r\n// ---------------------------- END PRIVATE METHODS ---------------------------\r\n\r\ninitBlock();\r\n","/**\r\n * @file Implementation of the dropdown strategy for menus\r\n * @author Andrey Glotov\r\n */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\nconst $document = $(document);\r\n\r\nconst Keys = {\r\n    ESC: 27,\r\n    SPACE: 32\r\n};\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\nexport default class DropdownStrategy {\r\n    /**\r\n     * Create a dropdown strategy\r\n     * @param {Object} props - Properties object\r\n     * @param {JQuery} props.$root The root node\r\n     * @param {JQuery} props.$trigger The dropdown button\r\n     * @param {JQuery} props.$drawer The dropdown drawer\r\n     * @param {Function} props.onCollapse The callback to execute on collapse\r\n     * @param {FUnction} props.onExpand The callback to execute on expand\r\n     */\r\n    constructor({$root, $trigger, $drawer, onCollapse, onExpand}) {\r\n        this._elements = { $root, $trigger, $drawer };\r\n        this._isExpanded = false;\r\n\r\n        this._handlers = {\r\n            collapseHandler: onCollapse,\r\n            expandHandler: onExpand,\r\n        };\r\n\r\n        this.handleOutsideClick = this.handleOutsideClick.bind(this);\r\n        this.handleToggleClick = this.handleToggleClick.bind(this);\r\n        this.handleToggleKeyDown = this.handleToggleKeyDown.bind(this);\r\n        this.handleToggleKeyUp = this.handleToggleKeyUp.bind(this);\r\n        this.handleKeyDown = this.handleKeyDown.bind(this);\r\n        this.handleMouseLeave = this.handleMouseLeave.bind(this);\r\n        this.handleMouseEnter = this.handleMouseEnter.bind(this);\r\n    }\r\n\r\n    // -------------------------- BEGIN EVENT HANDLERS ------------------------\r\n\r\n    handleOutsideClick(event) {\r\n        const target = event.target;\r\n        if (!(\r\n            target === document\r\n            || this._elements.$root.is($(target))\r\n            || $.contains(this._elements.$root.get(0), target)\r\n        )) {\r\n            this.collapse();\r\n        }\r\n    }\r\n\r\n    handleToggleClick() {\r\n        this.toggle();\r\n    }\r\n\r\n    handleToggleKeyDown(event) {\r\n        if (event.which === Keys.SPACE) {\r\n            event.preventDefault();\r\n\r\n            this.toggle();\r\n        }\r\n    }\r\n\r\n    handleToggleKeyUp(event) {\r\n        if (event.which === Keys.SPACE) {\r\n            event.preventDefault();\r\n        }\r\n    }\r\n\r\n    handleKeyDown(event) {\r\n        if (event.which === Keys.ESC) {\r\n            this.collapse();\r\n            this._elements.$trigger.focus();\r\n        }\r\n    }\r\n\r\n    handleMouseEnter() {\r\n        this.expand();\r\n    }\r\n\r\n    handleMouseLeave() {\r\n        this.collapse();\r\n    }\r\n\r\n    // --------------------------- END EVENT HANDLERS -------------------------\r\n\r\n    // -------------------------- BEGIN PUBLIC METHODS ------------------------\r\n\r\n    /**\r\n     * Expand the dropdown\r\n     */\r\n    expand() {\r\n        this._isExpanded = true;\r\n\r\n        setTimeout(() => {\r\n            $document.on({\r\n                click: this.handleOutsideClick,\r\n                focusin: this.handleOutsideClick,\r\n            });\r\n            this._elements.$root.on('keydown', this.handleKeyDown);\r\n\r\n            this._elements.$trigger.attr('aria-expanded', 'true');\r\n\r\n            if (this._handlers.expandHandler) {\r\n                this._handlers.expandHandler();\r\n            }\r\n        }, 0);\r\n    }\r\n\r\n    /**\r\n     * Collapse the dropdown\r\n     */\r\n    collapse() {\r\n        this._isExpanded = false;\r\n\r\n        $document.off({\r\n            click: this.handleOutsideClick,\r\n            focusin: this.handleOutsideClick,\r\n        });\r\n        this._elements.$root.off('keydown', this.handleKeyDown);\r\n\r\n        this._elements.$trigger.attr('aria-expanded', 'false');\r\n\r\n        if (this._handlers.collapseHandler) {\r\n            this._handlers.collapseHandler();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Toggle between the collapsed and expanded states\r\n     */\r\n    toggle() {\r\n        if (!this._isExpanded) {\r\n            this.expand();\r\n        } else {\r\n            this.collapse();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Activate the strategy: add event listeners.\r\n     */\r\n    activate() {\r\n        this._elements.$root.on({\r\n            mouseenter: this.handleMouseEnter,\r\n            mouseleave: this.handleMouseLeave,\r\n        });\r\n\r\n        this._elements.$trigger.on({\r\n            click: this.handleToggleClick,\r\n            keydown: this.handleToggleKeyDown,\r\n            keyup: this.handleToggleKeyUp,\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Deactivate the strategy: collapse the dropdown and remove event\r\n     * listeners.\r\n     */\r\n    deactivate() {\r\n        if (this._isExpanded) {\r\n            this.collapse();\r\n        }\r\n\r\n        this._elements.$root.off({\r\n            mouseenter: this.handleMouseEnter,\r\n            mouseleave: this.handleMouseLeave,\r\n        });\r\n\r\n        this._elements.$trigger.off({\r\n            click: this.handleToggleClick,\r\n            keydown: this.handleToggleKeyDown,\r\n            keyup: this.handleToggleKeyUp,\r\n        });\r\n    }\r\n}\r\n","/**\r\n * Implementation of the mini cart block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport DropdownStrategy from '../../../js/util/dropdown-strategy';\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\n// Block name\r\nconst BLOCK = 'mini-cart';\r\n\r\n// Element selectors\r\nconst SELECTORS = {\r\n    BLOCK: `.${BLOCK}`,\r\n    TRIGGER: `.${BLOCK}__trigger`,\r\n    DRAWER: `.${BLOCK}__drawer`,\r\n};\r\n\r\n// Element class names\r\nconst CLASSES = {\r\n    DRAWER_EXPANDED: `${BLOCK}__drawer_expanded`,\r\n};\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// --------------------------- BEGIN PRIVATE METHODS --------------------------\r\n\r\n/**\r\n * Initialize the mini cart block\r\n */\r\nfunction initBlock() {\r\n    const $minicart = $(SELECTORS.BLOCK);\r\n    const $trigger = $(SELECTORS.TRIGGER, $minicart);\r\n    const $drawer = $(SELECTORS.DRAWER, $minicart);\r\n\r\n    const dropdown = new DropdownStrategy({\r\n        $root: $minicart,\r\n        $trigger,\r\n        $drawer,\r\n\r\n        onExpand() {\r\n            $drawer.addClass(CLASSES.DRAWER_EXPANDED);\r\n        },\r\n        onCollapse() {\r\n            $drawer.removeClass(CLASSES.DRAWER_EXPANDED);\r\n        }\r\n    });\r\n\r\n    dropdown.activate();\r\n}\r\n\r\n// ---------------------------- END PRIVATE METHODS ---------------------------\r\n\r\ninitBlock();\r\n","/**\r\n * @file Implementation of the drilldown strategy for menus\r\n * @author Andrey Glotov\r\n */\r\n\r\n/* global focusTrap */\r\n\r\n// ------------------------- BEGIN MODULE VARIABLES ---------------------------\r\n\r\nconst $document = $(document);\r\n\r\nconst drilldownChain = [];\r\nlet activeDrilldown = null;\r\n\r\n// -------------------------- END MODULE VARIABLES ----------------------------\r\n\r\nexport default class DrilldownStrategy {\r\n    /**\r\n     * Create a drilldown strategy\r\n     * @param {Object} props - Properties object\r\n     * @param {JQuery} props.$trigger The drilldown button\r\n     * @param {JQuery} props.$drawer The drilldown drawer\r\n     * @param {JQuery} props.$initialFocus The element to receive initialFocus\r\n     * @param {Function} props.onCollapse The callback to execute on collapse\r\n     * @param {FUnction} props.onExpand The callback to execute on expand\r\n     */\r\n    constructor({$trigger, $drawer, $initialFocus, onCollapse, onExpand}) {\r\n        this._elements = { $trigger, $drawer, $initialFocus };\r\n        this._isExpanded = false;\r\n\r\n        this.handleOutsideClick = this.handleOutsideClick.bind(this);\r\n        this.handleTriggerClick = this.handleTriggerClick.bind(this);\r\n        this.handleTrapDeactivate = this.handleTrapDeactivate.bind(this);\r\n\r\n        this._handlers = {\r\n            collapseHandler: onCollapse,\r\n            expandHandler: onExpand,\r\n        };\r\n\r\n        this._focusTrap = new focusTrap($drawer.get(0), {\r\n            clickOutsideDeactivates: true,\r\n            escapeDeactivates: true,\r\n            initialFocus: $initialFocus && $initialFocus.get(0),\r\n            onDeactivate: this.handleTrapDeactivate,\r\n        });\r\n    }\r\n\r\n    // -------------------------- BEGIN EVENT HANDLERS ------------------------\r\n\r\n    handleOutsideClick(event) {\r\n        if (!$.contains(this._elements.$drawer.get(0), event.target)) {\r\n            this.collapse();\r\n        }\r\n    }\r\n\r\n    handleTriggerClick() {\r\n        this.toggle();\r\n    }\r\n\r\n    handleTrapDeactivate() {\r\n        $document.off('click', this.handleDocumentClick);\r\n\r\n        if (drilldownChain.length !== 0) {\r\n            const prevDrilldown = drilldownChain.pop();\r\n\r\n            if (prevDrilldown._isExpanded) {\r\n                activeDrilldown = prevDrilldown;\r\n                activeDrilldown._focusTrap.unpause();\r\n            }\r\n        } else {\r\n            activeDrilldown = null;\r\n        }\r\n\r\n        this._isExpanded = false;\r\n\r\n        this._elements.$trigger.attr('aria-expanded', 'false');\r\n\r\n        if (this._handlers.collapseHandler) {\r\n            this._handlers.collapseHandler();\r\n        }\r\n    }\r\n\r\n    // --------------------------- END EVENT HANDLERS -------------------------\r\n\r\n    // -------------------------- BEGIN PUBLIC METHODS ------------------------\r\n\r\n    /**\r\n     * Expand the drilldown menu\r\n     */\r\n    expand() {\r\n        this._isExpanded = true;\r\n\r\n        if (activeDrilldown) {\r\n            activeDrilldown._focusTrap.pause();\r\n            drilldownChain.push(activeDrilldown);\r\n        }\r\n\r\n        activeDrilldown = this;\r\n\r\n        this._focusTrap.activate();\r\n\r\n        setTimeout(() => {\r\n            $document.click(this.handleDocumentClick);\r\n\r\n            if (this._handlers.expandHandler) {\r\n                this._handlers.expandHandler();\r\n            }\r\n        }, 0);\r\n\r\n        this._elements.$trigger.attr('aria-expanded', 'true');\r\n    }\r\n\r\n    /**\r\n     * Collapse the drilldown menu\r\n     */\r\n    collapse() {\r\n        this._focusTrap.deactivate();\r\n    }\r\n\r\n    /**\r\n     * Toggle between the collapsed and expanded states\r\n     */\r\n    toggle() {\r\n        if (!this._isExpanded) {\r\n            this.expand();\r\n        } else {\r\n            this.collapse();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Activate the strategy: add event listeners.\r\n     */\r\n    activate() {\r\n        this._elements.$trigger.click(this.handleTriggerClick);\r\n        this._elements.$drawer.keydown(this.handleKeyDown);\r\n    }\r\n\r\n    /**\r\n     * Deactivate the strategy: collapse the dropdown and remove event\r\n     * listeners.\r\n     */\r\n    deactivate() {\r\n        if (this._isExpanded) {\r\n            this.collapse();\r\n        }\r\n\r\n        this._elements.$trigger.off('click', this.handleTriggerClick);\r\n        this._elements.$drawer.off('keydown', this.handleKeyDown);\r\n    }\r\n}\r\n","/**\r\n * @file Implementation of the navigation block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport DropdownStrategy from '../../../js/util/dropdown-strategy';\r\nimport DrilldownStrategy from '../../../js/util/drilldown-strategy';\r\n\r\nimport { debounce, getEmSize } from '../../../js/util/index';\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\n// Block name\r\nconst BLOCK = 'nav';\r\n\r\n// Element selectors\r\nconst SELECTORS = {\r\n    BLOCK: `.${BLOCK}`,\r\n    TOGGLE: `.${BLOCK}__toggle`,\r\n    MENU: `.${BLOCK}__menu`,\r\n    SUBMENU: `.${BLOCK}__submenu`,\r\n    ITEM: `.${BLOCK}__item`,\r\n    LINK: `.${BLOCK}__link`,\r\n    INTERNAL_LINK: `.${BLOCK}__link[href^=\"#\"]`,\r\n    LINK_BACK: `.${BLOCK}__link_back`,\r\n    SCROLLPANE: `.${BLOCK}__scrollpane`,\r\n    PAGE: '.page',\r\n};\r\n\r\n// Element class names\r\nconst CLASSES = {\r\n    MENU_VISIBLE: `${BLOCK}__menu_visible`,\r\n    SUBMENU_VISIBLE: `${BLOCK}__submenu_visible`,\r\n    PAGE_MENU_EXPANDED: 'page_menu-expanded',\r\n    HAMBURGER_OPEN: 'hamburger_open',\r\n};\r\n\r\nconst DESKTOP_BREAKPOINT = 62;  // Minimum desktop screen width (in ems)\r\nconst RESIZE_INTERVAL = 200;    // Resize event debounce interval (in ms)\r\nconst SCROLL_BUFFER = 6.25;     // Offset from window top to scroll target\r\nconst SCROLL_SPEED = 1000;      // Scroll speed (in ms)\r\n\r\n// List of submenu objects\r\nlet submenus = [];\r\n\r\n// Mobile menu dropdown\r\nlet mobileMenu;\r\n\r\n// Is the desktop menu active?\r\nlet isDesktop = false;\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n/**\r\n * Implementation of submenus.\r\n * \r\n * Each submenu has two behavior strategies: drilldown menu for smaller screens\r\n * and dropdown menu for larger screens.\r\n */\r\nclass NavSubmenu {\r\n\r\n    /**\r\n     * Initialize submenu.\r\n     * \r\n     * @param {JQuery} $root Submenu root element\r\n     */\r\n    constructor($root) {\r\n        this.elements = {\r\n            $root,\r\n            $parentLink: $root.prev(SELECTORS.LINK),\r\n            $parentItem: $root.closest(SELECTORS.ITEM),\r\n            $scrollpane: $(SELECTORS.SCROLLPANE, $root).first(),\r\n            $backLink: $(SELECTORS.LINK_BACK, $root).first(),\r\n            $firstLink: $(SELECTORS.LINK, $root)\r\n                .not(SELECTORS.LINK_BACK).first(),\r\n        };\r\n\r\n        this.drilldownStrategy = new DrilldownStrategy({\r\n            $trigger: this.elements.$parentLink,\r\n            $drawer: this.elements.$root,\r\n            $initialFocus:  this.elements.$firstLink,\r\n\r\n            onCollapse: this.collapse.bind(this), \r\n            onExpand: this.expand.bind(this),\r\n        });\r\n\r\n        this.dropdownStrategy = new DropdownStrategy({\r\n            $root: this.elements.$parentItem,\r\n            $trigger: this.elements.$parentLink,\r\n            $drawer: this.elements.$root,\r\n\r\n            onCollapse: this.collapse.bind(this), \r\n            onExpand: this.expand.bind(this),\r\n        });\r\n\r\n        // Mobile by default\r\n        this.drilldownStrategy.activate();\r\n\r\n        this.elements.$backLink.click(() => this.drilldownStrategy.collapse());\r\n    }\r\n\r\n    /**\r\n     * Collapse the submenu\r\n     */\r\n    collapse() {\r\n        this.elements.$root.removeClass(CLASSES.SUBMENU_VISIBLE);\r\n    }\r\n\r\n    /**\r\n     * Expand the submenu\r\n     */\r\n    expand() {\r\n        const { $root, $scrollpane } = this.elements;\r\n\r\n        $scrollpane.scrollTop(0);   // Reset submenu scroll position\r\n        $root.addClass(CLASSES.SUBMENU_VISIBLE);\r\n    }\r\n\r\n}\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\n// --------------------------- BEGIN EVENT HANDLERS ---------------------------\r\n\r\n/**\r\n * Scroll smoothly when navigating to internal links.\r\n */\r\nfunction handleInternalLinkClick() {\r\n    const $link = $(this);\r\n\r\n    const targetId = $link.attr('href');\r\n    const $targetElem = $(targetId);\r\n    if ($targetElem.length === 0) {\r\n        return;\r\n    }\r\n\r\n    if (!isDesktop) {\r\n        submenus.forEach((submenu) => submenu.drilldownStrategy.collapse());\r\n        mobileMenu.collapse();\r\n    }\r\n\r\n    $('html, body').animate({\r\n        scrollTop: Math.max(\r\n            0,\r\n            $targetElem.offset().top - SCROLL_BUFFER * getEmSize($('.page'))\r\n        ),\r\n    }, SCROLL_SPEED, 'swing', function() {\r\n        $targetElem.focus();\r\n    });\r\n\r\n    return false;\r\n}\r\n\r\n/**\r\n * Respond to window resize event.\r\n * \r\n * Switch between drilldown behavior for submenus on mobile and dropdown \r\n * behavior on desktop.\r\n */\r\nfunction handleWindowResize() {\r\n    const screenWidth = $(window).outerWidth() / getEmSize($('.page'));\r\n\r\n    if (isDesktop && (screenWidth < DESKTOP_BREAKPOINT)) {\r\n        isDesktop = false;\r\n\r\n        submenus.forEach((submenu) => {\r\n            submenu.dropdownStrategy.deactivate();\r\n            submenu.drilldownStrategy.activate();\r\n        });\r\n    } else if (!isDesktop && (screenWidth >= DESKTOP_BREAKPOINT)) {\r\n        isDesktop = true;\r\n\r\n        submenus.forEach((submenu) => {\r\n            submenu.drilldownStrategy.deactivate();\r\n            submenu.dropdownStrategy.activate();\r\n        });\r\n\r\n        mobileMenu.collapse();\r\n    }\r\n}\r\n\r\n// ---------------------------- END EVENT HANDLERS ----------------------------\r\n\r\n// --------------------------- BEGIN PRIVATE METHODS --------------------------\r\n\r\n/**\r\n * Initialize the nav menu block\r\n */\r\nfunction initBlock() {\r\n    const $nav = $(SELECTORS.BLOCK);\r\n    const $menuToggle = $(SELECTORS.TOGGLE, $nav);\r\n    const $menu = $(SELECTORS.MENU, $nav);\r\n    const $scrollpane = $(SELECTORS.SCROLLPANE, $nav);\r\n\r\n    mobileMenu = new DrilldownStrategy({\r\n        $trigger: $menuToggle,\r\n        $drawer: $nav,\r\n\r\n        onCollapse() {\r\n            $menu.removeClass(CLASSES.MENU_VISIBLE);\r\n            $menuToggle.removeClass(CLASSES.HAMBURGER_OPEN);\r\n\r\n            $(SELECTORS.PAGE).removeClass(CLASSES.PAGE_MENU_EXPANDED);\r\n        },\r\n\r\n        onExpand() {\r\n            $menu.addClass(CLASSES.MENU_VISIBLE);\r\n            $scrollpane.scrollTop(0);\r\n            $menuToggle.addClass(CLASSES.HAMBURGER_OPEN);\r\n\r\n            $(SELECTORS.PAGE).addClass(CLASSES.PAGE_MENU_EXPANDED);\r\n        },\r\n    });\r\n\r\n    mobileMenu.activate();\r\n\r\n    submenus = $(SELECTORS.SUBMENU, $nav)\r\n        .map(function() {\r\n            return new NavSubmenu($(this));\r\n        })\r\n        .toArray();\r\n\r\n    $nav.on('click', SELECTORS.INTERNAL_LINK, handleInternalLinkClick);\r\n    \r\n    $(window).resize(debounce(handleWindowResize, RESIZE_INTERVAL));\r\n    \r\n    // Process the initial screen size\r\n    handleWindowResize();\r\n}\r\n\r\n// ---------------------------- END PRIVATE METHODS ---------------------------\r\n\r\ninitBlock();\r\n","/**\r\n * @file Implementation of the slider block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES -------------------------- \r\n\r\n// Block name\r\nconst BLOCK = 'slider';\r\n\r\n// Element selectors\r\nconst SELECTORS = {\r\n    BLOCK: `.${BLOCK}`,\r\n    CONTAINER: `.${BLOCK}__container`,\r\n    ARROW_NEXT: `.${BLOCK}__arrow_dir_next`,\r\n    ARROW_PREV: `.${BLOCK}__arrow_dir_prev`,\r\n};\r\n\r\n// Element class names\r\nconst CLASSES = {\r\n    SLIDE_ACTIVE: `${BLOCK}__slide_active`,\r\n};\r\n\r\nconst AUTOPLAY_SPEED = 5000;\r\nconst TRANSITION_SPEED = 500;\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// -------------------------- BEGIN CLASS DEFINITION -------------------------- \r\n\r\n/**\r\n * Slider implementation\r\n */\r\nclass Slider {\r\n\r\n    /**\r\n     * Construct a slider\r\n     * \r\n     * @param {JQuery} $root The root element\r\n     */\r\n    constructor($root) {\r\n        const $container = $(SELECTORS.CONTAINER, $root);\r\n        const $prevArrow = $(SELECTORS.ARROW_PREV, $root);\r\n        const $nextArrow = $(SELECTORS.ARROW_NEXT, $root);\r\n\r\n        $container.slick({\r\n            rows: 0,\r\n            zIndex: 1,\r\n\r\n            cssEase: 'linear',\r\n            fade: true,\r\n            speed: TRANSITION_SPEED,\r\n\r\n            autoplay: true,\r\n            autoplaySpeed: AUTOPLAY_SPEED,\r\n            pauseOnFocus : false,\r\n            pauseOnHover: false,\r\n\r\n            prevArrow: $prevArrow,\r\n            nextArrow: $nextArrow,\r\n        });\r\n\r\n        $container.on('beforeChange', this.handleSlickBeforeChange);\r\n    }\r\n\r\n    // -------------------------- BEGIN EVENT HANDLERS ------------------------\r\n\r\n    /**\r\n     * Remove the \"active\" modifier from the previous slide and apply it to the\r\n     * current one\r\n     * @param {Object} e The event\r\n     * @param {Object} slick Slider instance\r\n     * @param {number} current Current slide index\r\n     * @param {number} next Next slide index\r\n     */\r\n    handleSlickBeforeChange(e, slick, current, next) {\r\n        slick.$slides.eq(current).removeClass(CLASSES.SLIDE_ACTIVE);\r\n        slick.$slides.eq(next).addClass(CLASSES.SLIDE_ACTIVE);\r\n    }\r\n\r\n    // --------------------------- END EVENT HANDLERS -------------------------\r\n}\r\n\r\n// --------------------------- END CLASS DEFINITION --------------------------- \r\n\r\n$(SELECTORS.BLOCK).each(function() {\r\n    new Slider($(this));\r\n});\r\n\r\nexport default Slider;\r\n","/**\r\n * @file Implementation of the specials slider block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport { forceReflow } from '../../../js/util/index';\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES -------------------------- \r\n\r\n// Block name\r\nconst BLOCK = 'specials-slider';\r\n\r\n// Element selectors\r\nconst SELECTORS = {\r\n    BLOCK: `.${BLOCK}`,\r\n    SLIDES: `.${BLOCK}__slide`,\r\n    SLIDE_INNER: `.${BLOCK}__slide-inner`,\r\n    PREV_ARROW: `.${BLOCK}__arrow_dir_prev`,\r\n    NEXT_ARROW: `.${BLOCK}__arrow_dir_next`,\r\n};\r\n\r\n// Element class names\r\nconst CLASSES = {\r\n    SLIDE_MOVING: `${BLOCK}__slide_moving`,\r\n    SLIDE_ACTIVE: `${BLOCK}__slide_active`,\r\n};\r\n\r\n// Keep these in sync with css!\r\n// TODO: read these values using the computed styles\r\nconst GUTTER_WIDTH = 25;\r\nconst MIN_OPACITY = 0.5;\r\nconst MIN_SCALE = 0.8;\r\nconst TRANSITION_DURATION = 150;\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// -------------------------- BEGIN CLASS DEFINITION -------------------------- \r\n\r\n/**\r\n * Carousel card slider for special products\r\n */\r\nclass SpecialsSlider {\r\n\r\n    /**\r\n     * Create a slider\r\n     * \r\n     * @param {JQuery} $root The root element\r\n     */\r\n    constructor($root) {\r\n        const $slides = $(SELECTORS.SLIDES, $root);\r\n        const $prevArrow = $(SELECTORS.PREV_ARROW, $root);\r\n        const $nextArrow = $(SELECTORS.NEXT_ARROW, $root);\r\n\r\n        this.elements = { $root, $slides, $prevArrow, $nextArrow };\r\n\r\n        this.state = {\r\n            isTransitioning: false,\r\n            activeIndex: 0,\r\n        };\r\n\r\n        this.config = {\r\n            dOffset: GUTTER_WIDTH / ($slides.length - 1),\r\n            dOpacity: (1 - MIN_OPACITY) / ($slides.length - 1),\r\n            dScale: (1 - MIN_SCALE) / ($slides.length - 1),\r\n        };\r\n\r\n        $prevArrow.click(this.prevSlide.bind(this));\r\n        $nextArrow.click(this.nextSlide.bind(this));\r\n\r\n        this.updateStyles();\r\n    }\r\n\r\n    // -------------------------- BEGIN PRIVATE METHODS -----------------------\r\n\r\n    /**\r\n     * Apply CSS styles to the given slide\r\n     * \r\n     * @param {JQuery} $slide The slide to apply styles to\r\n     * @param {number} order Current stacking order of this slide\r\n     */\r\n    applySlideStyles($slide, order) {\r\n        const {dOffset, dOpacity, dScale} = this.config;\r\n        \r\n        $slide.css({\r\n            transform: `translateX(${order * dOffset}%)`,\r\n            zIndex: this.elements.$slides.length - order,\r\n        }).find(SELECTORS.SLIDE_INNER).css({\r\n            opacity: (1 - (order * dOpacity)),\r\n            transform: `scale(${1 - (order * dScale)})`,\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Update CSS styles of all slides\r\n     */\r\n    updateStyles() { \r\n        const total = this.elements.$slides.length;\r\n    \r\n        this.elements.$slides.each((i, slide) => {\r\n            const $slide = $(slide);\r\n\r\n            if (!$slide.hasClass(CLASSES.SLIDE_MOVING)) {\r\n                const order = (i - this.state.activeIndex + total) % total;\r\n                this.applySlideStyles($slide, order);\r\n            }\r\n        });\r\n    }\r\n\r\n    // --------------------------- END PRIVATE METHODS ------------------------\r\n\r\n    // -------------------------- BEGIN PUBLIC METHODS ------------------------\r\n\r\n    /**\r\n     * Transition to the previous slide\r\n     */\r\n    prevSlide() {\r\n        if (this.state.isTransitioning) {\r\n            return;\r\n        }\r\n        this.state.isTransitioning = true;\r\n\r\n        let activeIndex = this.state.activeIndex;\r\n        const $slides = this.elements.$slides;\r\n\r\n        const $prevSlide = $slides.eq(activeIndex);\r\n\r\n        activeIndex--;\r\n        if (activeIndex < 0) {\r\n            activeIndex = $slides.length - 1;\r\n        }\r\n        this.state.activeIndex = activeIndex;\r\n\r\n        const $movingSlide = $slides.eq(activeIndex);\r\n        \r\n        $movingSlide.addClass(CLASSES.SLIDE_MOVING);\r\n        $movingSlide.css('zIndex', '-=1');\r\n\r\n        setTimeout(() => {\r\n            this.updateStyles();\r\n\r\n            setTimeout(() => {\r\n                forceReflow($movingSlide);\r\n\r\n                $prevSlide.removeClass(CLASSES.SLIDE_ACTIVE);\r\n                $movingSlide.addClass(CLASSES.SLIDE_ACTIVE);\r\n                $movingSlide.removeClass(CLASSES.SLIDE_MOVING);\r\n\r\n                this.applySlideStyles($movingSlide, 0);\r\n\r\n                this.state.isTransitioning = false;\r\n            }, TRANSITION_DURATION);\r\n        }, TRANSITION_DURATION);\r\n    }\r\n\r\n    /**\r\n     * Transition to the next slide\r\n     */\r\n    nextSlide() {\r\n        if (this.state.isTransitioning) {\r\n            return;\r\n        }\r\n        this.state.isTransitioning = true;\r\n\r\n        let activeIndex = this.state.activeIndex;\r\n        const $slides = this.elements.$slides;\r\n        const $movingSlide = $slides.eq(activeIndex);\r\n        \r\n        $movingSlide.addClass(CLASSES.SLIDE_MOVING);\r\n        $movingSlide.css('zIndex', '+=1');\r\n        $movingSlide.removeClass(CLASSES.SLIDE_ACTIVE);\r\n\r\n        activeIndex++;\r\n        if (activeIndex >= $slides.length) {\r\n            activeIndex = 0;\r\n        }\r\n        this.state.activeIndex = activeIndex;\r\n\r\n        const $nextSlide = $slides.eq(activeIndex);\r\n        $nextSlide.addClass(CLASSES.SLIDE_ACTIVE);\r\n        \r\n        setTimeout(() => {\r\n            this.updateStyles();\r\n            \r\n            setTimeout(() => {\r\n                $movingSlide.removeClass(CLASSES.SLIDE_MOVING);\r\n                \r\n                this.applySlideStyles($movingSlide, $slides.length - 1);\r\n\r\n                this.state.isTransitioning = false;\r\n            }, TRANSITION_DURATION);\r\n        }, TRANSITION_DURATION);\r\n    }\r\n\r\n    // --------------------------- END PUBLIC METHODS -------------------------\r\n}\r\n\r\n// --------------------------- END CLASS DEFINITION --------------------------- \r\n\r\n$(SELECTORS.BLOCK).each(function() {\r\n    new SpecialsSlider($(this));\r\n});\r\n\r\nexport default SpecialsSlider;\r\n","/**\r\n * @file Implementation of the tabs block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport { debounce, forceReflow, getEmSize } from '../../../js/util/index';\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\n// Block name\r\nconst BLOCK = 'tabs';\r\n\r\n// Element selectors\r\nconst SELECTOR = {\r\n    BLOCK: `.${BLOCK}`,\r\n    TABLIST: `.${BLOCK}__list`,\r\n    TABS: `.${BLOCK}__tab`,\r\n    PANELS: `.${BLOCK}__panel`,\r\n};\r\n\r\n// Element class names\r\nconst CLASSES = {\r\n    PANEL_ACTIVE: `${BLOCK}__panel_active`,\r\n    PANEL_HIDDEN: `${BLOCK}__panel_hidden`,\r\n};\r\n  \r\n// Key codes  \r\nconst KEYS = {\r\n    ENTER: 13,\r\n    SPACE: 32,\r\n    END: 35,\r\n    HOME: 36,\r\n    LEFT: 37,\r\n    UP: 38,\r\n    RIGHT: 39,\r\n    DOWN: 40,\r\n};\r\n\r\nconst TRANSITION_DURATION = 200;    // Fade transition duration (in ms)\r\nconst MOBILE_BREAKPOINT = 48;       // Mobile breakpoint in ems\r\nconst RESIZE_INTERVAL = 200;        // Resize debouncing interval\r\n\r\nlet isMobile = true;    // Is mobile layout active?\r\nconst tabs = [];        // All tab panels on the page\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n/**\r\n * Tab Panel Implementation\r\n */\r\nclass Tabs {\r\n\r\n    /**\r\n     * Create tabs.\r\n     * \r\n     * @param {JQuery} $root The root element\r\n     */\r\n    constructor($root) {\r\n        const $list = $(SELECTOR.TABLIST, $root);\r\n        const $tabs = $(SELECTOR.TABS, $list);\r\n        const $panels = $(SELECTOR.PANELS, $root);\r\n\r\n        if (($tabs.length === 0) || ($tabs.length !== $panels.length)) {\r\n            return;\r\n        }\r\n\r\n        let activeIndex = null;\r\n\r\n        $tabs.each(function(i) {\r\n            const $tab = $(this);\r\n\r\n            if ($tab.attr('aria-selected') === 'true') {\r\n                if (activeIndex === -1) {\r\n                    activeIndex = i;\r\n                } else {\r\n                    $tab.attr('aria-selected', 'false');\r\n                }\r\n\r\n                $tab.attr('tabindex', '0');\r\n            } else {\r\n                $tab.attr('tabindex', '-1');\r\n            }\r\n        });\r\n        \r\n        if (activeIndex == null) {\r\n            $tabs.eq(0).attr({\r\n                'aria-selected': 'true',\r\n                'tabindex': '0',\r\n            });\r\n\r\n            activeIndex = 0;\r\n        }\r\n        \r\n        $panels.each(function(i) {\r\n            $(this).toggleClass(CLASSES.PANEL_ACTIVE, i === activeIndex);\r\n        });\r\n\r\n        this.elements = {\r\n            $root,\r\n            $list,\r\n            $tabs,\r\n            $panels,\r\n        };\r\n    \r\n        this.state = {\r\n            activeIndex,\r\n            isTransitioning: false,\r\n            orientation: 'vertical',\r\n        };\r\n\r\n        this.handleTabClick = this.handleTabClick.bind(this);\r\n        this.handleTabKeyDown = this.handleTabKeyDown.bind(this);\r\n\r\n        $list.on('click', SELECTOR.TABS, this.handleTabClick);\r\n        $list.on('keydown', SELECTOR.TABS, this.handleTabKeyDown);\r\n\r\n        // Keep track of all tab panels to use a single window resize\r\n        // event handler for them all\r\n        tabs.push(this);\r\n    }\r\n    \r\n    // --------------------------- BEGIN EVENT HANDLERS --------------------------\r\n    \r\n    /**\r\n     * Handle the tab click event\r\n     * \r\n     * @param {JQuery.Event} e The event object\r\n     */\r\n    handleTabClick(e) {\r\n        const tabIndex = this.elements.$tabs.index($(e.currentTarget));\r\n        this.showTab(tabIndex);\r\n        return false;\r\n    }\r\n  \r\n    /**\r\n     * Handle the tab keydown event\r\n     * \r\n     * @param {JQuery.Event} e The event object\r\n     */\r\n    handleTabKeyDown(e) {  \r\n        const { $tabs } = this.elements;\r\n        const { orientation, activeIndex } = this.state;\r\n        const { which } = e;\r\n      \r\n        let nextFocus = null;\r\n\r\n        switch (which) {\r\n        case KEYS.END:\r\n            // Move focus to the last tab\r\n            nextFocus = $tabs.length - 1;\r\n            break;\r\n  \r\n        case KEYS.HOME:\r\n            // Move focus to the first tab\r\n            nextFocus = 0;\r\n            break;\r\n  \r\n        case KEYS.DOWN:\r\n            // Move focus to the next tab (in vertical tab list)\r\n            if (orientation === 'vertical') {\r\n                nextFocus = ($tabs.length + activeIndex + 1) % $tabs.length;\r\n            }\r\n            break;\r\n  \r\n        case KEYS.LEFT:\r\n            // Move focus to the previous tab (in horizontal tab list)\r\n            if (orientation === 'horizontal') {\r\n                nextFocus = ($tabs.length + activeIndex - 1) % $tabs.length;\r\n            }\r\n            break;\r\n  \r\n        case KEYS.UP:\r\n            // Move focus to the previous tab (in vertical tab list)\r\n            if (orientation === 'vertical') {\r\n                nextFocus = ($tabs.length + activeIndex - 1) % $tabs.length;\r\n            }\r\n            break;\r\n  \r\n        case KEYS.RIGHT:\r\n            // Move focus to the next tab (in horizontal tab list)\r\n            if (orientation === 'horizontal') {\r\n                nextFocus = ($tabs.length + activeIndex + 1) % $tabs.length;\r\n            }\r\n            break;\r\n        }\r\n\r\n        if (nextFocus != null) {\r\n            this.showTab(nextFocus);\r\n            return false;\r\n        }\r\n    }\r\n    \r\n    // ---------------------------- END EVENT HANDLERS ---------------------------\r\n    \r\n    // --------------------------- BEGIN PUBLIC METHODS --------------------------\r\n    \r\n    /**\r\n     * Activate the given tab.\r\n     * \r\n     * @param {number} i index of the tab to be activated\r\n     */\r\n    showTab(i) {\r\n        const { $tabs, $panels } = this.elements;\r\n        const { isTransitioning, activeIndex } = this.state;\r\n\r\n        if ((i < 0) || (i >= $tabs.length)) {\r\n            return;\r\n        }\r\n      \r\n        if (isTransitioning || (activeIndex === i)) {\r\n            return;\r\n        }\r\n      \r\n        this.state.isTransitioning = true;\r\n      \r\n        const $prevTab = $tabs.eq(activeIndex);\r\n        const $prevPanel = $panels.eq(activeIndex);\r\n        const $nextTab = $tabs.eq(i);\r\n        const $nextPanel = $panels.eq(i);\r\n      \r\n        $prevTab.attr({\r\n            'aria-selected': 'false',\r\n            'tabindex': '-1',\r\n        });\r\n        $nextTab.attr({\r\n            'aria-selected': 'true',\r\n            'tabindex': '0',\r\n        });\r\n\r\n        $nextTab.focus();\r\n\r\n        $prevPanel.addClass(CLASSES.PANEL_HIDDEN);\r\n\r\n        setTimeout(() => {\r\n            $prevPanel\r\n                .removeClass(CLASSES.PANEL_ACTIVE)\r\n                .removeClass(CLASSES.PANEL_HIDDEN);\r\n            $nextPanel\r\n                .addClass(CLASSES.PANEL_ACTIVE)\r\n                .addClass(CLASSES.PANEL_HIDDEN);\r\n            \r\n            forceReflow($nextPanel);\r\n            \r\n            $nextPanel.removeClass(CLASSES.PANEL_HIDDEN);\r\n            \r\n            this.state.activeIndex = i;\r\n            this.state.isTransitioning = false;\r\n        }, TRANSITION_DURATION);\r\n    }\r\n    \r\n    /**\r\n     * Change tabs orienation.\r\n     * \r\n     * @param {string} orientation 'vertical' or 'horizontal'\r\n     */\r\n    setOrientation(orientation) {\r\n        this.state.orientation = orientation;\r\n        this.elements.$list.attr('aria-orientation', orientation);\r\n    }\r\n    \r\n    /**\r\n     * Respond to window resize event.\r\n     * \r\n     * Switch between vertical orientation on mobile devices and horizontal\r\n     * orientation on larger screens.\r\n     */\r\n    static handleResize() {\r\n        const screenWidth = $(window).outerWidth() / getEmSize($('.page'));\r\n\r\n        if (!isMobile && (screenWidth < MOBILE_BREAKPOINT)) {\r\n            isMobile = true;\r\n    \r\n            tabs.forEach((tab) => tab.setOrientation('vertical'));\r\n        } else if (isMobile && (screenWidth >= MOBILE_BREAKPOINT)) {\r\n            isMobile = false;\r\n    \r\n            tabs.forEach((tab) => tab.setOrientation('horizontal'));\r\n        }\r\n    }\r\n\r\n    // ---------------------------- END PUBLIC METHODS ---------------------------\r\n}\r\n\r\n// --------------------------- END CLASS DEFINITION --------------------------- \r\n\r\n// Initialize all tab blocks on the page\r\n$(SELECTOR.BLOCK).each(function() {\r\n    new Tabs($(this));\r\n});\r\n\r\n$(window).resize(debounce(Tabs.handleResize, RESIZE_INTERVAL));\r\n\r\n// Process the initial window size\r\nTabs.handleResize();\r\n\r\nexport default Tabs;\r\n","/**\r\n * @file Implementation of the accordion gallery block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport { getEmSize, debounce } from '../../../js/util/index';\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES -------------------------- \r\n\r\n// Block name\r\nconst BLOCK = 'accordion-gallery';\r\n\r\n// Element selectors\r\nconst SELECTORS = {\r\n    BLOCK: `.${BLOCK}`,\r\n    THUMB: `.${BLOCK}__thumb`,\r\n    IMAGE: `.${BLOCK}__thumb-img`,\r\n};\r\n\r\n// Element class names\r\nconst CLASSES = {\r\n    LIGHTBOX: 'lightbox',\r\n};\r\n\r\nconst MOBILE_BREAKPOINT = 48;   // Mobile breakpoint (in ems)\r\nconst THUMB_MIN_HEIGHT = 100;   // Collapsed thumbnail height (in pixels)\r\nconst RESIZE_INTERVAL = 200;    // Resize event debounce interval\r\n\r\nlet isMobile = true;        // Is mobile layout active?\r\nconst allGalleries = [];    // All galleries on the page\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// -------------------------- BEGIN CLASS DEFINITION -------------------------- \r\n\r\n/**\r\n * Interactive image gallery that auto expands on mouse hover and focus just\r\n * like an accordion.\r\n */\r\nclass AccordionGallery {\r\n\r\n    /**\r\n     * Initialize the accordion gallery\r\n     * \r\n     * @param {JQuery} $root The root element\r\n     */\r\n    constructor($root) {\r\n        const $thumbs = $(SELECTORS.THUMB, $root);\r\n\r\n        this.elements = { $root, $thumbs };\r\n\r\n        this.config = {\r\n            collapsedThumbWidth: `${100 / $thumbs.length}%`,\r\n            collapsedThumbHeight: THUMB_MIN_HEIGHT,\r\n        };\r\n\r\n        this.state = {\r\n            isVertical: true,\r\n        };\r\n\r\n        this.handleThumbActivate = this.handleThumbActivate.bind(this);\r\n        this.handleThumbDeactivate = this.handleThumbDeactivate.bind(this);\r\n\r\n        $root.on('mouseenter', SELECTORS.THUMB, this.handleThumbActivate);\r\n        $root.on('focus', SELECTORS.THUMB, this.handleThumbActivate);\r\n        $root.on('mouseleave', SELECTORS.THUMB, this.handleThumbDeactivate);\r\n        $root.on('blur', SELECTORS.THUMB, this.handleThumbDeactivate);\r\n\r\n        // Each image acts as a thumbnail for gallery managed by the\r\n        // magnific-popup jQuery plugin\r\n        $root.magnificPopup({\r\n            delegate: SELECTORS.THUMB,\r\n            mainClass: CLASSES.LIGHTBOX,\r\n\r\n            gallery: {\r\n                enabled: true,\r\n                tCounter: '',\r\n            },\r\n\r\n            closeMarkup: `\r\n                <button aria-label=\"Close\" type=\"button\" class=\"mfp-close\">\r\n                    &#215;\r\n                </button>\r\n            `,\r\n            arrowMarkup: `\r\n                <button \r\n                    aria-label=\"%title%\"\r\n                    type=\"button\"\r\n                    class=\"mfp-arrow mfp-arrow-%dir%\"\r\n                >\r\n                </button>\r\n            `,\r\n\r\n            callbacks: {\r\n                beforeOpen() {\r\n                    // Add role and label attributes for accessibility purposes\r\n                    this.wrap.attr({\r\n                        'role': 'dialog',\r\n                        'aria-label': 'Gallery',\r\n                    });\r\n                },\r\n            },\r\n        });\r\n\r\n        // Keep track of all gallery objects to use a single window resize\r\n        // event handler for them all\r\n        allGalleries.push(this);\r\n    }\r\n\r\n    // -------------------------- BEGIN EVENT HANDLERS ------------------------\r\n\r\n    /**\r\n     * Handle the thumbnail activate event\r\n     * \r\n     * @param {jQuery.Event} e The event object\r\n     */\r\n    handleThumbActivate(e) {\r\n        const $thumb = $(e.currentTarget);\r\n        const $image = $(SELECTORS.IMAGE, $thumb);\r\n\r\n        // Expand the thumb to show the full image\r\n        if (this.state.isVertical) {\r\n            $thumb.height($image.height());\r\n        } else {\r\n            $thumb.width($image.width());\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Handle the thumbnail deactivate event\r\n     * \r\n     * @param {jQuery.Event} e The event object\r\n     */\r\n    handleThumbDeactivate(e) {\r\n        const $thumb = $(e.currentTarget);\r\n\r\n        // Restore thumb dimensions\r\n        if (this.state.isVertical) {\r\n            $thumb.height(this.config.collapsedThumbHeight);\r\n        } else {\r\n            $thumb.width(this.config.collapsedThumbWidth);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Respond to window resize event.\r\n     * \r\n     * Switch between vertical orientation on mobile devices and horizontal\r\n     * orientation on larger screens.\r\n     */\r\n    static handleWindowResize() {\r\n        const screenWidthEms = $(window).outerWidth() / getEmSize($('.page'));\r\n\r\n        if (!isMobile && (screenWidthEms < MOBILE_BREAKPOINT)) {\r\n            isMobile = true;\r\n    \r\n            allGalleries.forEach((gallery) => gallery.setVertical(true));\r\n        } else if (isMobile && (screenWidthEms >= MOBILE_BREAKPOINT)) {\r\n            isMobile = false;\r\n    \r\n            allGalleries.forEach((gallery) => gallery.setVertical(false));\r\n        }\r\n    }\r\n\r\n    // --------------------------- END EVENT HANDLERS -------------------------\r\n\r\n    // -------------------------- BEGIN PUBLIC METHODS ------------------------\r\n\r\n    /**\r\n     * Switch gallery orientation.\r\n     * \r\n     * @param {boolean} vertical\r\n     *      true for vertical orientation, false for horizontal orientation\r\n     */\r\n    setVertical(vertical) {\r\n        this.state.isVertical = vertical;\r\n\r\n        this.elements.$thumbs\r\n            .height(vertical ? this.config.collapsedThumbHeight : '')\r\n            .width(vertical ? '' : this.config.collapsedThumbWidth);\r\n    }\r\n\r\n    // --------------------------- END PUBLIC METHODS -------------------------\r\n}\r\n\r\n// --------------------------- END CLASS DEFINITION --------------------------- \r\n\r\n// Initialize all accordion galleries on the page\r\n$(SELECTORS.BLOCK).map(function() {\r\n    new AccordionGallery($(this));\r\n});\r\n\r\n$(window).resize(debounce(\r\n    AccordionGallery.handleWindowResize,\r\n    RESIZE_INTERVAL\r\n));\r\n\r\n// Process initial window size\r\nAccordionGallery.handleWindowResize();\r\n\r\nexport default AccordionGallery;\r\n","/**\r\n * @file Implementation of the post gallery block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport { getEmSize } from '../../../js/util/index';\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\n// Block name\r\nconst BLOCK = 'post-gallery';\r\n\r\n// Element selectors\r\nconst SELECTORS = {\r\n    BLOCK: `.${BLOCK}`,\r\n    CONTAINER: `.${BLOCK}__container`,\r\n    SLIDE: `.${BLOCK}__slide`,\r\n    ARROW_PREV: `.${BLOCK}__arrow_dir_prev`,\r\n    ARROW_NEXT: `.${BLOCK}__arrow_dir_next`,\r\n};\r\n\r\nconst DESKTOP_BREAKPOINT = 62;  // Desktop screen breakpoint (in ems)\r\nconst SLIDING_SPEED = 250;      // Slide switch speed (in ms)\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// -------------------------- BEGIN CLASS DEFINITION -------------------------- \r\n\r\n/**\r\n * In-post image gallery\r\n */\r\nclass PostGallery {\r\n\r\n    /**\r\n     * Initialize the blog gallery block\r\n     * \r\n     * @param {JQuery} $root The root block element\r\n     */\r\n    constructor($root) {\r\n        const pageEmSize = getEmSize($('.page'));\r\n\r\n        $(SELECTORS.CONTAINER, $root).slick({\r\n            rows: 0,\r\n            slide: SELECTORS.SLIDE,\r\n\r\n            prevArrow: SELECTORS.ARROW_PREV,\r\n            nextArrow: SELECTORS.ARROW_NEXT,\r\n            dots: false,\r\n\r\n            speed: SLIDING_SPEED,\r\n            cssEase: 'linear',\r\n            zIndex: 1,\r\n\r\n            responsive: [{\r\n                breakpoint: DESKTOP_BREAKPOINT * pageEmSize,\r\n                settings: {\r\n                    dots: true\r\n                },\r\n            }],\r\n        });\r\n    }\r\n\r\n}\r\n\r\n// --------------------------- END CLASS DEFINITION --------------------------- \r\n\r\n// Initialize all carousel blocks on the page\r\n$(SELECTORS.BLOCK).each(function() {\r\n    new PostGallery($(this));\r\n});\r\n\r\nexport default PostGallery;\r\n","/**\r\n * Implementation of the share dropdown menu block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport DropdownStrategy from '../../../js/util/dropdown-strategy';\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\n// Block name\r\nconst BLOCK = 'share';\r\n\r\n// Element selectors\r\nconst SELECTORS = {\r\n    BLOCK: `.${BLOCK}`,\r\n    TRIGGER: `.${BLOCK}__trigger`,\r\n    DRAWER: `.${BLOCK}__drawer`,\r\n};\r\n\r\n// Element class names\r\nconst CLASSES = {\r\n    DRAWER_EXPANDED: `${BLOCK}__drawer_expanded`,\r\n};\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// -------------------------- BEGIN PRIVATE METHODS ---------------------------\r\n\r\n/**\r\n * Initialize the share dropdown menu block.\r\n */\r\nfunction initBlock() {\r\n    const $share = $(SELECTORS.BLOCK);\r\n    if ($share.length === 0) {\r\n        return;\r\n    }\r\n\r\n    const $trigger = $(SELECTORS.TRIGGER, $share);\r\n    const $drawer = $(SELECTORS.DRAWER, $share);\r\n\r\n    const dropdown = new DropdownStrategy({\r\n        $root: $share,\r\n        $trigger,\r\n        $drawer,\r\n\r\n        onExpand() {\r\n            $drawer.addClass(CLASSES.DRAWER_EXPANDED);\r\n        },\r\n\r\n        onCollapse() {\r\n            $drawer.removeClass(CLASSES.DRAWER_EXPANDED);\r\n        }\r\n    });\r\n\r\n    dropdown.activate();\r\n}\r\n\r\n// --------------------------- END PRIVATE METHODS ----------------------------\r\n\r\ninitBlock();\r\n","/**\r\n * @file Implementation of the video block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\n// Block name\r\nconst BLOCK = 'video';\r\n\r\n// Element selectors\r\nconst SELECTORS = {\r\n    BLOCK: `.${BLOCK}`,\r\n    PLACEHOLDER: `.${BLOCK}__placeholder`,\r\n};\r\n\r\n// Element class names\r\nconst CLASSES = {\r\n    CONTAINER: `${BLOCK}__container`,\r\n    FRAME: `${BLOCK}__frame`,\r\n};\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// -------------------------- BEGIN CLASS DEFINITION -------------------------- \r\n\r\n/**\r\n * Iframe-based video block with lazy-loading functionality.\r\n */\r\nclass Video {\r\n\r\n    /**\r\n     * Initialize the video block\r\n     * \r\n     * @param {JQuery} $root The block's root element\r\n     */\r\n    constructor($root) {\r\n        const $placeholder = $(SELECTORS.PLACEHOLDER, $root);\r\n\r\n        this.elements = { $placeholder };\r\n        this.config = $root.data();\r\n\r\n        $placeholder.click(this.load.bind(this));\r\n    }\r\n\r\n    // ------------------------ BEGIN PRIVATE METHODS -------------------------\r\n\r\n    /**\r\n     * Replace the placeholder image with a frame containing the video.\r\n     */\r\n    load() {\r\n        const { $placeholder } = this.elements;\r\n        const { url, format } = this.config;\r\n\r\n        const $container = $('<div></div>')\r\n            .addClass(CLASSES.CONTAINER)\r\n            .addClass(CLASSES.CONTAINER + '_format_' + format);\r\n\r\n        const $frame = $('<iframe></iframe>', {\r\n            src: url,\r\n            frameborder: '0',\r\n            allowfullscreen: true,\r\n        }).addClass(CLASSES.FRAME);\r\n\r\n        $container\r\n            .append($frame)\r\n            .replaceAll($placeholder);\r\n    }\r\n\r\n    // ------------------------- END PRIVATE METHODS --------------------------\r\n}\r\n\r\n// --------------------------- END CLASS DEFINITION --------------------------- \r\n\r\n// Initialize all video blocks on the page\r\n$(SELECTORS.BLOCK).each(function() {\r\n    new Video($(this));\r\n});\r\n\r\nexport default Video;\r\n","/**\r\n * @file Implementation of the contact form block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\n// Block name\r\nconst BLOCK = 'contact-form';\r\n\r\n// Element selectors\r\nconst SELECTORS = {\r\n    BLOCK: `.${BLOCK}`,\r\n};\r\n\r\n// Element class names\r\nconst CLASSES = {\r\n    ERROR: 'error form__error',\r\n    INPUT: 'input',\r\n    INPUT_INVALID: 'input_invalid',\r\n    TEXTAREA: 'text-area',\r\n    TEXTAREA_INVALID: 'text-area_invalid',\r\n};\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// ------------------------- BEGIN UTILITY FUNCTIONS --------------------------\r\n\r\n/**\r\n * Given the input element, get a classname containing the invalid modifier\r\n * \r\n * @param {JQuery} $element The input element\r\n */\r\nfunction getInvalidClassName($element) {\r\n    if ($element.hasClass(CLASSES.INPUT)) {\r\n        return CLASSES.INPUT_INVALID;\r\n    } else if ($element.hasClass(CLASSES.TEXTAREA)) {\r\n        return CLASSES.TEXTAREA_INVALID;\r\n    }\r\n}\r\n\r\n// -------------------------- END UTILITY FUNCTIONS ---------------------------\r\n\r\n// -------------------------- BEGIN CLASS DEFINITION -------------------------- \r\n\r\n/**\r\n * Contact form block implementation\r\n */\r\nclass ContactForm {\r\n\r\n    /**\r\n     * Create contact form\r\n     * \r\n     * @param {JQuery} $root The block root element\r\n     */\r\n    constructor($root) {\r\n        $root.validate({\r\n            errorClass: CLASSES.ERROR,\r\n    \r\n            highlight(element) {\r\n                $(element).addClass(function() {\r\n                    return getInvalidClassName($(this));\r\n                });\r\n            },\r\n    \r\n            unhighlight(element) {\r\n                $(element).removeClass(function() {\r\n                    return getInvalidClassName($(this));\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n}\r\n\r\n// --------------------------- END CLASS DEFINITION --------------------------- \r\n\r\n// Initialize all contact form blocks on the page\r\n$(SELECTORS.BLOCK).each(function() {\r\n    new ContactForm($(this));\r\n});\r\n\r\nexport default ContactForm;\r\n","/**\r\n * @file Implementation of the location map block\r\n * @author Andrey Glotov\r\n */\r\n\r\n/* global L */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\n// Block name\r\nconst BLOCK = 'location-map';\r\n\r\n// Element selectors\r\nconst SELECTORS = {\r\n    BLOCK: `.${BLOCK}`,\r\n    CONTAINER: `.${BLOCK}__container`,\r\n};\r\n\r\nconst markerIcon = L.icon({\r\n    iconUrl: 'img/map-marker.svg',\r\n    iconSize: [ 35, 53 ], \r\n    iconAnchor: [ 18, 53 ],\r\n});\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// -------------------------- BEGIN CLASS DEFINITION -------------------------- \r\n\r\n/**\r\n * Location Map block implementation.\r\n */\r\nclass LocationMap {\r\n\r\n    /**\r\n     * Create location map\r\n     * \r\n     * @param {JQuery} $root The root element\r\n     */\r\n    constructor($root) {\r\n        const { latlng, zoom } = $root.data('map');\r\n\r\n        const $container = $(SELECTORS.CONTAINER, $root);\r\n\r\n        const map = L.map($container.get(0), {\r\n            scrollWheelZoom: false,\r\n        }).setView(latlng, zoom);\r\n\r\n        L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {\r\n            attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy; <a href=\"https://carto.com/attributions\">CARTO</a>',\r\n            subdomains: 'abcd',\r\n            maxZoom: 19,\r\n        }).addTo(map);\r\n\r\n        L.marker(latlng, {\r\n            icon: markerIcon\r\n        }).addTo(map);\r\n\r\n        map.on('focus', this.handleMapFocus.bind(this));\r\n        map.on('blur', this.handleMapBlur.bind(this));\r\n\r\n        this.map = map;\r\n    }\r\n\r\n    // -------------------------- BEGIN EVENT HANDLERS ------------------------\r\n\r\n    /**\r\n     * Handle map focus event\r\n     */\r\n    handleMapFocus() {\r\n        this.map.scrollWheelZoom.enable();\r\n    }\r\n\r\n    /**\r\n     * Handle map blur event\r\n     */\r\n    handleMapBlur() {\r\n        this.map.scrollWheelZoom.disable();\r\n    }\r\n\r\n    // --------------------------- END EVENT HANDLERS -------------------------\r\n}\r\n\r\n// --------------------------- END CLASS DEFINITION --------------------------- \r\n\r\n// Initialize all location map blocks on the page\r\n$(SELECTORS.BLOCK).each(function() {\r\n    new LocationMap($(this));\r\n});\r\n\r\nexport default LocationMap;\r\n","/**\r\n * @file Implementation of the menu block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\n// Block name\r\nconst BLOCK = 'menu';\r\n\r\n// Element selectors\r\nconst SELECTORS = {\r\n    BLOCK: `.${BLOCK}`,\r\n    PRODUCT_LINK: '.menu-product__link',\r\n};\r\n\r\n// Element class names\r\nconst CLASSES = {\r\n    LIGHTBOX: 'lightbox',\r\n};\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// -------------------------- BEGIN CLASS DEFINITION -------------------------- \r\n\r\n/**\r\n * Product menu with product image gallery\r\n */\r\nclass Menu {\r\n\r\n    /**\r\n     * Initialize the menu block\r\n     * \r\n     * @param {JQuery} $root The root element\r\n     */\r\n    constructor($root) {\r\n        $root.magnificPopup({\r\n            delegate: SELECTORS.PRODUCT_LINK,\r\n            mainClass: CLASSES.LIGHTBOX,\r\n            type: 'image',\r\n    \r\n            closeMarkup: `\r\n                <button aria-label=\"Close\" type=\"button\" class=\"mfp-close\">\r\n                    &#215;\r\n                </button>\r\n            `,\r\n    \r\n            callbacks: {\r\n                beforeOpen() {\r\n                    // Add role and label attributes for accessibility purposes\r\n                    this.wrap.attr({\r\n                        'role': 'dialog',\r\n                        'aria-label': 'View image',\r\n                    });\r\n                },\r\n            },\r\n        });\r\n    }\r\n\r\n}\r\n\r\n// --------------------------- END CLASS DEFINITION --------------------------- \r\n\r\n// Initialize all menu blocks on the page\r\n$(SELECTORS.BLOCK).each(function() {\r\n    new Menu($(this));\r\n});\r\n\r\nexport default Menu;\r\n","/**\r\n * @file Implementation of the portfolio filter block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\n// Block name\r\nconst BLOCK = 'portfolio-filter';\r\n\r\n// Element selectors\r\nconst SELECTORS = {\r\n    BLOCK: `.${BLOCK}`,\r\n    INNER: `.${BLOCK}__inner`,\r\n    TOGGLE: `.${BLOCK}__toggle`,\r\n    LIST: `.${BLOCK}__list`,\r\n    OPTION: `.${BLOCK}__option`,\r\n};\r\n\r\n// Element class names\r\nconst CLASSES = {\r\n    LIST_VISIBLE: `${BLOCK}__list_visible`,\r\n    OPTION_HIGHLIGHTED: `${BLOCK}__option_highlighted`,\r\n};\r\n\r\n// Key codes\r\nconst KEYS = {\r\n    TAB: 9,\r\n    ENTER: 13,\r\n    ESC: 27,\r\n    SPACE: 32,\r\n    END: 35,\r\n    HOME: 36,\r\n    LEFT: 37,\r\n    UP: 38,\r\n    RIGHT: 39,\r\n    DOWN: 40,\r\n};\r\n\r\nconst elements = {};\r\nconst config = {};\r\n\r\nconst state = {\r\n    selectedIndex: 0,\r\n    highlightedIndex: 0,\r\n    isDropdown: true,\r\n    isExpanded: false,\r\n};\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// -------------------------- BEGIN PRIVATE METHODS ---------------------------\r\n\r\n/**\r\n * Expand the option list on mobile screens\r\n */\r\nfunction expandList() {\r\n    const { $toggle, $list } = elements;\r\n\r\n    $toggle.attr('aria-expanded', 'true');\r\n\r\n    $list\r\n        .addClass(CLASSES.LIST_VISIBLE)\r\n        .focus();\r\n\r\n    highlightOption(state.selectedIndex);\r\n\r\n    state.isExpanded = true;\r\n\r\n    $(document).on('click', handleOutsideClick);\r\n}\r\n\r\n/**\r\n * Collapse the option list on mobile screens\r\n */\r\nfunction collapseList() {\r\n    const { $toggle, $list } = elements;\r\n\r\n    $list.removeClass(CLASSES.LIST_VISIBLE);\r\n\r\n    $toggle.attr('aria-expanded', 'false');\r\n\r\n    state.isExpanded = false;\r\n\r\n    $(document).off('click', handleOutsideClick);\r\n}\r\n\r\n/**\r\n * Highlight the given option\r\n * \r\n * @param {number} i Index of the option to be highlighted\r\n */\r\nfunction highlightOption(i) {\r\n    const { $options } = elements;\r\n    const { highlightedIndex } = state;\r\n\r\n    if ((i < 0) || (i > $options.length) || (i === highlightedIndex)) {\r\n        return;\r\n    }\r\n    \r\n    $options.eq(highlightedIndex).removeClass(CLASSES.OPTION_HIGHLIGHTED);\r\n    $options.eq(i).addClass(CLASSES.OPTION_HIGHLIGHTED);\r\n\r\n    state.highlightedIndex = i;\r\n}\r\n\r\n/**\r\n * Select the given option\r\n * \r\n * @param {number} i Index of the option to be selected\r\n */\r\nfunction selectOption(i) {\r\n    const { $list, $options  } = elements;\r\n    \r\n    if ((i < 0) || (i > $options.length) || (i === state.selectedIndex)) {\r\n        return;\r\n    }\r\n    \r\n    $options.eq(state.selectedIndex).removeAttr('aria-selected');\r\n    $options.eq(i).attr('aria-selected', 'true');\r\n\r\n    $list.attr('aria-activedescendant', $options.eq(i).attr('id'));\r\n    state.selectedIndex = i;\r\n\r\n    highlightOption(i);\r\n\r\n    if (config.onChange) {\r\n        config.onChange($options.eq(i).data('filter'));\r\n    }\r\n}\r\n\r\n// ---------------------------- END PRIVATE METHODS ---------------------------\r\n\r\n// --------------------------- BEGIN EVENT HANDLERS ---------------------------\r\n\r\n/**\r\n * Handle the option click event\r\n * \r\n * @param {jQuery.Event} e The event object\r\n */\r\nfunction handleOptionClick(e) {\r\n    const { $toggle, $options } = elements;\r\n\r\n    const newIndex = $options.index($(e.currentTarget));\r\n    \r\n    selectOption(newIndex);\r\n\r\n    if (state.isExpanded) {\r\n        collapseList();\r\n        $toggle.focus();\r\n    }\r\n}\r\n\r\n/**\r\n * Handle the toggle button click event\r\n */\r\nfunction handleToggleClick() {\r\n    if (!state.isExpanded) {\r\n        expandList();\r\n    } else {\r\n        collapseList();\r\n    }\r\n}\r\n\r\n/**\r\n * Handle the click event outside expanded list\r\n * \r\n * @param {jQuery.Event} e The event object\r\n */\r\nfunction handleOutsideClick(e) {\r\n    const { $inner } = elements;\r\n\r\n    if (!$.contains($inner.get(0), e.target)) {\r\n        collapseList();\r\n    }\r\n}\r\n\r\n/**\r\n * Handle the options list keydown event\r\n * \r\n * @param {jQuery.Event} e The event object\r\n */\r\nfunction handleListKeyDown(e) {\r\n    const { which } = e;\r\n    const { $toggle, $options } = elements;\r\n\r\n    const { highlightedIndex, isDropdown, isExpanded } = state;\r\n\r\n    switch (which) {\r\n    case KEYS.TAB:\r\n        if (isExpanded) {\r\n            collapseList();\r\n        }\r\n        break;\r\n\r\n    case KEYS.ENTER:\r\n        selectOption(highlightedIndex);\r\n        if (isExpanded) {\r\n            collapseList();\r\n            $toggle.focus();\r\n        }\r\n        return false;\r\n\r\n    case KEYS.ESC:\r\n        if (isExpanded) {\r\n            collapseList();\r\n            $toggle.focus();\r\n        }\r\n        return false;\r\n    \r\n    case KEYS.LEFT:\r\n        if (!isDropdown && (highlightedIndex > 0)) {\r\n            highlightOption(highlightedIndex - 1);\r\n        }\r\n        return false;\r\n\r\n    case KEYS.UP:\r\n        if (isDropdown && (highlightedIndex > 0)) {\r\n            highlightOption(highlightedIndex - 1);\r\n        }\r\n        return false;\r\n        \r\n    case KEYS.RIGHT:\r\n        if (!isDropdown && (highlightedIndex < $options.length - 1)) {\r\n            highlightOption(highlightedIndex + 1);\r\n        }\r\n        return false;\r\n\r\n    case KEYS.DOWN:\r\n        if (isDropdown && (highlightedIndex < $options.length - 1)) {\r\n            highlightOption(highlightedIndex + 1);\r\n        }\r\n        return false;\r\n        \r\n    case KEYS.HOME:\r\n        highlightOption(0);\r\n        return false;\r\n        \r\n    case KEYS.END:\r\n        highlightOption($options.length - 1);\r\n        return false;\r\n    }\r\n}\r\n\r\n// ---------------------------- END EVENT HANDLERS ----------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n\r\n/**\r\n * Initialize the portfolio filter block.\r\n * \r\n * @param {function} props.onChange Change event handler\r\n */\r\nexport function initBlock({ onChange }) {\r\n    const $root = $(SELECTORS.BLOCK);\r\n    const $inner = $(SELECTORS.INNER, $root);\r\n    const $toggle = $(SELECTORS.TOGGLE, $inner);\r\n    const $list = $(SELECTORS.LIST, $inner);\r\n    const $options = $(SELECTORS.OPTION, $list);\r\n\r\n    if (onChange) {\r\n        config.onChange = onChange;\r\n    }\r\n    \r\n    elements.$inner = $inner;\r\n    elements.$toggle = $toggle;\r\n    elements.$list = $list;\r\n    elements.$options = $options;\r\n\r\n    $list.keydown(handleListKeyDown);\r\n    $list.on('click', SELECTORS.OPTION, handleOptionClick);\r\n    $toggle.click(handleToggleClick);\r\n}\r\n\r\n/**\r\n * Toggle the dropdown mode\r\n * \r\n * @param {boolean} dropdown whether to active the dropdown mode\r\n */\r\nexport function setDropdownMode(dropdown) {\r\n    if (!dropdown && state.isExpanded) {\r\n        collapseList();\r\n    }\r\n\r\n    elements.$list\r\n        .attr('aria-orientation', dropdown ? 'vertical' : 'horizontal');\r\n\r\n    state.isDropdown = dropdown;\r\n}\r\n\r\n/**\r\n * Apply a filter.\r\n * \r\n * @param {string} filter - The filter to be applied\r\n */\r\nexport function setFilter(filter) {\r\n    const sel = `${SELECTORS.OPTION}[data-filter=\"${filter}\"]`;\r\n    selectOption(elements.$options.index($(sel)));\r\n}\r\n\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the portfolio grid block\r\n * @author Andrey Glotov\r\n */\r\n\r\n/* global Shuffle */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\n// Block name\r\nconst BLOCK = 'portfolio-grid';\r\n\r\n// Element selectors\r\nconst SELECTORS = {\r\n    BLOCK: `.${BLOCK}`,\r\n    CONTAINER: `.${BLOCK}__container`,\r\n    LINK: `.${BLOCK}__link`,\r\n    IMG: `.${BLOCK}__img`,\r\n    SOURCE_WEBP: 'source[type=\"image/webp\"]',\r\n    SOURCE_JPEG: 'source[type=\"image/jpeg\"]',\r\n    CATS: `.${BLOCK}__cats`,\r\n    ITEM: `.${BLOCK}__item`,\r\n    SIZER: `.${BLOCK}__sizer`,\r\n    CAT_LINK: `.${BLOCK}__cat-link`,\r\n    OVERLAY: `.${BLOCK}__overlay`,\r\n};\r\n\r\n// Element class names\r\nconst CLASSES = {\r\n    ITEM: `${BLOCK}__item`,\r\n    ITEM_INNER: `${BLOCK}__item-inner`,\r\n    IMG: `${BLOCK}__img`,\r\n    OVERLAY: `${BLOCK}__overlay`,\r\n    TITLE: `${BLOCK}__title`,\r\n    LINK: `${BLOCK}__link`,\r\n    CATS: `${BLOCK}__cats`,\r\n    CAT_ITEM: `${BLOCK}__cat-item`,\r\n    CAT_LINK: `${BLOCK}__cat-link`,\r\n    OVERLAY_FOCUS: `${BLOCK}__overlay_has-focus`,\r\n};\r\n\r\n// JQuery elements map\r\nconst elements = {};\r\n\r\n// Block configuration\r\nconst config = {\r\n    // Template markup for portfolio items\r\n    itemHtml: `\r\n<article class=\"${CLASSES.ITEM}\">\r\n    <div class=\"${CLASSES.ITEM_INNER}\">\r\n        <picture>\r\n            <source type=\"image/webp\"></source>\r\n            <source type=\"image/jpeg\"></source>\r\n            <img class=\"${CLASSES.IMG}\" />\r\n        </picture>\r\n        <div class=\"${CLASSES.OVERLAY}\">\r\n            <h2 class=\"${CLASSES.TITLE}\">\r\n                <a class=\"${CLASSES.LINK}\"></a>\r\n            </h2>\r\n            <ul class=\"${CLASSES.CATS}\"></ul>\r\n        </div>\r\n    </div>\r\n</article>\r\n`\r\n};\r\n\r\n// Block state\r\nconst state = {\r\n    shuffleInstance: null,\r\n};\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// ----------------------------- BEGIN DOM METHODS ----------------------------\r\n\r\n/**\r\n * Create markup for the new portfolio item and add it to the grid.\r\n * \r\n * @param {object} data item data\r\n */\r\nfunction createPortfolioItem(data) {\r\n    const $item = $(config.itemHtml);\r\n\r\n    $item.attr('data-groups', `[\"${data.categories.join('\",\"')}\"]`);\r\n    \r\n    $(SELECTORS.LINK, $item)\r\n        .text(data.title)\r\n        .attr('href', data.link);\r\n\r\n    const $img = $(SELECTORS.IMG, $item)\r\n        .attr({\r\n            src : data.images.jpeg.small,\r\n            alt : data.title,\r\n        });\r\n\r\n    $img.prev(SELECTORS.SOURCE_WEBP).attr('srcset', `\r\n        ${data.images.webp.small} 1x,\r\n        ${data.images.webp.medium} 1.5x,\r\n        ${data.images.webp.large} 2x\r\n    `);\r\n\r\n    $img.prev(SELECTORS.SOURCE_JPEG).attr('srcset', `\r\n        ${data.images.jpeg.small} 1x,\r\n        ${data.images.jpeg.medium} 1.5x,\r\n        ${data.images.jpeg.large} 2x\r\n    `);\r\n\r\n    $(SELECTORS.CATS, $item).append(data.categories.map((cat) => {\r\n        return $('<li></li>')\r\n            .addClass(CLASSES.CAT_ITEM)\r\n            .append($('<a></a>')\r\n                .addClass(CLASSES.CAT_LINK)\r\n                .attr({\r\n                    'href': 'javascript:void(0)',\r\n                    'role': 'button',\r\n                    'data-filter': cat.toLowerCase(),\r\n                })\r\n                .text(cat));\r\n    }));\r\n\r\n    const $d = new $.Deferred();\r\n\r\n    $img.on('load', function() {\r\n        $d.resolve($item);\r\n    });\r\n\r\n    return $d.promise();\r\n}\r\n\r\n// ------------------------------ END DOM METHODS -----------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n\r\n/**\r\n * Initialize the portfolio grid block.\r\n * \r\n * @param {function} props.onCatLinkClick Category link click event handler\r\n */\r\nexport function initBlock({ onCatLinkClick }) {\r\n    const $root = $(SELECTORS.BLOCK);\r\n    const $container = $(SELECTORS.CONTAINER, $root);\r\n    const $sizer = $(SELECTORS.SIZER, $container);\r\n\r\n    state.shuffleInstance = new Shuffle($container.get(0), {\r\n        itemSelector: SELECTORS.ITEM,\r\n        sizer: $sizer.get(0),\r\n    });\r\n\r\n    $container\r\n        .on('click', SELECTORS.CAT_LINK, function handleCatLinkClick() {\r\n            onCatLinkClick($(this).data('filter'));\r\n        })\r\n        // Until all major browsers support the :focus-within CSS pseudo-class\r\n        // apply a focus class using JavaScript\r\n        .on({\r\n            focusin: function handleItemFocusin() {\r\n                $(this).addClass(CLASSES.OVERLAY_FOCUS);\r\n            },\r\n            focusout: function handleItemFocusout() {\r\n                $(this).removeClass(CLASSES.OVERLAY_FOCUS);\r\n            },\r\n        }, SELECTORS.OVERLAY);\r\n\r\n    elements.$root = $root;\r\n    elements.$container = $container;\r\n    elements.$sizer = $sizer;\r\n}\r\n\r\n/**\r\n * Apply a filter\r\n * \r\n * @param {string} filter - The filter to be applied\r\n */\r\nexport function setFilter(filter) {\r\n    state.shuffleInstance.filter(filter);\r\n}\r\n\r\n/**\r\n * Add new portfolio items\r\n * \r\n * @param {Array} items - the items to be added\r\n */\r\nexport function addItems(items) {\r\n    $.when(...items.map(createPortfolioItem)).then(function(...items) {\r\n        elements.$sizer.before(items);\r\n        state.shuffleInstance.add(items.map(($item) => $item.get(0)));\r\n    });\r\n}\r\n\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the portfolio block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport * as PortfolioFilter from '../portfolio-filter/portfolio-filter';\r\nimport * as PortfolioGrid   from '../portfolio-grid/portfolio-grid';\r\n\r\nimport { debounce, getEmSize } from '../../../js/util/index';\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\nconst RESIZE_INTERVAL = 200;    // Debounce interval for window resize event\r\nconst MEDIUM_BREAKPOINT = 48;   // Mobile breakpoint (in ems)\r\nconst FAKE_LOAD_TIME = 1000;    // Fake items load time (in ms)\r\n\r\n// Block name\r\nconst BLOCK = 'portfolio';\r\n\r\n// Element selectors\r\nconst SELECTORS = {\r\n    BLOCK: `.${BLOCK}`,\r\n    GRID: `.${BLOCK}__grid`,\r\n    MORE: `.${BLOCK}__more-btn`,\r\n};\r\n\r\n// Element class names\r\nconst CLASSES = {\r\n    LOADER: `loader loader_size_l ${BLOCK}__loader`,\r\n    ERROR: `error ${BLOCK}__error`,\r\n    MORE_HIDDEN: `${BLOCK}__more-btn_hidden`,\r\n};\r\n\r\n// Set of elements\r\nconst elements = {};\r\n\r\nlet activeFilter = 'all';   // Active filter\r\nlet isMobile = true;        // Is mobile layout active?\r\n\r\n// Fake portfolio items\r\n// The real data would be fetched from the server\r\nconst fakeItems = [{\r\n    title: 'Apple pie',\r\n    images: {\r\n        jpeg: {\r\n            small: 'img/content/portfolio/projects/thumbs/apple-pie-small.jpg',\r\n            medium: 'img/content/portfolio/projects/thumbs/apple-pie-medium.jpg',\r\n            large: 'img/content/portfolio/projects/thumbs/apple-pie-large.jpg',\r\n        },\r\n        webp: {\r\n            small: 'img/content/portfolio/projects/thumbs/apple-pie-small.webp',\r\n            medium: 'img/content/portfolio/projects/thumbs/apple-pie-medium.webp',\r\n            large: 'img/content/portfolio/projects/thumbs/apple-pie-large.webp',\r\n        },\r\n    },\r\n    link: 'portfolio-single.html',\r\n    categories: [ 'desserts' ],\r\n}, {\r\n    title: 'Fresh fruit cocktail',\r\n    images: {\r\n        jpeg: {\r\n            small: 'img/content/portfolio/projects/thumbs/fresh-fruit-cocktail-small.jpg',\r\n            medium: 'img/content/portfolio/projects/thumbs/fresh-fruit-cocktail-medium.jpg',\r\n            large: 'img/content/portfolio/projects/thumbs/fresh-fruit-cocktail-large.jpg',\r\n        },\r\n        webp: {\r\n            small: 'img/content/portfolio/projects/thumbs/fresh-fruit-cocktail-small.webp',\r\n            medium: 'img/content/portfolio/projects/thumbs/fresh-fruit-cocktail-medium.webp',\r\n            large: 'img/content/portfolio/projects/thumbs/fresh-fruit-cocktail-large.webp',\r\n        },\r\n    },\r\n    link: 'portfolio-single.html',\r\n    categories: [ 'drinks' ],\r\n}, {\r\n    title: 'Green tea',\r\n    images: {\r\n        jpeg: {\r\n            small: 'img/content/portfolio/projects/thumbs/green-tea-small.jpg',\r\n            medium: 'img/content/portfolio/projects/thumbs/green-tea-medium.jpg',\r\n            large: 'img/content/portfolio/projects/thumbs/green-tea-large.jpg',\r\n        },\r\n        webp: {\r\n            small: 'img/content/portfolio/projects/thumbs/green-tea-small.webp',\r\n            medium: 'img/content/portfolio/projects/thumbs/green-tea-medium.webp',\r\n            large: 'img/content/portfolio/projects/thumbs/green-tea-large.webp',\r\n        },\r\n    },\r\n    link: 'portfolio-single.html',\r\n    categories: [ 'drinks' ],\r\n}, {\r\n    title: 'Waffles with coffee',\r\n    images: {\r\n        jpeg: {\r\n            small: 'img/content/portfolio/projects/thumbs/waffles-with-coffee-small.jpg',\r\n            medium: 'img/content/portfolio/projects/thumbs/waffles-with-coffee-medium.jpg',\r\n            large: 'img/content/portfolio/projects/thumbs/waffles-with-coffee-large.jpg',\r\n        },\r\n        webp: {\r\n            small: 'img/content/portfolio/projects/thumbs/waffles-with-coffee-small.webp',\r\n            medium: 'img/content/portfolio/projects/thumbs/waffles-with-coffee-medium.webp',\r\n            large: 'img/content/portfolio/projects/thumbs/waffles-with-coffee-large.webp',\r\n        }\r\n    },\r\n    link: 'portfolio-single.html',\r\n    categories: [ 'desserts', 'drinks' ],\r\n}, {\r\n    title: 'Chicken livers',\r\n    images: {\r\n        jpeg: {\r\n            small: 'img/content/portfolio/projects/thumbs/chicken-livers-small.jpg',\r\n            medium: 'img/content/portfolio/projects/thumbs/chicken-livers-medium.jpg',\r\n            large: 'img/content/portfolio/projects/thumbs/chicken-livers-large.jpg',\r\n        },\r\n        webp: {\r\n            small: 'img/content/portfolio/projects/thumbs/chicken-livers-small.webp',\r\n            medium: 'img/content/portfolio/projects/thumbs/chicken-livers-medium.webp',\r\n            large: 'img/content/portfolio/projects/thumbs/chicken-livers-large.webp',\r\n        },\r\n    },\r\n    link: 'portfolio-single.html',\r\n    categories: [ 'lunch' ],\r\n}];\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// -------------------------- BEGIN UTILITY FUNCTIONS -------------------------\r\n\r\n/**\r\n * Simulate AJAX request to retrieve more items.\r\n * Replace this function with actual code.\r\n * \r\n * @return {JQuery.Promise} The promise which resolves when the items are loaded\r\n */\r\nfunction loadFakeItems() {\r\n    const $d = new $.Deferred();\r\n\r\n    setTimeout(() => {\r\n        $d.resolve({\r\n            items: fakeItems,\r\n            more: false,\r\n        }); \r\n    }, FAKE_LOAD_TIME);\r\n\r\n    return $d.promise();\r\n}\r\n\r\n// --------------------------- END UTILITY FUNCTIONS --------------------------\r\n\r\n// --------------------------- BEGIN EVENT HANDLERS ---------------------------\r\n\r\n/**\r\n * Handle the filter change event.\r\n * \r\n * @param {JQuery.Event} e The event object\r\n * @param {string} filter The name of the selected category\r\n */\r\nfunction handleFilterChange(filter) {\r\n    if (activeFilter !== filter) {\r\n        activeFilter = filter;\r\n\r\n        PortfolioFilter.setFilter(filter);\r\n        PortfolioGrid.setFilter(filter);\r\n    }\r\n}\r\n\r\n/**\r\n * Handle more button click event.\r\n */\r\nfunction handleMoreBtnClick() {\r\n    const { $grid, $moreBtn } = elements;\r\n\r\n    $grid.attr('aria-busy', 'true');\r\n\r\n    // Show a loader\r\n    const $loader = $('<div></div>')\r\n        .addClass(CLASSES.LOADER)\r\n        .insertAfter($moreBtn);\r\n\r\n    // Hide the button\r\n    $moreBtn.addClass(CLASSES.MORE_HIDDEN);\r\n\r\n    loadFakeItems()\r\n        .then((data) => {\r\n            PortfolioGrid.addItems(data.items);\r\n\r\n            // If there are more items available, show the button again\r\n            if (data.more) {\r\n                $moreBtn.removeClass(CLASSES.MORE_HIDDEN);\r\n            }\r\n        })\r\n        .fail(() => {\r\n            // Display an error message\r\n            $('<div></div>')\r\n                .addClass(CLASSES.ERROR)\r\n                .text('An error occured')\r\n                .insertAfter($loader);\r\n        })\r\n        .always(() => {\r\n            $grid.attr('aria-busy', 'false');\r\n            $loader.remove();\r\n        });\r\n}\r\n\r\n/**\r\n * Respond to window resize event.\r\n */\r\nfunction handleWindowResize() {\r\n    const screenWidth = $(window).outerWidth() / getEmSize($('.page'));\r\n    \r\n    // Switch listbox orientation to vertical on mobile and to horizontal on\r\n    // larger screens.\r\n    if (!isMobile && (screenWidth < MEDIUM_BREAKPOINT)) {\r\n        isMobile = true;\r\n\r\n        PortfolioFilter.setDropdownMode(true);\r\n    } else if (isMobile && (screenWidth >= MEDIUM_BREAKPOINT)) {\r\n        isMobile = false;\r\n\r\n        PortfolioFilter.setDropdownMode(false);\r\n    }\r\n}\r\n\r\n// ---------------------------- END EVENT HANDLERS ----------------------------\r\n\r\n// --------------------------- BEGIN PRIVATE METHODS --------------------------\r\n\r\n/**\r\n * Initialize the portfolio block.\r\n */\r\nfunction initBlock() {\r\n    const $portfolio = $(SELECTORS.BLOCK);\r\n    if ($portfolio.length == 0) {\r\n        return;\r\n    }\r\n\r\n    elements.$portfolio = $portfolio;\r\n    elements.$grid = $(SELECTORS.GRID, $portfolio);\r\n    elements.$moreBtn = $(SELECTORS.MORE, $portfolio);\r\n\r\n    // Initialize child blocks\r\n    PortfolioFilter.initBlock({ onChange: handleFilterChange });\r\n    PortfolioGrid.initBlock({ onCatLinkClick: handleFilterChange });\r\n\r\n    elements.$moreBtn.click(handleMoreBtnClick);\r\n\r\n    $(window).resize(debounce(handleWindowResize, RESIZE_INTERVAL));\r\n\r\n    // Process initial window size\r\n    handleWindowResize();\r\n}\r\n\r\n// ---------------------------- END PRIVATE METHODS ---------------------------\r\n\r\ninitBlock();\r\n","/**\r\n * @file Implementation of the checkout page block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport Select from '../../common/select/select';\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\n// Block name\r\nconst BLOCK = 'checkout';\r\n\r\n// Element selectors\r\nconst SELECTORS = {\r\n    BLOCK: `.${BLOCK}`,\r\n    SELECT: `.${BLOCK}__select`,\r\n    CHECKBOX: `.${BLOCK}__checkbox`,\r\n    INPUT_HIDDEN: '.form__input:hidden',\r\n    PAYMENTS: `.${BLOCK}__payments`,\r\n};\r\n\r\n// Element class names\r\nconst CLASSES = {\r\n    ERROR: 'error form__error',\r\n    INPUT: 'input',\r\n    INPUT_INVALID: 'input_invalid',\r\n    TEXTAREA: 'text-area',\r\n    TEXTAREA_INVALID: 'text-area_invalid',\r\n};\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// ------------------------- BEGIN UTILITY FUNCTIONS --------------------------\r\n\r\n/**\r\n * Given the input element, get a classname containing the invalid modifier\r\n * \r\n * @param {JQuery} $element The input element\r\n */\r\nfunction getInvalidClassName($element) {\r\n    if ($element.hasClass(CLASSES.INPUT)) {\r\n        return CLASSES.INPUT_INVALID;\r\n    } else if ($element.hasClass(CLASSES.TEXTAREA)) {\r\n        return CLASSES.TEXTAREA_INVALID;\r\n    }\r\n}\r\n\r\n// -------------------------- END UTILITY FUNCTIONS ---------------------------\r\n\r\n// --------------------------- BEGIN EVENT HANDLERS ---------------------------\r\n\r\n/**\r\n * Handle change events on checkboxes.\r\n * Toggle the corresponding form section.\r\n */\r\nconst handleCheckboxChange = function() {\r\n    const $target = $('#' + $(this).data('toggle'));\r\n    $target.slideToggle();\r\n};\r\n\r\n// ---------------------------- END EVENT HANDLERS ----------------------------\r\n\r\n// --------------------------- BEGIN PRIVATE METHODS --------------------------\r\n\r\n/**\r\n * Initialize the checkout block.\r\n */\r\nfunction initBlock() {\r\n    const $form = $(SELECTORS.BLOCK);\r\n    if ($form.length == 0) {\r\n        return;\r\n    }\r\n\r\n    $(SELECTORS.SELECT, $form).each(function() {\r\n        new Select($(this), { theme: 'checkout' });\r\n    });\r\n\r\n    $('#shipping-fields', $form).hide();\r\n\r\n    $(SELECTORS.CHECKBOX, $form).change(handleCheckboxChange);\r\n\r\n    $form.validate({\r\n        errorClass: CLASSES.ERROR,\r\n        ignore: SELECTORS.INPUT_HIDDEN,\r\n    \r\n        highlight(element) {\r\n            $(element).addClass(getInvalidClassName($(element)));\r\n        },\r\n    \r\n        unhighlight(element) {\r\n            $(element).removeClass(getInvalidClassName($(element)));\r\n        },\r\n    \r\n        errorPlacement($error, $element) {\r\n            if ($element.attr('name') === 'payment') {\r\n                $element\r\n                    .closest(SELECTORS.PAYMENTS)\r\n                    .prepend($error);\r\n            } else {\r\n                $error.insertAfter($element);\r\n            }\r\n        },\r\n    \r\n        messages: {\r\n            payment: 'Please select a payment method',\r\n        },\r\n    });\r\n}\r\n\r\n// ---------------------------- END PRIVATE METHODS ---------------------------\r\n\r\ninitBlock();","/**\r\n * @file Implementation of the product gallery block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport { getEmSize } from '../../../js/util/index';\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\nconst BLOCK = 'product-gallery';\r\n\r\nconst SELECTORS = {\r\n    BLOCK: `.${BLOCK}`,\r\n    CONTAINER: `.${BLOCK}__container`,\r\n    NAV: `.${BLOCK}__nav`,\r\n    SLIDE: `.${BLOCK}__slide`,\r\n    THUMB: `.${BLOCK}__thumb`,\r\n    PAGE: '.page',\r\n};\r\n\r\nconst SLIDE_SPEED = 400;        // Sliding speed (in ms)\r\nconst MOBILE_BREAKPOINT = 30;   // Max mobile screen size (in ems)\r\nconst TABLET_BREAKPOINT = 48;   // Max tablet screen size (in ems)\r\nconst LAPTOP_BREAKPOINT = 62;   // Max laptop screen size (in ems)\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// --------------------------- BEGIN PRIVATE METHODS --------------------------\r\n\r\n/**\r\n * Initialize the product gallery block.\r\n */\r\nfunction initBlock() {\r\n    const $gallery = $(SELECTORS.BLOCK);\r\n    if ($gallery.length == 0) { \r\n        return;\r\n    }\r\n\r\n    const pageEmSize = getEmSize($(SELECTORS.PAGE));\r\n\r\n    const $container = $(SELECTORS.CONTAINER, $gallery);\r\n    const $nav = $(SELECTORS.NAV, $gallery);\r\n\r\n    // Initialize the main photo slider \r\n    $container.slick({\r\n        rows: 0,\r\n        slide: SELECTORS.SLIDE,\r\n\r\n        arrows: false,\r\n        dots: false,\r\n\r\n        fade: true,\r\n        speed: SLIDE_SPEED,\r\n        zIndex: 1,\r\n\r\n        responsive: [{\r\n            breakpoint: MOBILE_BREAKPOINT * pageEmSize,\r\n            settings: {\r\n                dots: true\r\n            }\r\n        }],\r\n\r\n        asNavFor: $nav,\r\n    });\r\n\r\n    // Initialize the thumb slider\r\n    $nav.slick({\r\n        rows: 0,\r\n        slide: SELECTORS.THUMB,\r\n\r\n        focusOnSelect: true,\r\n        slidesToShow: 4,\r\n        slidesToScroll: 1,\r\n        vertical: true,\r\n        verticalSwiping: true,\r\n\r\n        zIndex: 1,\r\n\r\n        arrows: false,\r\n        dots: false,\r\n\r\n        responsive: [{\r\n            breakpoint: LAPTOP_BREAKPOINT * pageEmSize,\r\n            settings: {\r\n                slidesToShow: 3,\r\n            }\r\n        }, {\r\n            breakpoint: TABLET_BREAKPOINT * pageEmSize,\r\n            settings: {\r\n                slidesToShow: 4,\r\n            }\r\n        }, {\r\n            breakpoint: MOBILE_BREAKPOINT * pageEmSize,\r\n            settings: {\r\n                slidesToShow: 3,\r\n            }\r\n        }],\r\n\r\n        asNavFor: $container,\r\n    });\r\n}\r\n\r\n// ---------------------------- END PRIVATE METHODS ---------------------------\r\n\r\ninitBlock();\r\n","/**\r\n * @file Implementation of the shipping calculator block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport Select from '../../common/select/select';\r\n\r\nimport { forceReflow } from '../../../js/util/index';\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\n// Block name\r\nconst BLOCK = 'shipping-calc';\r\n\r\n// Element selectors\r\nconst SELECTORS = {\r\n    BLOCK: `.${BLOCK}`,\r\n    TOGGLE: `.${BLOCK}__toggle`,\r\n    FORM: `.${BLOCK}__form`,\r\n    COUNTRY: `.${BLOCK}__country`,\r\n    FIELD: `.${BLOCK}__field`,\r\n};\r\n\r\n// Element class names\r\nconst CLASSES = {\r\n    FORM_ANIMATED: `${BLOCK}__form_animated`,\r\n    FORM_EXPANDED: `${BLOCK}__form_expanded`,\r\n    ERROR: `error ${BLOCK}__error`,\r\n    INPUT: 'input',\r\n    INPUT_INVALID: 'input_invalid',\r\n};\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// --------------------------- BEGIN PRIVATE METHODS --------------------------\r\n\r\n/**\r\n * Initialize the shipping calculator block.\r\n */\r\nfunction initBlock() {\r\n    const $calc = $(SELECTORS.BLOCK);\r\n    if ($calc.length == 0) {\r\n        return;\r\n    }\r\n\r\n    const $toggle = $(SELECTORS.TOGGLE, $calc);\r\n    const $form = $(SELECTORS.FORM, $calc);\r\n    const $country = $(SELECTORS.COUNTRY, $calc);\r\n\r\n    let formExpanded = false;\r\n    $toggle.click(function handleShippingCalcToggle() {\r\n        formExpanded = !formExpanded;\r\n\r\n        if (!formExpanded) {\r\n            $form.addClass(CLASSES.FORM_ANIMATED);\r\n\r\n            const startHeight = $form.innerHeight();\r\n            $form.css('height', startHeight);\r\n            forceReflow($form);\r\n            $form.css('height', 0);\r\n\r\n            setTimeout(() => {\r\n                $form\r\n                    .css('height', '')\r\n                    .removeClass(CLASSES.FORM_ANIMATED)\r\n                    .removeClass(CLASSES.FORM_EXPANDED);\r\n            }, 250);\r\n        } else {\r\n            $form\r\n                .addClass(CLASSES.FORM_ANIMATED)\r\n                .addClass(CLASSES.FORM_EXPANDED);\r\n            \r\n            const targetHeight = $form.innerHeight();\r\n            $form.css('height', 0);\r\n            forceReflow($form);\r\n            $form.css('height', targetHeight);\r\n\r\n            setTimeout(() => {\r\n                $form\r\n                    .css('height', '')\r\n                    .removeClass(CLASSES.FORM_ANIMATED);\r\n            }, 250);\r\n        }\r\n\r\n        $toggle.attr('aria-expanded', String(formExpanded));\r\n    });\r\n    \r\n    const countrySelect = new Select($country, { theme: 'small' });\r\n\r\n    $form.validate({\r\n        errorClass: CLASSES.ERROR,\r\n\r\n        rules: {\r\n            calc_shipping_country: {\r\n                required: true,\r\n            }\r\n        },\r\n\r\n        errorPlacement($error, $element) {\r\n            $error.appendTo($element.closest(SELECTORS.FIELD));\r\n        },\r\n    \r\n        highlight(element) {\r\n            if ($(element).hasClass(CLASSES.INPUT)) {\r\n                $(element).addClass(CLASSES.INPUT_INVALID);\r\n            } else if ($(element).is($country)) {\r\n                countrySelect.setError(true);\r\n            }\r\n        },\r\n    \r\n        unhighlight(element) {\r\n            if ($(element).hasClass(CLASSES.INPUT)) {\r\n                $(element).removeClass(CLASSES.INPUT_INVALID);\r\n            } else if ($(element).is($country)) {\r\n                countrySelect.setError(false);\r\n            }\r\n        }\r\n    });\r\n\r\n    $country.on('change', function handleCountryChange() {\r\n        $form.validate().element('select');\r\n    });\r\n}\r\n\r\n// ---------------------------- END PRIVATE METHODS ---------------------------\r\n\r\ninitBlock();\r\n","/**\r\n * @file Implementation of the shop filter block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport DropdownStrategy from '../../../js/util/dropdown-strategy';\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\n// Block name\r\nconst BLOCK = 'shop-filter';\r\n\r\n// Element selectors\r\nconst SELECTORS = {\r\n    BLOCK: `.${BLOCK}`,\r\n    INNER: `.${BLOCK}__inner`,\r\n    TOGGLE: `.${BLOCK}__toggle`,\r\n    LIST: `.${BLOCK}__list`,\r\n};\r\n\r\n// Element class names\r\nconst CLASSES = {\r\n    LIST_VISIBLE: `${BLOCK}__list_visible`,\r\n};\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// --------------------------- BEGIN PRIVATE METHODS --------------------------\r\n\r\n/**\r\n * Initialize the shop filter block.\r\n */\r\nfunction initBlock() {\r\n    const $filter = $(SELECTORS.BLOCK);\r\n    if ($filter.length == 0) {\r\n        return;\r\n    }\r\n\r\n    const $inner = $(SELECTORS.INNER, $filter);\r\n    const $toggle = $(SELECTORS.TOGGLE, $inner);\r\n    const $list = $(SELECTORS.LIST, $inner);\r\n\r\n    const dropdown = new DropdownStrategy({\r\n        $root: $inner,\r\n        $trigger: $toggle,\r\n        $drawer: $list,\r\n\r\n        onExpand() {\r\n            $list.addClass(CLASSES.LIST_VISIBLE);\r\n        },\r\n        onCollapse() {\r\n            $list.removeClass(CLASSES.LIST_VISIBLE);\r\n        }\r\n    });\r\n    dropdown.activate();\r\n}\r\n\r\n// ---------------------------- END PRIVATE METHODS ---------------------------\r\n\r\ninitBlock();\r\n"],"sourceRoot":""}
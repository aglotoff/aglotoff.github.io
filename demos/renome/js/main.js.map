{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/utils/lazy-loader.js","webpack:///./src/blocks/common/search/search.js","webpack:///./src/js/utils/dropdown-strategy.js","webpack:///./src/js/utils/force-reflow.js","webpack:///./src/blocks/common/header/header.js","webpack:///./src/blocks/common/mini-cart/mini-cart.js","webpack:///./src/js/utils/drilldown-strategy.js","webpack:///./src/blocks/common/nav/nav.js","webpack:///./src/blocks/about/accordion-gallery/accordion-gallery.js","webpack:///./src/blocks/contact/contact-form/contact-form.js","webpack:///./src/blocks/common/gallery/gallery.js","webpack:///./src/blocks/contact/location-map/location-map.js","webpack:///./src/blocks/menu/menu/menu.js","webpack:///./src/blocks/common/select/select.js","webpack:///./src/blocks/reservation/reservation/reservation.js","webpack:///./src/blocks/common/slider/slider.js","webpack:///./src/blocks/common/specials-slider/specials-slider.js","webpack:///./src/blocks/common/tabs/tabs.js","webpack:///./src/blocks/portfolio/portfolio-filter/portfolio-filter.js","webpack:///./src/blocks/portfolio/portfolio-grid/portfolio-grid.js","webpack:///./src/blocks/portfolio/portfolio/portfolio.js","webpack:///./src/blocks/blog/blog-carousel/blog-carousel.js","webpack:///./src/blocks/blog/comment-form/comment-form.js","webpack:///./src/blocks/blog/video/video.js","webpack:///./src/blocks/shop/product-gallery/product-gallery.js","webpack:///./src/blocks/shop/checkout/checkout.js","webpack:///./src/blocks/shop/payment/payment.js","webpack:///./src/blocks/shop/product/product.js","webpack:///./src/blocks/shop/review-form/review-form.js","webpack:///./src/blocks/shop/shipping-calc/shipping-calc.js","webpack:///./src/js/utils.js","webpack:///./src/blocks/blog/share/share.js","webpack:///./src/blocks/shop/shop-filter/shop-filter.js","webpack:///./src/blocks/common/page/page.js","webpack:///./src/blocks/portfolio/project-carousel/project-carousel.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","$images","$search","popupFocusTrap","BUFFER_HEIGHT","LAZY_SELECTOR","scanImages","length","filter","$elem","windowBottom","$img","$","this","window","scrollTop","height","offset","top","parent","is","siblings","each","$source","attr","removeAttr","removeClass","loadImage","hide","deactivate","$document","document","Keys","DropdownStrategy","_ref","$root","$trigger","$drawer","onCollapse","onExpand","_classCallCheck","_elements","_isExpanded","_handlers","collapseHandler","expandHandler","handleOutsideClick","handleToggleClick","handleToggleKeyDown","handleToggleKeyUp","handleKeyDown","handleMouseLeave","handleMouseEnter","event","target","contains","collapse","toggle","which","preventDefault","focus","expand","_this","setTimeout","on","click","focusin","off","mouseenter","mouseleave","keydown","keyup","forceReflow","$el","offsetHeight","isTransparent","STICKY_HEADER_OFFSET","VISIBLE_HEADER_OFFSET","elements","HeaderStates","NORMAL","STICKY","VISIBLE","headerState","handleSearchToggle","addClass","activate","initBlock","$close","$minicart","$header","$searchToggle","hasClass","find","focusTrap","clickOutsideDeactivates","escapeDeactivates","onDeactivate","handleScroll","currentOffset","newState","toggleClass","updateHeaderStyles","drilldownChain","activeDrilldown","DrilldownStrategy","$initialFocus","drilldown_strategy_classCallCheck","handleTriggerClick","handleTrapDeactivate","_focusTrap","initialFocus","handleDocumentClick","prevDrilldown","pop","unpause","pause","push","submenus","mobileMenu","DESKTOP_BREAKPOINT","SCROLL_BUFFER","SCROLL_SPEED","isDesktop","NavSubmenu","nav_classCallCheck","$parentLink","prev","$parentItem","closest","$scrollpane","first","$backLink","$firstLink","not","drilldownStrategy","dropdownStrategy","_this$_elements","handleInternalLinkClick","targetId","$targetElem","forEach","submenu","animate","Math","max","BLOCK","Selectors","ROOT","concat","THUMB","IMAGE","THUMB_HEIGHT","isMobile","sliders","AccordionGallery","accordion_gallery_classCallCheck","$thumbs","_collapsedThumbWidth","_collapsedThumbHeight","_isVertical","_handleThumbExpand","_handleThumbCollapse","magnificPopup","delegate","mainClass","gallery","enabled","tCounter","closeMarkup","arrowMarkup","callbacks","beforeOpen","wrap","role","aria-label","map","outerWidth","slider","setVertical","e","$thumb","currentTarget","$image","width","vertical","getInvalidClassName","$element","ContactForm","contact_form_classCallCheck","validate","errorClass","highlight","element","unhighlight","Gallery","gallery_classCallCheck","type","markerIcon","L","icon","iconUrl","iconSize","iconAnchor","LocationMap","location_map_classCallCheck","_$root$data","data","latlng","zoom","$container","scrollWheelZoom","setView","tileLayer","attribution","subdomains","maxZoom","addTo","marker","_handleMapFocus","_handleMapBlur","_map","enable","disable","Menu","menu_classCallCheck","ClassNames","ORIGIN","BUTTON","LIST","LIST_EXPANDED","OPTION","OPTION_HIGHLIGHTED","ERROR","Themes","default","small","checkout","Select","$origin","_ref$theme","arguments","undefined","theme","select_classCallCheck","id","labelledBy","themeClass","before","detach","append","$button","aria-haspopup","aria-labelledby","aria-expanded","appendTo","$list","tabindex","aria-orientation","_state","expanded","selectedIndex","highlightedIndex","searchString","popper","Popper","placement","update","_handleOptionClick","_handleButtonClick","_handleOutsideClick","_handleListKeyDown","_handleKeyPress","_handleOptionMouseOver","keypress","mouseover","$options","offsetTop","eq","position","offsetBottom","outerHeight","listHeight","innerHeight","_scrollToHighlighted","str","text","startsWith","_this$_state","nextIndex","_findOption","selectOption","_highlightOption","_search","String","fromCharCode","$highlightedOption","newIndex","index","_this$_elements2","$selectedOption","_this$_elements3","_this$_elements4","val","change","_this$_elements5","empty","prop","$originalOption","optionId","$option","_this$_elements6","_this$_state2","_this$_elements7","_this$_state3","error","DATE","TIME","PARTY","Classes","INPUT_INVALID","Reservation","reservation_classCallCheck","$date","$time","$party","_timeSelect","_partySelect","startDate","_getStartDate","_datePicker","Pikaday","field","defaultDate","toDate","setDefaultDate","minDate","maxDate","moment","add","format","onSelect","_updateTimeOptions","rules","date","required","validDate","submit","_handleSubmit","_getAvailableTime","reduce","time","currentMoment","hour","minutes","year","month","startMoment","getMoment","day","AUTOPLAY_SPEED","TRANSITION_SPEED","Slider","slider_classCallCheck","$prevArrow","$nextArrow","slick","rows","zIndex","cssEase","fade","speed","autoplay","autoplaySpeed","pauseOnFocus","pauseOnHover","prevArrow","nextArrow","_handleSlickBeforeChange","current","next","$slides","GUTTER_WIDTH","MIN_OPACITY","MIN_SCALE","SLIDES","SLIDE_INNER","PREV_ARROW","NEXT_ARROW","SpecialsSlider","specials_slider_classCallCheck","isTransitioning","activeIndex","_config","dOffset","dOpacity","dScale","prevSlide","nextSlide","_updateStyles","init","$slide","order","_this$_config","css","transform","opacity","total","slide","_applySlideStyles","_this2","$prevSlide","$movingSlide","_this3","PANEL_ACTIVE","PANEL_HIDDEN","TABLIST","TABS","PANELS","tabs","Tabs","tabs_classCallCheck","$tabs","$panels","$tab","aria-selected","orientation","_handleTabClick","_handleTabKeyDown","tab","setOrientation","tabIndex","showTab","nextFocus","$prevTab","$prevPanel","$nextTab","$nextPanel","LIST_VISIBLE","INNER","TOGGLE","TAB","ENTER","ESC","SPACE","END","HOME","LEFT","UP","RIGHT","DOWN","config","state","isDropdown","isExpanded","collapseList","$toggle","highlightOption","onChange","handleOptionClick","$inner","handleListKeyDown","setDropdownMode","dropdown","ITEM","ITEM_INNER","IMG","OVERLAY","TITLE","LINK","CATS","CAT_ITEM","CAT_LINK","OVERLAY_FOCUS","CONTAINER","SOURCE_WEBP","SOURCE_JPEG","SIZER","itemHtml","shuffleInstance","createPortfolioItem","$item","categories","join","title","link","src","images","jpeg","alt","webp","medium","large","cat","href","data-filter","toLowerCase","$d","Deferred","resolve","promise","MEDIUM_BREAKPOINT","FAKE_LOAD_TIME","GRID","MORE","LOADER","MORE_HIDDEN","activeFilter","fakeItems","handleFilterChange","sel","PortfolioFilter","PortfolioGrid","handleMoreBtnClick","$grid","$moreBtn","$loader","insertAfter","items","more","then","_$","when","apply","_toConsumableArray","_len","Array","_key","$sizer","fail","always","remove","$portfolio","onCatLinkClick","Shuffle","itemSelector","sizer","focusout","SLIDE","ARROW_PREV","ARROW_NEXT","BlogCarousel","blog_carousel_classCallCheck","dots","responsive","breakpoint","settings","$gallery","$slider","$links","CONTAINER_FORMAT","FRAME","PLACEHOLDER","PLAY_BTN","Video","video_classCallCheck","$placeholder","$playBtn","_loadVideo","url","$frame","frameborder","allowfullscreen","replaceAll","onCheckboxChange","slideToggle","initModule","$form","ignore","errorPlacement","prepend","$payment","$radios","$desc","slideUp","slideDown","onAddBtnClick","onProductFocusin","onProductFocusout","$product","onSliderBeforechange","currentSlide","$link","onLinkClick","arrows","$calc","$country","formExpanded","countrySelect","calc_shipping_country","$error","setError","$nav","$menuToggle","$menu","$share","dropdownProto","_onOutsideClick","_$container","_onSwitcherClick","show","_onSwitcherKeydown","_onSwitcherKeyup","_onKeydown","_$switcher","_onToggle","_hoverToggles","_onMouseenter","_onMouseleave","hover","listboxProto","keyActions","_orientation","verticalKeyActions","horizontalKeyActions","firstTab","selectItem","lastTab","_$items","prevTab","_activeIndex","nextTab","_onSelect","_defineProperty","_verticalKeyActions","_horizontalKeyActions","$filter","$switcher","options","hoverToggles","onToggle","open","RESIZE_INTERVAL","SCROLL_INTERVAL","resizeTimer","scrollTimer","wasScrolled","handleWindowScroll","LazyLoader","Header","handleWindowResize","handleResize","screenWidth","Portfolio","debounceWindowResize","clearTimeout","throttleWindowScroll","resize","scroll","toArray","initAll","Checkout","Payment","Product","ProductGallery","ReviewForm","ShippingCalc","ShopFilter"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 450);\n","/**\r\n * @file Lazy loader for images\r\n */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\nconst BUFFER_HEIGHT = 50;\r\nconst LAZY_SELECTOR = '.lazy';\r\n\r\nlet $images;\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// -------------------------- BEGIN UTILITY FUNCTIONS -------------------------\r\n\r\n/**\r\n * Check if <tt>elem</tt> is in the browser's viewport.\r\n * \r\n * @param {JQuery} $elem The element to check\r\n * @return {boolean} <tt>true</tt> if the element is in the viewport,\r\n *      <tt>false</tt> otherwise\r\n */\r\nfunction isInViewport($elem) {\r\n    const windowBottom = $(window).scrollTop() + $(window).height();\r\n    return $elem.offset().top < (windowBottom + BUFFER_HEIGHT);\r\n}\r\n\r\n// --------------------------- END UTILITY FUNCTIONS --------------------------\r\n\r\n// ----------------------------- BEGIN DOM METHODS ----------------------------\r\n\r\n/**\r\n * Lazy-load the given <tt>img</tt> element.\r\n * \r\n * @param {JQuery} $img The image element\r\n */\r\nfunction loadImage($img) {\r\n    if ($img.parent().is('picture')) {\r\n        $img.siblings('source').each(function() {\r\n            const $source = $(this);\r\n            $source\r\n                .attr('srcset', $source.attr('data-srcset'))\r\n                .removeAttr('data-srcset');\r\n        });\r\n    }\r\n\r\n    $img\r\n        .attr('src', $img.attr('data-src'))\r\n        .attr('srcset', $img.attr('data-srcset'))\r\n        .removeAttr('data-src data-srcset')\r\n        .removeClass('lazy');\r\n}\r\n\r\n// ------------------------------ END DOM METHODS -----------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n\r\n/**\r\n * Initialize the lazy image loader\r\n */\r\nexport function init() {\r\n    $images = $(LAZY_SELECTOR);\r\n}\r\n\r\n/**\r\n * Load all images that have been scrolled into the viewport for the first time\r\n */\r\nexport function scanImages() {\r\n    if ($images.length === 0) {\r\n        return;\r\n    }\r\n\r\n    $images = $images.filter(function() {\r\n        const $img = $(this);\r\n\r\n        if (!isInViewport($img)) {\r\n            return true;\r\n        }\r\n        \r\n        loadImage($img);        \r\n\r\n        return false;\r\n    });\r\n}\r\n\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the search block\r\n * @author Andrey Glotov\r\n */\r\n\r\n/* global focusTrap */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\nlet $search;\r\nlet popupFocusTrap;\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n\r\n/**\r\n * Initialize the search block.\r\n * @return true\r\n */\r\nexport function initBlock() {\r\n    $search = $('.search');\r\n    const $close = $search.find('.search__close');\r\n\r\n    popupFocusTrap = focusTrap($search.get(0), {\r\n        clickOutsideDeactivates: true,\r\n        escapeDeactivates: true,\r\n        \r\n        onDeactivate: function handleSearchDeactivate() {\r\n            $search.removeClass('search_visible');\r\n        },\r\n    });\r\n\r\n    $close.click(hide);\r\n\r\n    return true;\r\n}\r\n\r\n/**\r\n * Show the search modal\r\n */\r\nexport function show() {\r\n    $search.addClass('search_visible');\r\n\r\n    // Need to wait 100ms for autofocus to work\r\n    // TODO: why?\r\n    setTimeout(() => {\r\n        popupFocusTrap.activate();\r\n    }, 100);\r\n}\r\n\r\n/**\r\n * Hide the search modal\r\n */\r\nexport function hide() {\r\n    popupFocusTrap.deactivate();\r\n}\r\n\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the dropdown strategy for menus\r\n * @author Andrey Glotov\r\n */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\nconst $document = $(document);\r\n\r\nconst Keys = {\r\n    ESC: 27,\r\n    SPACE: 32\r\n};\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\nexport default class DropdownStrategy {\r\n    /**\r\n     * Create a dropdown strategy\r\n     * @param {Object} props - Properties object\r\n     * @param {JQuery} props.$root The root node\r\n     * @param {JQuery} props.$trigger The dropdown button\r\n     * @param {JQuery} props.$drawer The dropdown drawer\r\n     * @param {Function} props.onCollapse The callback to execute on collapse\r\n     * @param {FUnction} props.onExpand The callback to execute on expand\r\n     */\r\n    constructor({$root, $trigger, $drawer, onCollapse, onExpand}) {\r\n        this._elements = { $root, $trigger, $drawer };\r\n        this._isExpanded = false;\r\n\r\n        this._handlers = {\r\n            collapseHandler: onCollapse,\r\n            expandHandler: onExpand,\r\n        };\r\n\r\n        this.handleOutsideClick = this.handleOutsideClick.bind(this);\r\n        this.handleToggleClick = this.handleToggleClick.bind(this);\r\n        this.handleToggleKeyDown = this.handleToggleKeyDown.bind(this);\r\n        this.handleToggleKeyUp = this.handleToggleKeyUp.bind(this);\r\n        this.handleKeyDown = this.handleKeyDown.bind(this);\r\n        this.handleMouseLeave = this.handleMouseLeave.bind(this);\r\n        this.handleMouseEnter = this.handleMouseEnter.bind(this);\r\n    }\r\n\r\n    // -------------------------- BEGIN EVENT HANDLERS ------------------------\r\n\r\n    handleOutsideClick(event) {\r\n        const target = event.target;\r\n        if (!(\r\n            target === document\r\n            || this._elements.$root.is($(target))\r\n            || $.contains(this._elements.$root.get(0), target)\r\n        )) {\r\n            this.collapse();\r\n        }\r\n    }\r\n\r\n    handleToggleClick() {\r\n        this.toggle();\r\n    }\r\n\r\n    handleToggleKeyDown(event) {\r\n        if (event.which === Keys.SPACE) {\r\n            event.preventDefault();\r\n\r\n            this.toggle();\r\n        }\r\n    }\r\n\r\n    handleToggleKeyUp(event) {\r\n        if (event.which === Keys.SPACE) {\r\n            event.preventDefault();\r\n        }\r\n    }\r\n\r\n    handleKeyDown(event) {\r\n        if (event.which === Keys.ESC) {\r\n            this.collapse();\r\n            this._elements.$trigger.focus();\r\n        }\r\n    }\r\n\r\n    handleMouseEnter() {\r\n        this.expand();\r\n    }\r\n\r\n    handleMouseLeave() {\r\n        this.collapse();\r\n    }\r\n\r\n    // --------------------------- END EVENT HANDLERS -------------------------\r\n\r\n    // -------------------------- BEGIN PUBLIC METHODS ------------------------\r\n\r\n    /**\r\n     * Expand the dropdown\r\n     */\r\n    expand() {\r\n        this._isExpanded = true;\r\n\r\n        setTimeout(() => {\r\n            $document.on({\r\n                click: this.handleOutsideClick,\r\n                focusin: this.handleOutsideClick,\r\n            });\r\n            this._elements.$root.on('keydown', this.handleKeyDown);\r\n\r\n            this._elements.$trigger.attr('aria-expanded', 'true');\r\n\r\n            if (this._handlers.expandHandler) {\r\n                this._handlers.expandHandler();\r\n            }\r\n        }, 0);\r\n    }\r\n\r\n    /**\r\n     * Collapse the dropdown\r\n     */\r\n    collapse() {\r\n        this._isExpanded = false;\r\n\r\n        $document.off({\r\n            click: this.handleOutsideClick,\r\n            focusin: this.handleOutsideClick,\r\n        });\r\n        this._elements.$root.off('keydown', this.handleKeyDown);\r\n\r\n        this._elements.$trigger.attr('aria-expanded', 'false');\r\n\r\n        if (this._handlers.collapseHandler) {\r\n            this._handlers.collapseHandler();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Toggle between the collapsed and expanded states\r\n     */\r\n    toggle() {\r\n        if (!this._isExpanded) {\r\n            this.expand();\r\n        } else {\r\n            this.collapse();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Activate the strategy: add event listeners.\r\n     */\r\n    activate() {\r\n        this._elements.$root.on({\r\n            mouseenter: this.handleMouseEnter,\r\n            mouseleave: this.handleMouseLeave,\r\n        });\r\n\r\n        this._elements.$trigger.on({\r\n            click: this.handleToggleClick,\r\n            keydown: this.handleToggleKeyDown,\r\n            keyup: this.handleToggleKeyUp,\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Deactivate the strategy: collapse the dropdown and remove event\r\n     * listeners.\r\n     */\r\n    deactivate() {\r\n        if (this._isExpanded) {\r\n            this.collapse();\r\n        }\r\n\r\n        this._elements.$root.off({\r\n            mouseenter: this.handleMouseEnter,\r\n            mouseleave: this.handleMouseLeave,\r\n        });\r\n\r\n        this._elements.$trigger.off({\r\n            click: this.handleToggleClick,\r\n            keydown: this.handleToggleKeyDown,\r\n            keyup: this.handleToggleKeyUp,\r\n        });\r\n    }\r\n}\r\n","/**\r\n * Force a reflow\r\n * @param {JQuery} el The element whose styles have been changed\r\n */\r\nexport default function forceReflow($el) {\r\n    void($el.get(0).offsetHeight);\r\n}\r\n","/**\r\n * @file Implementation of the header block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport * as Search from '../search/search';\r\nimport * as MiniCart from '../mini-cart/mini-cart';\r\n\r\nimport forceReflow from '../../../js/utils/force-reflow';\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\nconst STICKY_HEADER_OFFSET  = 100;  // Scroll offset to make the header \"sticky\"\r\nconst VISIBLE_HEADER_OFFSET = 500;  // Scroll offset to show the \"sticky\" header\r\n\r\nconst elements = {};\r\nlet isTransparent;\r\n\r\nconst HeaderStates = { NORMAL: 0, STICKY: 1, VISIBLE: 2 };\r\nlet headerState = HeaderStates.NORMAL;\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// ---------------------------- BEGIN DOM METHODS -----------------------------\r\n\r\n/**\r\n * Add or remove header classes basd on the current scroll offset to create an\r\n * animated sticky header effect.\r\n */\r\nfunction updateHeaderStyles() {\r\n    const currentOffset = $(window).scrollTop();\r\n\r\n    let newState = null;\r\n    if (currentOffset < STICKY_HEADER_OFFSET) {\r\n        newState = HeaderStates.NORMAL;\r\n    } else if (currentOffset < VISIBLE_HEADER_OFFSET) {\r\n        newState = HeaderStates.STICKY;\r\n    } else {\r\n        newState = HeaderStates.VISIBLE;\r\n    }\r\n\r\n    if (newState !== headerState) {\r\n        const { $header } = elements;\r\n\r\n        if (newState === HeaderStates.NORMAL) {\r\n            $header\r\n                .removeClass('header_scroll header_hidden header_animated')\r\n                .toggleClass('header_transparent', isTransparent);\r\n        } else if (newState === HeaderStates.STICKY) {\r\n            $header\r\n                .addClass('header_scroll header_hidden')\r\n                .removeClass('header_transparent');\r\n                \r\n            forceReflow($header);\r\n\r\n            $header.addClass('header_animated');\r\n        } else {    // HeaderStates.VISIBLE\r\n            if (headerState === HeaderStates.NORMAL) {\r\n                // Make sure the animation is played\r\n                $header\r\n                    .addClass('header_scroll header_hidden')\r\n                    .removeClass('header_transparent');\r\n\r\n                forceReflow($header);\r\n\r\n                $header.addClass('header_animated');\r\n            }\r\n            \r\n            $header.removeClass('header_hidden');\r\n        }\r\n\r\n        headerState = newState;\r\n    }\r\n}\r\n\r\n// ----------------------------- END DOM METHODS ------------------------------\r\n\r\n// --------------------------- BEGIN EVENT HANDLERS ---------------------------\r\n\r\nfunction handleSearchToggle() {\r\n    Search.show();\r\n}\r\n\r\n// ---------------------------- END EVENT HANDLERS ----------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n\r\n/**\r\n * Initialize the header module.\r\n */\r\nexport function initBlock() {\r\n    elements.$header = $('.header');\r\n    elements.$searchToggle = $('.header__search-toggle', elements.$header);\r\n\r\n    isTransparent = elements.$header.hasClass('header_transparent');\r\n\r\n    Search.initBlock();\r\n    MiniCart.initBlock();\r\n\r\n    elements.$searchToggle.click(handleSearchToggle);\r\n}\r\n\r\n/**\r\n * Respond to window scroll event.\r\n */\r\nexport function handleScroll() {\r\n    updateHeaderStyles();\r\n}\r\n\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * Implementation of the mini cart block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport DropdownStrategy from '../../../js/utils/dropdown-strategy';\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n\r\n/**\r\n * Initialize the mini cart block.\r\n * @return true\r\n */\r\nexport function initBlock() {\r\n    const $minicart = $('.mini-cart');\r\n    const $trigger = $('.mini-cart__trigger', $minicart);\r\n    const $drawer = $('.mini-cart__drawer', $minicart);\r\n\r\n    const minicart = new DropdownStrategy({\r\n        $root: $minicart,\r\n        $trigger,\r\n        $drawer,\r\n\r\n        onExpand() {\r\n            $drawer.addClass('mini-cart__drawer_expanded');\r\n        },\r\n        onCollapse() {\r\n            $drawer.removeClass('mini-cart__drawer_expanded');\r\n        }\r\n    });\r\n    minicart.activate();\r\n\r\n    return true;\r\n}\r\n\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the drilldown strategy for menus\r\n * @author Andrey Glotov\r\n */\r\n\r\n/* global focusTrap */\r\n\r\n// ------------------------- BEGIN MODULE VARIABLES ---------------------------\r\n\r\nconst $document = $(document);\r\n\r\nconst drilldownChain = [];\r\nlet activeDrilldown = null;\r\n\r\n// -------------------------- END MODULE VARIABLES ----------------------------\r\n\r\nexport default class DrilldownStrategy {\r\n    /**\r\n     * Create a drilldown strategy\r\n     * @param {Object} props - Properties object\r\n     * @param {JQuery} props.$trigger The drilldown button\r\n     * @param {JQuery} props.$drawer The drilldown drawer\r\n     * @param {JQuery} props.$initialFocus The element to receive initialFocus\r\n     * @param {Function} props.onCollapse The callback to execute on collapse\r\n     * @param {FUnction} props.onExpand The callback to execute on expand\r\n     */\r\n    constructor({$trigger, $drawer, $initialFocus, onCollapse, onExpand}) {\r\n        this._elements = { $trigger, $drawer, $initialFocus };\r\n        this._isExpanded = false;\r\n\r\n        this.handleOutsideClick = this.handleOutsideClick.bind(this);\r\n        this.handleTriggerClick = this.handleTriggerClick.bind(this);\r\n        this.handleTrapDeactivate = this.handleTrapDeactivate.bind(this);\r\n\r\n        this._handlers = {\r\n            collapseHandler: onCollapse,\r\n            expandHandler: onExpand,\r\n        };\r\n\r\n        this._focusTrap = new focusTrap($drawer.get(0), {\r\n            clickOutsideDeactivates: true,\r\n            escapeDeactivates: true,\r\n            initialFocus: $initialFocus && $initialFocus.get(0),\r\n            onDeactivate: this.handleTrapDeactivate,\r\n        });\r\n    }\r\n\r\n    // -------------------------- BEGIN EVENT HANDLERS ------------------------\r\n\r\n    handleOutsideClick(event) {\r\n        if (!$.contains(this._elements.$drawer.get(0), event.target)) {\r\n            this.collapse();\r\n        }\r\n    }\r\n\r\n    handleTriggerClick() {\r\n        this.toggle();\r\n    }\r\n\r\n    handleTrapDeactivate() {\r\n        $document.off('click', this.handleDocumentClick);\r\n\r\n        if (drilldownChain.length !== 0) {\r\n            const prevDrilldown = drilldownChain.pop();\r\n\r\n            if (prevDrilldown._isExpanded) {\r\n                activeDrilldown = prevDrilldown;\r\n                activeDrilldown._focusTrap.unpause();\r\n            }\r\n        } else {\r\n            activeDrilldown = null;\r\n        }\r\n\r\n        this._isExpanded = false;\r\n\r\n        this._elements.$trigger.attr('aria-expanded', 'false');\r\n\r\n        if (this._handlers.collapseHandler) {\r\n            this._handlers.collapseHandler();\r\n        }\r\n    }\r\n\r\n    // --------------------------- END EVENT HANDLERS -------------------------\r\n\r\n    // -------------------------- BEGIN PUBLIC METHODS ------------------------\r\n\r\n    /**\r\n     * Expand the drilldown menu\r\n     */\r\n    expand() {\r\n        this._isExpanded = true;\r\n\r\n        if (activeDrilldown) {\r\n            activeDrilldown._focusTrap.pause();\r\n            drilldownChain.push(activeDrilldown);\r\n        }\r\n\r\n        activeDrilldown = this;\r\n\r\n        this._focusTrap.activate();\r\n\r\n        setTimeout(() => {\r\n            $document.click(this.handleDocumentClick);\r\n\r\n            if (this._handlers.expandHandler) {\r\n                this._handlers.expandHandler();\r\n            }\r\n        }, 0);\r\n\r\n        this._elements.$trigger.attr('aria-expanded', 'true');\r\n    }\r\n\r\n    /**\r\n     * Collapse the drilldown menu\r\n     */\r\n    collapse() {\r\n        this._focusTrap.deactivate();\r\n    }\r\n\r\n    /**\r\n     * Toggle between the collapsed and expanded states\r\n     */\r\n    toggle() {\r\n        if (!this._isExpanded) {\r\n            this.expand();\r\n        } else {\r\n            this.collapse();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Activate the strategy: add event listeners.\r\n     */\r\n    activate() {\r\n        this._elements.$trigger.click(this.handleTriggerClick);\r\n        this._elements.$drawer.keydown(this.handleKeyDown);\r\n    }\r\n\r\n    /**\r\n     * Deactivate the strategy: collapse the dropdown and remove event\r\n     * listeners.\r\n     */\r\n    deactivate() {\r\n        if (this._isExpanded) {\r\n            this.collapse();\r\n        }\r\n\r\n        this._elements.$trigger.off('click', this.handleTriggerClick);\r\n        this._elements.$drawer.off('keydown', this.handleKeyDown);\r\n    }\r\n}\r\n","/**\r\n * @file Implementation of the navigation block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport DropdownStrategy from '../../../js/utils/dropdown-strategy';\r\nimport DrilldownStrategy from '../../../js/utils/drilldown-strategy';\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\nconst DESKTOP_BREAKPOINT = 992;  // Minimum desktop screen width\r\n\r\nconst SCROLL_BUFFER = 100;  // Offset from window top to scroll target\r\nconst SCROLL_SPEED = 1000;\r\n\r\nlet submenus;\r\nlet mobileMenu;\r\n\r\nlet isDesktop = false;\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n/**\r\n * Implementation of submenus.\r\n * \r\n * Each submenu has two behavior strategies: drilldown menu for smaller screens\r\n * and dropdown menu for larger screens.\r\n */\r\nclass NavSubmenu {\r\n    /**\r\n     * Initialize submenu.\r\n     * \r\n     * @param {JQuery} $root Submenu root element\r\n     */\r\n    constructor($root) {\r\n        this._elements = {\r\n            $root,\r\n            $parentLink: $root.prev('.nav__link'),\r\n            $parentItem: $root.closest('.nav__item'),\r\n            $scrollpane: $('.nav__scrollpane', $root).first(),\r\n            $backLink: $('.nav__link_back', $root).first(),\r\n            $firstLink: $('.nav__link', $root).not('.nav__link_back').first(),\r\n        };\r\n\r\n        this.drilldownStrategy = new DrilldownStrategy({\r\n            $trigger: this._elements.$parentLink,\r\n            $drawer: this._elements.$root,\r\n            $initialFocus:  this._elements.$firstLink,\r\n\r\n            onCollapse: this.collapse.bind(this), \r\n            onExpand: this.expand.bind(this),\r\n        });\r\n\r\n        this.dropdownStrategy = new DropdownStrategy({\r\n            $root: this._elements.$parentItem,\r\n            $trigger: this._elements.$parentLink,\r\n            $drawer: this._elements.$root,\r\n\r\n            onCollapse: this.collapse.bind(this), \r\n            onExpand: this.expand.bind(this),\r\n        });\r\n\r\n        // Mobile by default\r\n        this.drilldownStrategy.activate();\r\n\r\n        this._elements.$backLink.click(() => this.drilldownStrategy.collapse());\r\n    }\r\n\r\n    collapse() {\r\n        const { $root } = this._elements;\r\n\r\n        $root.removeClass('nav__submenu_visible');\r\n    }\r\n\r\n    expand() {\r\n        const { $root, $scrollpane } = this._elements;\r\n\r\n        $scrollpane.scrollTop(0);   // Reset submenu scroll position\r\n        $root.addClass('nav__submenu_visible');\r\n    }\r\n}\r\n\r\n// --------------------------- BEGIN EVENT HANDLERS ---------------------------\r\n\r\n/**\r\n * Scroll smoothly when navigating to internal links.\r\n */\r\nfunction handleInternalLinkClick() {\r\n    const $link = $(this);\r\n\r\n    const targetId = $link.attr('href');\r\n    const $targetElem = $(targetId);\r\n    if ($targetElem.length === 0) {\r\n        return;\r\n    }\r\n\r\n    if (!isDesktop) {\r\n        submenus.forEach((submenu) => submenu.drilldownStrategy.collapse());\r\n        mobileMenu.collapse();\r\n    }\r\n\r\n    $('html, body').animate({\r\n        scrollTop: Math.max(0, $targetElem.offset().top - SCROLL_BUFFER),\r\n    }, SCROLL_SPEED, 'swing', function() {\r\n        $targetElem.focus();\r\n    });\r\n\r\n    return false;\r\n}\r\n\r\n// ---------------------------- END EVENT HANDLERS ----------------------------\r\n\r\n// ---------------------------- BEGIN PUBLIC METHODS --------------------------\r\n\r\n/**\r\n * Initialize the navigation block.\r\n * @return true\r\n */\r\nexport function initBlock() {\r\n    const $nav = $('.nav');\r\n    const $menuToggle = $('.nav__toggle', $nav);\r\n    const $menu = $('.nav__menu', $nav);\r\n    const $scrollpane = $('.nav__scrollpane', $nav);\r\n\r\n    mobileMenu = new DrilldownStrategy({\r\n        $trigger: $menuToggle,\r\n        $drawer: $nav,\r\n\r\n        onCollapse() {\r\n            $menu.removeClass('nav__menu_visible');\r\n            $menuToggle.removeClass('hamburger_open');\r\n\r\n            $('.page').removeClass('page_menu-expanded');\r\n        },\r\n\r\n        onExpand() {\r\n            $menu.addClass('nav__menu_visible');\r\n            $scrollpane.scrollTop(0);\r\n            $menuToggle.addClass('hamburger_open');\r\n\r\n            $('.page').addClass('page_menu-expanded');\r\n        },\r\n    });\r\n    mobileMenu.activate();\r\n\r\n    submenus = $('.nav__submenu', $nav)\r\n        .map(function() {\r\n            return new NavSubmenu($(this));\r\n        })\r\n        .toArray();\r\n\r\n    $nav.on('click', '.nav__link[href^=\"#\"]', handleInternalLinkClick);\r\n}\r\n\r\n/**\r\n * Respond to window resize event.\r\n * \r\n * Switch between drilldown behavior for submenus on mobile and dropdown \r\n * behavior on desktop.\r\n */\r\nexport function handleResize() {\r\n    if (isDesktop && ($(window).outerWidth() < DESKTOP_BREAKPOINT)) {\r\n        isDesktop = false;\r\n\r\n        submenus.forEach((submenu) => {\r\n            submenu.dropdownStrategy.deactivate();\r\n            submenu.drilldownStrategy.activate();\r\n        });\r\n    } else if (!isDesktop && ($(window).outerWidth() >= DESKTOP_BREAKPOINT)) {\r\n        isDesktop = true;\r\n\r\n        submenus.forEach((submenu) => {\r\n            submenu.drilldownStrategy.deactivate();\r\n            submenu.dropdownStrategy.activate();\r\n        });\r\n\r\n        mobileMenu.collapse();\r\n    }\r\n}\r\n\r\n// ----------------------------- END PUBLIC METHODS ---------------------------\r\n","/**\r\n * @file Implementation of the accordion gallery block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES -------------------------- \r\n\r\nconst BLOCK = 'accordion-gallery';\r\n\r\nconst Selectors = {\r\n    ROOT: `.${BLOCK}`,\r\n    THUMB: `.${BLOCK}__thumb`,\r\n    IMAGE: `.${BLOCK}__thumb-img`,\r\n};\r\n\r\nconst MOBILE_BREAKPOINT = 768;\r\nconst THUMB_HEIGHT = 100;\r\n\r\nlet isMobile = true;\r\nconst sliders = [];\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n/**\r\n * Accordion gallery.\r\n */\r\nclass AccordionGallery {\r\n\r\n    /**\r\n     * Create an accordion gallery\r\n     * \r\n     * @param {JQuery} $root The root element\r\n     */\r\n    constructor($root) {\r\n        const $thumbs = $(Selectors.THUMB, $root);\r\n\r\n        this._elements = { $root, $thumbs };\r\n\r\n        this._collapsedThumbWidth = `${100 / $thumbs.length}%`;\r\n        this._collapsedThumbHeight = THUMB_HEIGHT;\r\n\r\n        this._isVertical = true;\r\n\r\n        this._handleThumbExpand = this._handleThumbExpand.bind(this);\r\n        this._handleThumbCollapse = this._handleThumbCollapse.bind(this);\r\n\r\n        $root.on('mouseenter', Selectors.THUMB, this._handleThumbExpand);\r\n        $root.on('focus', Selectors.THUMB, this._handleThumbExpand);\r\n        $root.on('mouseleave', Selectors.THUMB, this._handleThumbCollapse);\r\n        $root.on('blur', Selectors.THUMB, this._handleThumbCollapse);\r\n\r\n        /**\r\n         * Each image acts as a thumbnail for gallery managed by the\r\n         * magnific-popup jQuery plugin\r\n         */\r\n        $root.magnificPopup({\r\n            delegate: Selectors.THUMB,\r\n            mainClass: 'lightbox',\r\n            gallery: {\r\n                enabled: true,\r\n                tCounter: '',\r\n            },\r\n\r\n            closeMarkup: `\r\n                <button aria-label=\"Close\" type=\"button\" class=\"mfp-close\">\r\n                    &#215;\r\n                </button>\r\n            `,\r\n            arrowMarkup: `\r\n                <button \r\n                    aria-label=\"%title%\"\r\n                    type=\"button\"\r\n                    class=\"mfp-arrow mfp-arrow-%dir%\"\r\n                >\r\n                </button>\r\n            `,\r\n\r\n            callbacks: {\r\n                beforeOpen() {\r\n                    // For web accessibility\r\n                    this.wrap.attr({\r\n                        'role': 'dialog',\r\n                        'aria-label': 'Gallery',\r\n                    });\r\n                },\r\n            },\r\n        });\r\n    }\r\n\r\n    // -------------------------- BEGIN EVENT HANDLERS ------------------------\r\n\r\n    /**\r\n     * Handle the thumbnail expand event\r\n     * \r\n     * @param {jQuery.Event} e The event object\r\n     */\r\n    _handleThumbExpand(e) {\r\n        const $thumb = $(e.currentTarget);\r\n        const $image = $(Selectors.IMAGE, $thumb);\r\n\r\n        if (this._isVertical) {\r\n            $thumb.height($image.height());\r\n        } else {\r\n            $thumb.width($image.width());\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Handle the thumbnail collapse event\r\n     * \r\n     * @param {jQuery.Event} e The event object\r\n     */\r\n    _handleThumbCollapse(e) {\r\n        const $thumb = $(e.currentTarget);\r\n\r\n        if (this._isVertical) {\r\n            $thumb.height(this._collapsedThumbHeight);\r\n        } else {\r\n            $thumb.width(this._collapsedThumbWidth);\r\n        }\r\n    }\r\n\r\n    // --------------------------- END EVENT HANDLERS -------------------------\r\n\r\n    // -------------------------- BEGIN PUBLIC METHODS ------------------------\r\n\r\n    /**\r\n     * Switch slider orientation.\r\n     * \r\n     * @param {boolean} vertical\r\n     *      true for vertical orientation, false for horizontal\r\n     */\r\n    setVertical(vertical) {\r\n        this._isVertical = vertical;\r\n\r\n        if (vertical) {\r\n            this._elements.$thumbs.width('').height(this._collapsedThumbHeight);\r\n        } else {\r\n            this._elements.$thumbs.width(this._collapsedThumbWidth).height('');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Initialize all accordion sliders on the page.\r\n     */\r\n    static initAll() {\r\n        $(Selectors.ROOT).map(function() {\r\n            sliders.push(new AccordionGallery($(this)));\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Respond to window resize event.\r\n     * \r\n     * Switch between vertical orientation on mobile devices and horizontal\r\n     * orientation on larger screens.\r\n     */\r\n    static handleResize() {\r\n        if (!isMobile && ($(window).outerWidth() < MOBILE_BREAKPOINT)) {\r\n            isMobile = true;\r\n    \r\n            sliders.forEach((slider) => slider.setVertical(true));\r\n        } else if (isMobile && ($(window).outerWidth() >= MOBILE_BREAKPOINT)) {\r\n            isMobile = false;\r\n    \r\n            sliders.forEach((slider) => slider.setVertical(false));\r\n        }\r\n    }\r\n\r\n    // --------------------------- END PUBLIC METHODS -------------------------\r\n}\r\n\r\nexport default AccordionGallery;\r\n","/**\r\n * @file Implementation of the contact form block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// ------------------------- BEGIN UTILITY FUNCTIONS --------------------------\r\n\r\n/**\r\n * Given the input element, get a classname containing the invalid modifier\r\n * @param {JQuery} $element The input element\r\n */\r\nfunction getInvalidClassName($element) {\r\n    if ($element.hasClass('input')) {\r\n        return 'input_invalid';\r\n    } else if ($element.hasClass('text-area')) {\r\n        return 'text-area_invalid';\r\n    }\r\n}\r\n\r\n// -------------------------- END UTILITY FUNCTIONS ---------------------------\r\n\r\n/**\r\n * Contact form block implementation\r\n */\r\nclass ContactForm {\r\n\r\n    /**\r\n     * Create contact form\r\n     * \r\n     * @param {JQuery} $root The block root element\r\n     */\r\n    constructor($root) {\r\n        $root.validate({\r\n            errorClass: 'error contact-form__error',\r\n    \r\n            highlight(element) {\r\n                $(element).addClass(function() {\r\n                    return getInvalidClassName($(this));\r\n                });\r\n            },\r\n    \r\n            unhighlight(element) {\r\n                $(element).removeClass(function() {\r\n                    return getInvalidClassName($(this));\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    // ------------------------- BEGIN PUBLIC METHODS -------------------------\r\n\r\n    /**\r\n     * Initialize all contact form blocks on the page.\r\n     */\r\n    static initAll() {\r\n        $('.contact-form').each(function() {\r\n            new ContactForm($(this));\r\n        });\r\n    }\r\n\r\n    // -------------------------- END PUBLIC METHODS --------------------------\r\n}\r\n\r\nexport default ContactForm;","/**\r\n * @file Implementation of the gallery block\r\n * @author Andrey Glotov\r\n */\r\n\r\nclass Gallery {\r\n    \r\n    /**\r\n     * Initialize a gallery block\r\n     * \r\n     * @param {JQuery} $root The block's root\r\n     */\r\n    constructor($root) {\r\n        $root.magnificPopup({\r\n            delegate: '.gallery__thumb-link',\r\n            mainClass: 'lightbox',\r\n            type: 'image',\r\n\r\n            gallery: {\r\n                enabled: true,\r\n                tCounter: '',\r\n            },\r\n\r\n            closeMarkup: `\r\n                <button aria-label=\"Close\" type=\"button\" class=\"mfp-close\">\r\n                    &#215;\r\n                </button>\r\n            `,\r\n            arrowMarkup: `\r\n                <button \r\n                    aria-label=\"%title%\"\r\n                    type=\"button\"\r\n                    class=\"mfp-arrow mfp-arrow-%dir%\"\r\n                >\r\n                </button>\r\n            `,\r\n\r\n            callbacks: {\r\n                beforeOpen() {\r\n                    // For web accessibility\r\n                    this.wrap.attr({\r\n                        'role': 'dialog',\r\n                        'aria-label': 'Gallery',\r\n                    });\r\n                },\r\n            },\r\n        });\r\n    }\r\n\r\n    // ------------------------- BEGIN PUBLIC METHODS -------------------------\r\n\r\n    /**\r\n     * Initialize all gallery blocks on the page.\r\n     */\r\n    static initAll() {\r\n        $('.gallery').each(function() {\r\n            new Gallery($(this));\r\n        });\r\n    }\r\n\r\n    // -------------------------- END PUBLIC METHODS --------------------------\r\n}\r\n\r\nexport default Gallery;\r\n","/**\r\n * @file Implementation of the location map block\r\n * @author Andrey Glotov\r\n */\r\n\r\n/* global L */\r\n\r\n// ------------------------------ BEGIN CONSTANTS -----------------------------\r\n\r\nconst markerIcon = L.icon({\r\n    iconUrl: 'img/map-marker.svg',\r\n    iconSize: [35, 53], \r\n    iconAnchor: [18, 53],\r\n});\r\n\r\n// ------------------------------- END CONSTANTS ------------------------------\r\n\r\n/**\r\n * Location Map block implementation.\r\n */\r\nclass LocationMap {\r\n\r\n    /**\r\n     * Create location map\r\n     * \r\n     * @param {JQuery} $root The root element\r\n     */\r\n    constructor($root) {\r\n        const { latlng, zoom } = $root.data('map');\r\n\r\n        const $container = $('.location-map__container', $root);\r\n\r\n        const map = L.map($container.get(0), {\r\n            scrollWheelZoom: false,\r\n        }).setView(latlng, zoom);\r\n\r\n        L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {\r\n            attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy; <a href=\"https://carto.com/attributions\">CARTO</a>',\r\n            subdomains: 'abcd',\r\n            maxZoom: 19,\r\n        }).addTo(map);\r\n\r\n        L.marker(latlng, {\r\n            icon: markerIcon\r\n        }).addTo(map);\r\n\r\n        map.on('focus', this._handleMapFocus.bind(this));\r\n        map.on('blur', this._handleMapBlur.bind(this));\r\n\r\n        this._map = map;\r\n    }\r\n\r\n    // -------------------------- BEGIN EVENT HANDLERS ------------------------\r\n\r\n    _handleMapFocus() {\r\n        this._map.scrollWheelZoom.enable();\r\n    }\r\n\r\n    _handleMapBlur() {\r\n        this._map.scrollWheelZoom.disable();\r\n    }\r\n\r\n    // --------------------------- END EVENT HANDLERS -------------------------\r\n\r\n    // -------------------------- BEGIN PUBLIC METHODS ------------------------\r\n\r\n    /**\r\n     * Initialize all location map blocks on the page.\r\n     */\r\n    static initAll() {\r\n        $('.location-map').each(function() {\r\n            new LocationMap($(this));\r\n        });\r\n    }\r\n\r\n    // --------------------------- END PUBLIC METHODS -------------------------\r\n}\r\n\r\nexport default LocationMap;\r\n","/**\r\n * @file Implementation of the menu block\r\n * @author Andrey Glotov\r\n */\r\n\r\nclass Menu {\r\n    /**\r\n     * Crate a menu block\r\n     * \r\n     * @param {JQuery} $root The root element\r\n     */\r\n    constructor($root) {\r\n        $root.magnificPopup({\r\n            delegate: '.menu-product__link',\r\n            mainClass: 'lightbox',\r\n            type: 'image',\r\n    \r\n            closeMarkup: `\r\n                <button aria-label=\"Close\" type=\"button\" class=\"mfp-close\">\r\n                    &#215;\r\n                </button>\r\n            `,\r\n    \r\n            callbacks: {\r\n                beforeOpen() {\r\n                    // for web accessibility purposes\r\n                    this.wrap.attr({\r\n                        'role': 'dialog',\r\n                        'aria-label': 'View image',\r\n                    });\r\n                },\r\n            },\r\n        });\r\n    }\r\n\r\n    // ------------------------- BEGIN PUBLIC METHODS -------------------------\r\n\r\n    /**\r\n     * Initialize all menu blocks on the page.\r\n     */\r\n    static initAll() {\r\n        $('.menu').each(function() {\r\n            new Menu($(this));\r\n        });\r\n        \r\n        return true;\r\n    }\r\n\r\n    // -------------------------- END PUBLIC METHODS --------------------------\r\n}\r\n\r\nexport default Menu;\r\n","/**\r\n * @file Implementation of the select block\r\n * @author Andrey Glotov\r\n */\r\n\r\n/* global Popper */\r\n\r\n// ----------------------------- BEGIN CONSTANTS ------------------------------\r\n\r\nconst BLOCK = 'select';\r\n\r\nconst ClassNames = {\r\n    ORIGIN: `${BLOCK}__origin`,\r\n    BUTTON: `${BLOCK}__button`,\r\n    LIST: `${BLOCK}__list`,\r\n    LIST_EXPANDED: `${BLOCK}__list_expanded`,\r\n    OPTION: `${BLOCK}__option`,\r\n    OPTION_HIGHLIGHTED: `${BLOCK}__option_highlighted`,\r\n    ERROR: `${BLOCK}_error`,\r\n};\r\n\r\nconst Selectors = {\r\n    OPTION: `.${BLOCK}__option`,\r\n};\r\n\r\nconst Keys = {\r\n    TAB: 9,\r\n    ENTER: 13,\r\n    ESC: 27,\r\n    SPACE: 32,\r\n    END: 35,\r\n    HOME: 36,\r\n    UP: 38,\r\n    DOWN: 40,\r\n};\r\n\r\nconst Themes = {\r\n    'default': `${BLOCK}_theme_default`,\r\n    'small': `${BLOCK}_theme_small`,\r\n    'checkout': `${BLOCK}_theme_checkout`,\r\n};\r\n\r\n// ------------------------------ END CONSTANTS -------------------------------\r\n\r\nclass Select {\r\n  \r\n    /**\r\n     * Create a select\r\n     * \r\n     * @param {JQuery} $origin The original <select> element to replace\r\n     */\r\n    constructor($origin, { theme = 'default' } = {}) {\r\n        const id = $origin.attr('id');\r\n        const labelledBy = $origin.attr('aria-labelledby');\r\n        \r\n        const themeClass = (theme && (theme in Themes))\r\n            ? Themes[theme]\r\n            : Themes['default'];\r\n\r\n        // Create the root node\r\n        const $root = $('<div>').addClass(`${BLOCK} ${themeClass}`);\r\n\r\n        // Wrap original <select> into the root node and then hide\r\n        $origin.before($root).detach();\r\n        $root\r\n            .append($origin)\r\n            .addClass($origin.attr('class'));\r\n        $origin\r\n            .attr('tabindex', -1)\r\n            .removeClass()\r\n            .addClass(ClassNames.ORIGIN)\r\n            .removeAttr('id');\r\n\r\n        // Create the button\r\n        const $button = $('<button></button>', {\r\n            id,\r\n            type: 'button',\r\n            'aria-haspopup': 'listbox',\r\n            'aria-labelledby': labelledBy,\r\n            'aria-expanded': 'false',\r\n        }).addClass(ClassNames.BUTTON).appendTo($root);\r\n        \r\n        // Create the options list\r\n        const $list = $('<ul></ul>', {\r\n            tabindex: -1,\r\n            role: 'listbox',\r\n            'aria-labelledby': labelledBy,\r\n            'aria-orientation': 'horizontal',\r\n        }).addClass(ClassNames.LIST).appendTo($root);\r\n\r\n        this._elements = {\r\n            $root,\r\n            $origin,\r\n            $button,\r\n            $list,\r\n        };\r\n        \r\n        this._state = {\r\n            expanded: false,\r\n            selectedIndex: -1,\r\n            highlightedIndex: -1,\r\n            searchString: '',\r\n\r\n            popper: new Popper($button.get(0), $list.get(0), {\r\n                placement: 'bottom-start'\r\n            }),\r\n        };\r\n\r\n        this.update();\r\n        \r\n        this._handleOptionClick = this._handleOptionClick.bind(this);\r\n        this._handleButtonClick = this._handleButtonClick.bind(this);\r\n        this._handleOutsideClick = this._handleOutsideClick.bind(this);\r\n        this._handleListKeyDown = this._handleListKeyDown.bind(this);\r\n        this._handleKeyPress = this._handleKeyPress.bind(this);\r\n        this._handleOptionMouseOver = this._handleOptionMouseOver.bind(this);\r\n\r\n        $root.keypress(this._handleKeyPress);\r\n        $list.keydown(this._handleListKeyDown);\r\n        $list.on({\r\n            mouseover: this._handleOptionMouseOver,\r\n            click: this._handleOptionClick\r\n        }, Selectors.OPTION);\r\n        $button.click(this._handleButtonClick);\r\n    }\r\n\r\n    // ------------------------- BEGIN PRIVATE METHODS ------------------------\r\n\r\n    /**\r\n     * Update the list scroll position to show the highlighted option.\r\n     */\r\n    _scrollToHighlighted() {\r\n        const { $list, $options } = this._elements;\r\n        const { highlightedIndex } = this._state;\r\n\r\n        if  (highlightedIndex !== -1) {\r\n            const offsetTop = $options.eq(highlightedIndex).position().top;\r\n            const offsetBottom = offsetTop + \r\n                $options.eq(highlightedIndex).outerHeight();\r\n            const scrollTop = $list.scrollTop();\r\n            const listHeight = $list.innerHeight();\r\n\r\n            if (offsetTop < 0) {\r\n                $list.scrollTop(scrollTop + offsetTop);\r\n            } else if (offsetBottom > listHeight) {\r\n                $list.scrollTop(scrollTop + (offsetBottom - listHeight));\r\n            }\r\n        }\r\n    }\r\n  \r\n    /**\r\n     * Highlight the specified option\r\n     * \r\n     * @param {number} i Index of the option to highlight\r\n     */\r\n    _highlightOption(i) {\r\n        const { $options } = this._elements;\r\n        const { highlightedIndex } = this._state;\r\n        \r\n        if (highlightedIndex === i) {\r\n            return;\r\n        }\r\n        \r\n        $options.eq(highlightedIndex)\r\n            .removeClass(ClassNames.OPTION_HIGHLIGHTED);\r\n        \r\n        $options.eq(i).addClass(ClassNames.OPTION_HIGHLIGHTED);\r\n        \r\n        this._state.highlightedIndex = i;\r\n        \r\n        this._scrollToHighlighted();\r\n    }\r\n\r\n    /**\r\n     * Search the next option starting with the given substring\r\n     * \r\n     * @param {string} str The search string\r\n     */\r\n    _findOption(str) {\r\n        const { selectedIndex } = this._state;\r\n        const { $options } = this._elements;\r\n\r\n        if (selectedIndex === -1) {\r\n            for (let i = 0; i < $options.length; i++) {\r\n                if ($($options[i]).text().startsWith(str)) {\r\n                    return i;\r\n                }\r\n            }\r\n        } else {\r\n            for (let i = selectedIndex; i < $options.length; i++) {\r\n                if ($($options[i]).text().startsWith(str)) {\r\n                    return i;\r\n                }\r\n            }\r\n\r\n            for (let i = 0; (i < selectedIndex) && (i < $options.length); i++) {\r\n                if ($($options[i]).text().startsWith(str)) {\r\n                    return i;\r\n                }\r\n            }\r\n        }\r\n\r\n        return -1;\r\n    }\r\n\r\n    /**\r\n     * Search options\r\n     * \r\n     * @param {string} c The next character to search\r\n     */\r\n    _search(c) {\r\n        const { searchString, expanded } = this._state;\r\n        let nextIndex = null;\r\n\r\n        if (~(nextIndex = this._findOption(searchString + c))) {\r\n            this._state.searchString += c;\r\n        } else if (~(nextIndex = this._findOption(c))) {\r\n            this._state.searchString = c;\r\n        } else {\r\n            this._state.searchString = '';\r\n            return;\r\n        }\r\n\r\n        this.selectOption(nextIndex);\r\n        if (expanded) {\r\n            this._highlightOption(nextIndex);\r\n        }\r\n    }\r\n\r\n    // -------------------------- END PRIVATE METHODS -------------------------\r\n\r\n    // -------------------------- BEGIN EVENT HANDLERS ------------------------\r\n\r\n    /**\r\n     * Handle the keypress event\r\n     * \r\n     * @param {JQuery} e The dispatched event\r\n     */\r\n    _handleKeyPress(e) {\r\n        this._search(String.fromCharCode(e.which));\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Handle the option mouseover event\r\n     * \r\n     * @param {jQuery.Event} e The event object\r\n     */\r\n    _handleOptionMouseOver(e) {\r\n        const { $options } = this._elements;\r\n        \r\n        const $highlightedOption = $(e.currentTarget);\r\n        \r\n        const newIndex = $options.index($highlightedOption);\r\n        if (newIndex === -1) {\r\n            return;\r\n        }\r\n        \r\n        const { highlightedIndex } = this._state;\r\n        \r\n        $options.eq(highlightedIndex)\r\n            .removeClass(ClassNames.OPTION_HIGHLIGHTED);\r\n\r\n        $options.eq(newIndex).addClass(ClassNames.OPTION_HIGHLIGHTED);\r\n        \r\n        this._state.highlightedIndex = newIndex;\r\n    }\r\n  \r\n    /**\r\n     * Handle the option click event\r\n     * \r\n     * @param {jQuery.Event} e The event object\r\n     */\r\n    _handleOptionClick(e) {\r\n        const { $options, $button } = this._elements;\r\n        \r\n        const $selectedOption = $(e.currentTarget);\r\n        const newIndex = $options.index($selectedOption);\r\n        \r\n        this.selectOption(newIndex);\r\n\r\n        this.collapse();\r\n        $button.focus();\r\n    }\r\n  \r\n    /**\r\n     * Handle the button click event\r\n     * \r\n     * @param {jQuery.Event} e The event object\r\n     */\r\n    _handleButtonClick() {\r\n        if (!this._state.expanded) {\r\n            this.expand();\r\n        } else {\r\n            this.collapse();\r\n        }\r\n    }\r\n  \r\n    /**\r\n     * Handle the click event outside expanded option list\r\n     * \r\n     * @param {jQuery.Event} e The event object\r\n     */\r\n    _handleOutsideClick(e) {\r\n        const { $root } = this._elements;\r\n\r\n        if (!$.contains($root.get(0), e.target)) {\r\n            this.collapse();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Handle the options list keydown event\r\n     * \r\n     * @param {jQuery.Event} e The event object\r\n     */\r\n    _handleListKeyDown(e) {\r\n        const { which } = e;\r\n        const { $button, $options } = this._elements;\r\n        const { highlightedIndex } = this._state;\r\n\r\n        switch (which) {\r\n        case Keys.TAB:\r\n            this.collapse();\r\n            break;\r\n            \r\n        case Keys.ENTER:\r\n            this.selectOption(highlightedIndex);\r\n            this.collapse();\r\n            $button.focus();\r\n            return false;\r\n            \r\n        case Keys.ESC:\r\n            this.collapse();\r\n            $button.focus();\r\n            return false;\r\n            \r\n        case Keys.UP:\r\n            if (highlightedIndex > 0) {\r\n                this._highlightOption(highlightedIndex - 1);\r\n                this.selectOption(highlightedIndex - 1);\r\n            }\r\n            return false;\r\n            \r\n        case Keys.DOWN:\r\n            if (highlightedIndex < $options.length - 1) {\r\n                this._highlightOption(highlightedIndex + 1);\r\n                this.selectOption(highlightedIndex + 1);\r\n            }\r\n            return false;\r\n            \r\n        case Keys.HOME:\r\n            this._highlightOption(0);\r\n            this.selectOption(0);\r\n            return false;\r\n            \r\n        case Keys.END:\r\n            this._highlightOption($options.length - 1);\r\n            this.selectOption($options.length - 1);\r\n            return false;\r\n        }\r\n    }\r\n\r\n    // --------------------------- END EVENT HANDLERS -------------------------\r\n\r\n    // -------------------------- BEGIN PUBLIC METHODS ------------------------\r\n\r\n    /**\r\n     * Select the given option\r\n     * \r\n     * @param {number} i Index of the option to be selected\r\n     */\r\n    selectOption(i) {\r\n        const { $origin, $options, $list, $button } = this._elements;\r\n        const { selectedIndex } = this._state;\r\n        \r\n        if ((i < 0) || (i > $options.length) || (i === selectedIndex)) {\r\n            return;\r\n        }\r\n        \r\n        $options.eq(selectedIndex).removeAttr('aria-selected');\r\n        \r\n        $options.eq(i).attr('aria-selected', 'true');\r\n        $list.attr('aria-activedescendant', $options.eq(i).attr('id'));\r\n        $button.text($options.eq(i).text());\r\n        $origin.val($options.eq(i).data('value')).change();\r\n        \r\n        this._state.selectedIndex = i;\r\n    }\r\n\r\n    /**\r\n     * Update options list.\r\n     * Call this method after you added/removed options manually.\r\n     */\r\n    update() {\r\n        const { $button, $origin, $list } = this._elements;\r\n\r\n        $list.empty();\r\n\r\n        const selectedIndex = $origin.prop('selectedIndex');\r\n        \r\n        $('option', $origin).each(function(i) {\r\n            const $originalOption = $(this);\r\n\r\n            const optionId = $originalOption.attr('id');\r\n\r\n            const $option = $('<li></li>', {\r\n                id: optionId,\r\n                role: 'option',\r\n            })\r\n                .text($originalOption.text())\r\n                .data('value', $originalOption.val())\r\n                .addClass(ClassNames.OPTION);\r\n\r\n            if (selectedIndex === i) {\r\n                $option.attr('aria-selected', 'true');\r\n                $list.attr('aria-activedescendant', optionId);\r\n                $button.text($originalOption.text());\r\n            }\r\n\r\n            $option.appendTo($list);\r\n\r\n            return $option;\r\n        });\r\n\r\n        this._elements.$options = $('li', $list);\r\n        \r\n        this._state.selectedIndex = selectedIndex;\r\n        this._state.popper.update();\r\n    }\r\n  \r\n    /**\r\n     * Collapse the options list.\r\n     */\r\n    collapse() {\r\n        const { $button, $list, $options } = this._elements;\r\n        const { highlightedIndex, expanded } = this._state;\r\n        \r\n        if (!expanded) {\r\n            return;\r\n        }\r\n\r\n        $list.removeClass(ClassNames.LIST_EXPANDED);\r\n        $button.attr('aria-expanded', 'false');\r\n        \r\n        if (highlightedIndex !== -1) {\r\n            $options.eq(highlightedIndex)\r\n                .removeClass(ClassNames.OPTION_HIGHLIGHTED);\r\n            this._state.highlightedIndex = -1;\r\n        }\r\n        \r\n        this._state.expanded = false;\r\n        \r\n        $(document).off('click', this._handleOutsideClick);\r\n    }\r\n  \r\n    /**\r\n     * Expand the options list.\r\n     */\r\n    expand() {\r\n        const { $button, $list, $options } = this._elements;\r\n        const { selectedIndex, expanded } = this._state;\r\n        \r\n        if (expanded) {\r\n            return;\r\n        }\r\n\r\n        $list.addClass(ClassNames.LIST_EXPANDED);\r\n        $button.attr('aria-expanded', 'true');\r\n        $list.scrollTop(0);\r\n\r\n        if (selectedIndex !== -1) {\r\n            $options.eq(selectedIndex).addClass(ClassNames.OPTION_HIGHLIGHTED);\r\n            this._state.highlightedIndex = selectedIndex;\r\n        }\r\n        \r\n        this._scrollToHighlighted();\r\n        \r\n        this._state.expanded = true;\r\n        \r\n        $list.focus();\r\n        \r\n        $(document).on('click', this._handleOutsideClick);\r\n    }\r\n\r\n    /**\r\n     * Set the invalid modifier.\r\n     * \r\n     * @param {boolean} error true if the select's value is invalid\r\n     */\r\n    setError(error) {\r\n        this._elements.$root.toggleClass(ClassNames.ERROR, error);\r\n    }\r\n\r\n    // --------------------------- END PUBLIC METHODS -------------------------\r\n}\r\n\r\nexport default Select;\r\n","/**\r\n * @file Implementation of the reservation form block\r\n * @author Andrey Glotov\r\n */\r\n\r\n/* global Pikaday, moment */\r\n\r\nimport Select from '../../common/select/select';\r\n\r\n// ------------------------------ BEGIN CONSTANTS -----------------------------\r\n\r\nconst BLOCK = 'reservation';\r\n\r\nconst Selectors = {\r\n    ROOT: `.${BLOCK}`,\r\n    DATE: `.${BLOCK}__input[name=\"date\"]`,\r\n    TIME: `.${BLOCK}__input[name=\"time\"]`,\r\n    PARTY: `.${BLOCK}__input[name=\"party\"]`,\r\n};\r\n\r\nconst Classes = {\r\n    ERROR: 'error reservation__error',\r\n    INPUT_INVALID: 'input_invalid',\r\n};\r\n\r\n// ------------------------------- END CONSTANTS ------------------------------\r\n\r\n/**\r\n * Implementation of the reservation form\r\n */\r\nclass Reservation {\r\n\r\n    /**\r\n     * Initialize a reservation form\r\n     * \r\n     * @param {JQuery} $root The root of the block\r\n     */\r\n    constructor($root) {\r\n        const $date = $(Selectors.DATE, $root);\r\n        const $time = $(Selectors.TIME, $root);\r\n        const $party = $(Selectors.PARTY, $root);\r\n\r\n        this._elements = {\r\n            $root,\r\n            $date,\r\n            $time,\r\n            $party,\r\n        };\r\n\r\n        // Create custom select menus\r\n        this._timeSelect = new Select($time);\r\n        this._partySelect = new Select($party);\r\n\r\n        const startDate = this._getStartDate();\r\n\r\n        // Create the date picker\r\n        this._datePicker = new Pikaday({\r\n            field: $date.get(0),\r\n\r\n            defaultDate: startDate.toDate(),\r\n            setDefaultDate: true,\r\n    \r\n            // Reservations can be made up to 6 months in advance\r\n            minDate: startDate.toDate(),\r\n            maxDate: moment(startDate).add(6, 'months').toDate(),\r\n    \r\n            format: 'DD/MM/YYYY',\r\n            theme: 'date-picker',\r\n    \r\n            onSelect: this._updateTimeOptions.bind(this),\r\n        });\r\n\r\n        // Generate initial time options\r\n        this._updateTimeOptions();\r\n\r\n        // Form validation\r\n        $root.validate({\r\n            rules: {\r\n                date: {\r\n                    required: true,\r\n                    validDate: true,\r\n                }\r\n            },\r\n            \r\n            errorClass: Classes.ERROR,\r\n    \r\n            highlight(element) {\r\n                $(element).addClass(Classes.INPUT_INVALID);\r\n            },\r\n\r\n            unhighlight(element) {\r\n                $(element).removeClass(Classes.INPUT_INVALID);\r\n            },\r\n        });\r\n\r\n        $root.submit(this._handleSubmit.bind(this));\r\n    }\r\n\r\n    // ------------------------ BEGIN PRIVATE METHODS -------------------------\r\n\r\n    /**\r\n     * Update options in the reservation time menu based on the currently\r\n     * selected date.\r\n     */\r\n    _updateTimeOptions() {\r\n        const { $time } = this._elements;\r\n\r\n        const $options = this._getAvailableTime().reduce(($options, time) => {\r\n            return $options.add($('<option></option>')\r\n                .val(time)\r\n                .text(time)\r\n                .prop('selected', time === $time.val()));\r\n        }, $());\r\n\r\n        $time.empty().append($options);\r\n\r\n        this._timeSelect.update();\r\n    }\r\n\r\n    /**\r\n     * Return the first date that could be selected for reservation\r\n     */\r\n    _getStartDate() {\r\n        const currentMoment = moment();\r\n\r\n        // The latest allowed reservation time is 11.30 PM. After that moment,\r\n        // only the next day could be selected\r\n        if ((currentMoment.hour() === 23) && (currentMoment.minutes() >= 30)) {\r\n            currentMoment.add(1, 'days');\r\n        }\r\n\r\n        return moment({\r\n            year: currentMoment.year(),\r\n            month: currentMoment.month(),\r\n            date: currentMoment.date(),\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Get the list of available reservation times based on the selected date\r\n     */\r\n    _getAvailableTime() {\r\n        const time = [];\r\n\r\n        // If today is selected, make sure the resulting array contains only\r\n        // times after the current moment\r\n        const startMoment = moment.max(this._datePicker.getMoment(), moment());\r\n\r\n        // Start from the nearest half hour\r\n        if ((startMoment.minutes() % 30) !== 0) {\r\n            startMoment.add(30 - (startMoment.minutes() % 30), 'minutes');\r\n        }\r\n\r\n        for (\r\n            const m = moment(startMoment);\r\n            m.day() === startMoment.day();\r\n            m.add(30, 'minutes')\r\n        ) {\r\n            time.push(m.format('h:mm A'));\r\n        }\r\n\r\n        return time;\r\n    }\r\n\r\n    // ------------------------- END PRIVATE METHODS --------------------------\r\n\r\n    // ------------------------- BEGIN EVENT HANDLERS -------------------------\r\n\r\n    /**\r\n     * Handle the submit event\r\n     */\r\n    _handleSubmit() {\r\n        // TODO: send the form data to the server or to some third-party service\r\n        // e.g. OpenTable\r\n\r\n        return false;\r\n    }\r\n\r\n    // -------------------------- END EVENT HANDLERS --------------------------\r\n\r\n    // ------------------------- BEGIN PUBLIC METHODS -------------------------\r\n\r\n    /**\r\n     * Initialize all reservation blocks on the page\r\n     */\r\n    static initAll() {\r\n        $(Selectors.ROOT).each(function() {\r\n            new Reservation($(this));\r\n        });\r\n    }\r\n\r\n    // -------------------------- END PUBLIC METHODS --------------------------\r\n}\r\n\r\nexport default Reservation;\r\n","/**\r\n * @file Implementation of the slider block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// ----------------------------- BEGIN CONSTANTS ------------------------------\r\nconst AUTOPLAY_SPEED = 5000;\r\nconst TRANSITION_SPEED = 500;\r\n// ------------------------------ END CONSTANTS -------------------------------\r\n\r\n/**\r\n * Slider implementation\r\n */\r\nclass Slider {\r\n\r\n    /**\r\n     * Construct a slider\r\n     * \r\n     * @param {JQuery} $root The root element\r\n     */\r\n    constructor($root) {\r\n        const $container = $('.slider__container', $root);\r\n        const $prevArrow = $('.slider__arrow_dir_prev', $root);\r\n        const $nextArrow = $('.slider__arrow_dir_next', $root);\r\n\r\n        $container.slick({\r\n            rows: 0,\r\n            zIndex: 1,\r\n\r\n            cssEase: 'linear',\r\n            fade: true,\r\n            speed: TRANSITION_SPEED,\r\n\r\n            autoplay: true,\r\n            autoplaySpeed: AUTOPLAY_SPEED,\r\n            pauseOnFocus  : false,\r\n            pauseOnHover  : false,\r\n\r\n            prevArrow: $prevArrow,\r\n            nextArrow: $nextArrow,\r\n        });\r\n\r\n        $container.on('beforeChange', this._handleSlickBeforeChange);\r\n    }\r\n\r\n    // -------------------------- BEGIN EVENT HANDLERS ------------------------\r\n\r\n    /**\r\n     * Remove the \"active\" modifier from the previous slide and apply it to the\r\n     * current one\r\n     * @param {Object} e The event\r\n     * @param {Object} slick Slider instance\r\n     * @param {number} current Current slide index\r\n     * @param {number} next Next slide index\r\n     */\r\n    _handleSlickBeforeChange(e, slick, current, next) {\r\n        slick.$slides.eq(current).removeClass('slider__slide_active');\r\n        slick.$slides.eq(next).addClass('slider__slide_active');\r\n    }\r\n\r\n    // --------------------------- END EVENT HANDLERS -------------------------\r\n\r\n    // -------------------------- BEGIN PUBLIC METHODS ------------------------\r\n\r\n    /**\r\n     * Initialize all slider blocks on the page.\r\n     */\r\n    static  initAll() {\r\n        $('.slider').each(function() {\r\n            new Slider($(this));\r\n        });\r\n    }\r\n\r\n    // --------------------------- END PUBLIC METHODS -------------------------\r\n}\r\n\r\nexport default Slider;","/**\r\n * @file Implementation of the specials slider block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport forceReflow from '../../../js/utils/force-reflow';\r\n\r\n// ----------------------------- BEGIN CONSTANTS ------------------------------\r\n\r\n// Keep these in sync with css!\r\n// TODO: read these values using the computed styles\r\nconst GUTTER_WIDTH = 25;\r\nconst MIN_OPACITY = 0.5;\r\nconst MIN_SCALE = 0.8;\r\nconst TRANSITION_DURATION = 150;\r\n\r\nconst Selectors = {\r\n    ROOT: '.specials-slider',\r\n    SLIDES: '.specials-slider__slide',\r\n    SLIDE_INNER: '.specials-slider__slide-inner',\r\n    PREV_ARROW: '.specials-slider__arrow_dir_prev',\r\n    NEXT_ARROW: '.specials-slider__arrow_dir_next',\r\n};\r\n\r\nconst ClassNames = {\r\n    SLIDE_MOVING: 'specials-slider__slide_moving',\r\n    SLIDE_ACTIVE: 'specials-slider__slide_active',\r\n};\r\n\r\n// ------------------------------- END CONSTANT -------------------------------\r\n\r\n/**\r\n * Specials Slider\r\n */\r\nclass SpecialsSlider {\r\n\r\n    /**\r\n     * Create a slider\r\n     * \r\n     * @param {JQuery} $root The root element\r\n     */\r\n    constructor($root) {\r\n        const $slides = $(Selectors.SLIDES, $root);\r\n        const $prevArrow = $(Selectors.PREV_ARROW, $root);\r\n        const $nextArrow = $(Selectors.NEXT_ARROW, $root);\r\n\r\n        this._elements = { $root, $slides, $prevArrow, $nextArrow };\r\n\r\n        this._state = {\r\n            isTransitioning: false,\r\n            activeIndex: 0,\r\n        };\r\n\r\n        this._config = {\r\n            dOffset: GUTTER_WIDTH / ($slides.length - 1),\r\n            dOpacity: (1 - MIN_OPACITY) / ($slides.length - 1),\r\n            dScale: (1 - MIN_SCALE) / ($slides.length - 1),\r\n        };\r\n\r\n        $prevArrow.click(this.prevSlide.bind(this));\r\n        $nextArrow.click(this.nextSlide.bind(this));\r\n\r\n        this._updateStyles();\r\n    }\r\n\r\n    // -------------------------- BEGIN PRIVATE METHODS -----------------------\r\n\r\n    /**\r\n     * Apply CSS styles to the given slide\r\n     * \r\n     * @param {JQuery} $slide The slide to apply styles to\r\n     * @param {number} order Current stacking order of this slide\r\n     */\r\n    _applySlideStyles($slide, order) {\r\n        const {dOffset, dOpacity, dScale} = this._config;\r\n        \r\n        $slide.css({\r\n            transform: `translateX(${order * dOffset}%)`,\r\n            zIndex: this._elements.$slides.length - order,\r\n        }).find(Selectors.SLIDE_INNER).css({\r\n            opacity: (1 - (order * dOpacity)),\r\n            transform: `scale(${1 - (order * dScale)})`,\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Update CSS styles of all slides\r\n     */\r\n    _updateStyles() { \r\n        const total = this._elements.$slides.length;\r\n    \r\n        this._elements.$slides.each((i, slide) => {\r\n            const $slide = $(slide);\r\n\r\n            if (!$slide.hasClass(ClassNames.SLIDE_MOVING)) {\r\n                const order = (i - this._state.activeIndex + total) % total;\r\n                this._applySlideStyles($slide, order);\r\n            }\r\n        });\r\n    }\r\n\r\n    // --------------------------- END PRIVATE METHODS ------------------------\r\n\r\n    // -------------------------- BEGIN PUBLIC METHODS ------------------------\r\n\r\n    /**\r\n     * Transition to the previous slide\r\n     */\r\n    prevSlide() {\r\n        if (this._state.isTransitioning) {\r\n            return;\r\n        }\r\n        this._state.isTransitioning = true;\r\n\r\n        let activeIndex = this._state.activeIndex;\r\n        const $slides = this._elements.$slides;\r\n\r\n        const $prevSlide = $slides.eq(activeIndex);\r\n\r\n        activeIndex--;\r\n        if (activeIndex < 0) {\r\n            activeIndex = $slides.length - 1;\r\n        }\r\n        this._state.activeIndex = activeIndex;\r\n\r\n        const $movingSlide = $slides.eq(activeIndex);\r\n        \r\n        $movingSlide.addClass(ClassNames.SLIDE_MOVING);\r\n        $movingSlide.css('zIndex', '-=1');\r\n\r\n        setTimeout(() => {\r\n            this._updateStyles();\r\n\r\n            setTimeout(() => {\r\n                forceReflow($movingSlide);\r\n\r\n                $prevSlide.removeClass(ClassNames.SLIDE_ACTIVE);\r\n                $movingSlide.addClass(ClassNames.SLIDE_ACTIVE);\r\n                $movingSlide.removeClass(ClassNames.SLIDE_MOVING);\r\n\r\n                this._applySlideStyles($movingSlide, 0);\r\n\r\n                this._state.isTransitioning = false;\r\n            }, TRANSITION_DURATION);\r\n        }, TRANSITION_DURATION);\r\n    }\r\n\r\n    /**\r\n     * Transition to the next slide\r\n     */\r\n    nextSlide() {\r\n        if (this._state.isTransitioning) {\r\n            return;\r\n        }\r\n        this._state.isTransitioning = true;\r\n\r\n        let activeIndex = this._state.activeIndex;\r\n        const $slides = this._elements.$slides;\r\n        const $movingSlide = $slides.eq(activeIndex);\r\n        \r\n        $movingSlide.addClass(ClassNames.SLIDE_MOVING);\r\n        $movingSlide.css('zIndex', '+=1');\r\n        $movingSlide.removeClass(ClassNames.SLIDE_ACTIVE);\r\n\r\n        activeIndex++;\r\n        if (activeIndex >= $slides.length) {\r\n            activeIndex = 0;\r\n        }\r\n        this._state.activeIndex = activeIndex;\r\n\r\n        const $nextSlide = $slides.eq(activeIndex);\r\n        $nextSlide.addClass(ClassNames.SLIDE_ACTIVE);\r\n        \r\n        setTimeout(() => {\r\n            this._updateStyles();\r\n            \r\n            setTimeout(() => {\r\n                $movingSlide.removeClass(ClassNames.SLIDE_MOVING);\r\n                \r\n                this._applySlideStyles($movingSlide, $slides.length - 1);\r\n\r\n                this._state.isTransitioning = false;\r\n            }, TRANSITION_DURATION);\r\n        }, TRANSITION_DURATION);\r\n    }\r\n\r\n    /**\r\n     * Initialize all specials slider blocks on the page\r\n     */\r\n    static initAll() {\r\n        $(Selectors.ROOT).init(function() {\r\n            new SpecialsSlider($(this));\r\n        });\r\n    }\r\n\r\n    // --------------------------- END PUBLIC METHODS -------------------------\r\n}\r\n\r\nexport default SpecialsSlider;\r\n","/**\r\n * @file Implementation of the tabs block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport forceReflow from '../../../js/utils/force-reflow';\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\nconst TRANSITION_DURATION = 200;\r\nconst MOBILE_BREAKPOINT = 768;\r\n\r\nconst ClassNames = {\r\n    PANEL_ACTIVE: 'tabs__panel_active',\r\n    PANEL_HIDDEN: 'tabs__panel_hidden',\r\n};\r\n  \r\nconst Selectors = {\r\n    ROOT: '.tabs',\r\n    TABLIST: '.tabs__list',\r\n    TABS: '.tabs__tab',\r\n    PANELS: '.tabs__panel',\r\n};\r\n  \r\nconst Keys = {\r\n    ENTER: 13,\r\n    SPACE: 32,\r\n    END: 35,\r\n    HOME: 36,\r\n    LEFT: 37,\r\n    UP: 38,\r\n    RIGHT: 39,\r\n    DOWN: 40,\r\n};\r\n\r\nlet isMobile = true;\r\nconst tabs = [];\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n/**\r\n * Tabs implementation\r\n */\r\nclass Tabs {\r\n\r\n    /**\r\n     * Create tabs.\r\n     * \r\n     * @param {JQuery} $root The root element\r\n     */\r\n    constructor($root) {\r\n        const $list = $(Selectors.TABLIST, $root);\r\n        const $tabs = $(Selectors.TABS, $list);\r\n        const $panels = $(Selectors.PANELS, $root);\r\n\r\n        if (($tabs.length === 0) || ($tabs.length !== $panels.length)) {\r\n            return;\r\n        }\r\n\r\n        let activeIndex = null;\r\n\r\n        $tabs.each(function(i) {\r\n            const $tab = $(this);\r\n\r\n            if ($tab.attr('aria-selected') === 'true') {\r\n                if (activeIndex === -1) {\r\n                    activeIndex = i;\r\n                } else {\r\n                    $tab.attr('aria-selected', 'false');\r\n                }\r\n\r\n                $tab.attr('tabindex', '0');\r\n            } else {\r\n                $tab.attr('tabindex', '-1');\r\n            }\r\n        });\r\n        \r\n        if (activeIndex == null) {\r\n            $tabs.eq(0).attr({\r\n                'aria-selected': 'true',\r\n                'tabindex': '0',\r\n            });\r\n\r\n            activeIndex = 0;\r\n        }\r\n        \r\n        $panels.each(function(i) {\r\n            $(this).toggleClass(ClassNames.PANEL_ACTIVE, i === activeIndex);\r\n        });\r\n\r\n        this._elements = {\r\n            $root,\r\n            $list,\r\n            $tabs,\r\n            $panels,\r\n        };\r\n    \r\n        this._state = {\r\n            activeIndex,\r\n            isTransitioning: false,\r\n            orientation: 'vertical',\r\n        };\r\n\r\n        this._handleTabClick = this._handleTabClick.bind(this);\r\n        this._handleTabKeyDown = this._handleTabKeyDown.bind(this);\r\n\r\n        $list.on('click', Selectors.TABS, this._handleTabClick);\r\n        $list.on('keydown', Selectors.TABS, this._handleTabKeyDown);\r\n    }\r\n    \r\n    // --------------------------- BEGIN EVENT HANDLERS --------------------------\r\n    \r\n    /**\r\n     * Handle the tab click event\r\n     * \r\n     * @param {JQuery.Event} e The event object\r\n     */\r\n    _handleTabClick(e) {\r\n        const tabIndex = this._elements.$tabs.index($(e.currentTarget));\r\n        this.showTab(tabIndex);\r\n        return false;\r\n    }\r\n  \r\n    /**\r\n     * Handle the tab keydown event\r\n     * \r\n     * @param {JQuery.Event} e The event object\r\n     */\r\n    _handleTabKeyDown(e) {  \r\n        const { $tabs } = this._elements;\r\n        const { orientation, activeIndex } = this._state;\r\n        const { which } = e;\r\n      \r\n        let nextFocus = null;\r\n\r\n        switch (which) {\r\n        case Keys.END:\r\n            // Move focus to the last tab\r\n            nextFocus = $tabs.length - 1;\r\n            break;\r\n  \r\n        case Keys.HOME:\r\n            // Move focus to the first tab\r\n            nextFocus = 0;\r\n            break;\r\n  \r\n        case Keys.DOWN:\r\n            // Move focus to the next tab (in vertical tab list)\r\n            if (orientation === 'vertical') {\r\n                nextFocus = ($tabs.length + activeIndex + 1) % $tabs.length;\r\n            }\r\n            break;\r\n  \r\n        case Keys.LEFT:\r\n            // Move focus to the previous tab (in horizontal tab list)\r\n            if (orientation === 'horizontal') {\r\n                nextFocus = ($tabs.length + activeIndex - 1) % $tabs.length;\r\n            }\r\n            break;\r\n  \r\n        case Keys.UP:\r\n            // Move focus to the previous tab (in vertical tab list)\r\n            if (orientation === 'vertical') {\r\n                nextFocus = ($tabs.length + activeIndex - 1) % $tabs.length;\r\n            }\r\n            break;\r\n  \r\n        case Keys.RIGHT:\r\n            // Move focus to the next tab (in horizontal tab list)\r\n            if (orientation === 'horizontal') {\r\n                nextFocus = ($tabs.length + activeIndex + 1) % $tabs.length;\r\n            }\r\n            break;\r\n        }\r\n\r\n        if (nextFocus != null) {\r\n            this.showTab(nextFocus);\r\n            return false;\r\n        }\r\n    }\r\n    \r\n    // ---------------------------- END EVENT HANDLERS ---------------------------\r\n    \r\n    // --------------------------- BEGIN PUBLIC METHODS --------------------------\r\n    \r\n    /**\r\n     * Activate the given tab.\r\n     * \r\n     * @param {number} i index of the tab to be activated\r\n     */\r\n    showTab(i) {\r\n        const { $tabs, $panels } = this._elements;\r\n        const { isTransitioning, activeIndex } = this._state;\r\n\r\n        if ((i < 0) || (i >= $tabs.length)) {\r\n            return;\r\n        }\r\n      \r\n        if (isTransitioning || (activeIndex === i)) {\r\n            return;\r\n        }\r\n      \r\n        this._state.isTransitioning = true;\r\n      \r\n        const $prevTab = $tabs.eq(activeIndex);\r\n        const $prevPanel = $panels.eq(activeIndex);\r\n        const $nextTab = $tabs.eq(i);\r\n        const $nextPanel = $panels.eq(i);\r\n      \r\n        $prevTab.attr({\r\n            'aria-selected': 'false',\r\n            'tabindex': '-1',\r\n        });\r\n        $nextTab.attr({\r\n            'aria-selected': 'true',\r\n            'tabindex': '0',\r\n        });\r\n\r\n        $nextTab.focus();\r\n\r\n        $prevPanel.addClass(ClassNames.PANEL_HIDDEN);\r\n\r\n        setTimeout(() => {\r\n            $prevPanel\r\n                .removeClass(ClassNames.PANEL_ACTIVE)\r\n                .removeClass(ClassNames.PANEL_HIDDEN);\r\n            $nextPanel\r\n                .addClass(ClassNames.PANEL_ACTIVE)\r\n                .addClass(ClassNames.PANEL_HIDDEN);\r\n            \r\n            forceReflow($nextPanel);\r\n            \r\n            $nextPanel.removeClass(ClassNames.PANEL_HIDDEN);\r\n            \r\n            this._state.activeIndex = i;\r\n            this._state.isTransitioning = false;\r\n        }, TRANSITION_DURATION);\r\n    }\r\n    \r\n    /**\r\n     * Change tabs orienation.\r\n     * \r\n     * @param {string} orientation 'vertical' or 'horizontal'\r\n     */\r\n    setOrientation(orientation) {\r\n        this._state.orientation = orientation;\r\n        this._elements.$list.attr('aria-orientation', orientation);\r\n    }\r\n    \r\n    /** \r\n     * Initialize all tabs blocks on the page.\r\n     */\r\n    static initAll() {\r\n        $(Selectors.ROOT).each(function() {\r\n            tabs.push(new Tabs($(this)));\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Respond to window resize event.\r\n     * \r\n     * Switch between vertical orientation on mobile devices and horizontal\r\n     * orientation on larger screens.\r\n     */\r\n    static handleResize() {\r\n        if (!isMobile && ($(window).outerWidth() < MOBILE_BREAKPOINT)) {\r\n            isMobile = true;\r\n    \r\n            tabs.forEach((tab) => tab.setOrientation('vertical'));\r\n        } else if (isMobile && ($(window).outerWidth() >= MOBILE_BREAKPOINT)) {\r\n            isMobile = false;\r\n    \r\n            tabs.forEach((tab) => tab.setOrientation('horizontal'));\r\n        }\r\n    }\r\n\r\n    // ---------------------------- END PUBLIC METHODS ---------------------------\r\n}\r\n\r\nexport default Tabs;\r\n","/**\r\n * @file Implementation of the portfolio filter block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\nconst BLOCK = 'portfolio-filter';\r\n\r\nconst ClassNames = {\r\n    LIST_VISIBLE: `${BLOCK}__list_visible`,\r\n    OPTION_HIGHLIGHTED: `${BLOCK}__option_highlighted`,\r\n};\r\n\r\nconst Selectors = {\r\n    ROOT: `.${BLOCK}`,\r\n    INNER: `.${BLOCK}__inner`,\r\n    TOGGLE: `.${BLOCK}__toggle`,\r\n    LIST: `.${BLOCK}__list`,\r\n    OPTION: `.${BLOCK}__option`,\r\n};\r\n\r\nconst Keys = {\r\n    TAB: 9,\r\n    ENTER: 13,\r\n    ESC: 27,\r\n    SPACE: 32,\r\n    END: 35,\r\n    HOME: 36,\r\n    LEFT: 37,\r\n    UP: 38,\r\n    RIGHT: 39,\r\n    DOWN: 40,\r\n};\r\n\r\nconst elements = {};\r\nconst config = {};\r\n\r\nconst state = {\r\n    selectedIndex: 0,\r\n    highlightedIndex: 0,\r\n    isDropdown: true,\r\n    isExpanded: false,\r\n};\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// -------------------------- BEGIN PRIVATE METHODS ---------------------------\r\n\r\n/**\r\n * Expand the option list on mobile screens\r\n */\r\nfunction expandList() {\r\n    const { $toggle, $list } = elements;\r\n\r\n    $toggle.attr('aria-expanded', 'true');\r\n\r\n    $list\r\n        .addClass(ClassNames.LIST_VISIBLE)\r\n        .focus();\r\n\r\n    highlightOption(state.selectedIndex);\r\n\r\n    state.isExpanded = true;\r\n\r\n    $(document).on('click', handleOutsideClick);\r\n}\r\n\r\n/**\r\n * Collapse the option list on mobile screens\r\n */\r\nfunction collapseList() {\r\n    const { $toggle, $list } = elements;\r\n\r\n    $list.removeClass(ClassNames.LIST_VISIBLE);\r\n\r\n    $toggle.attr('aria-expanded', 'false');\r\n\r\n    state.isExpanded = false;\r\n\r\n    $(document).off('click', handleOutsideClick);\r\n}\r\n\r\n/**\r\n * Highlight the given option\r\n * \r\n * @param {number} i Index of the option to be highlighted\r\n */\r\nfunction highlightOption(i) {\r\n    const { $options } = elements;\r\n    const { highlightedIndex } = state;\r\n\r\n    if ((i < 0) || (i > $options.length) || (i === highlightedIndex)) {\r\n        return;\r\n    }\r\n    \r\n    $options.eq(highlightedIndex).removeClass(ClassNames.OPTION_HIGHLIGHTED);\r\n    $options.eq(i).addClass(ClassNames.OPTION_HIGHLIGHTED);\r\n\r\n    state.highlightedIndex = i;\r\n}\r\n\r\n/**\r\n * Select the given option\r\n * \r\n * @param {number} i Index of the option to be selected\r\n */\r\nfunction selectOption(i) {\r\n    const { $list, $options  } = elements;\r\n    \r\n    if ((i < 0) || (i > $options.length) || (i === state.selectedIndex)) {\r\n        return;\r\n    }\r\n    \r\n    $options.eq(state.selectedIndex).removeAttr('aria-selected');\r\n    $options.eq(i).attr('aria-selected', 'true');\r\n\r\n    $list.attr('aria-activedescendant', $options.eq(i).attr('id'));\r\n    state.selectedIndex = i;\r\n\r\n    highlightOption(i);\r\n\r\n    config.onChange($options.eq(i).data('filter'));\r\n}\r\n\r\n// ---------------------------- END PRIVATE METHODS ---------------------------\r\n\r\n// --------------------------- BEGIN EVENT HANDLERS ---------------------------\r\n\r\n/**\r\n * Handle the option click event\r\n * \r\n * @param {jQuery.Event} e The event object\r\n */\r\nfunction handleOptionClick(e) {\r\n    const { $toggle, $options } = elements;\r\n\r\n    const newIndex = $options.index($(e.currentTarget));\r\n    \r\n    selectOption(newIndex);\r\n\r\n    if (state.isExpanded) {\r\n        collapseList();\r\n        $toggle.focus();\r\n    }\r\n}\r\n\r\n/**\r\n * Handle the toggle button click event\r\n */\r\nfunction handleToggleClick() {\r\n    if (!state.isExpanded) {\r\n        expandList();\r\n    } else {\r\n        collapseList();\r\n    }\r\n}\r\n\r\n/**\r\n * Handle the click event outside expanded list\r\n * \r\n * @param {jQuery.Event} e The event object\r\n */\r\nfunction handleOutsideClick(e) {\r\n    const { $inner } = elements;\r\n\r\n    if (!$.contains($inner.get(0), e.target)) {\r\n        collapseList();\r\n    }\r\n}\r\n\r\n/**\r\n * Handle the options list keydown event\r\n * \r\n * @param {jQuery.Event} e The event object\r\n */\r\nfunction handleListKeyDown(e) {\r\n    const { which } = e;\r\n    const { $toggle, $options } = elements;\r\n\r\n    const { highlightedIndex, isDropdown, isExpanded } = state;\r\n\r\n    switch (which) {\r\n    case Keys.TAB:\r\n        if (isExpanded) {\r\n            collapseList();\r\n        }\r\n        break;\r\n\r\n    case Keys.ENTER:\r\n        selectOption(highlightedIndex);\r\n        if (isExpanded) {\r\n            collapseList();\r\n            $toggle.focus();\r\n        }\r\n        return false;\r\n\r\n    case Keys.ESC:\r\n        if (isExpanded) {\r\n            collapseList();\r\n            $toggle.focus();\r\n        }\r\n        return false;\r\n    \r\n    case Keys.LEFT:\r\n        if (!isDropdown && (highlightedIndex > 0)) {\r\n            highlightOption(highlightedIndex - 1);\r\n        }\r\n        return false;\r\n\r\n    case Keys.UP:\r\n        if (isDropdown && (highlightedIndex > 0)) {\r\n            highlightOption(highlightedIndex - 1);\r\n        }\r\n        return false;\r\n        \r\n    case Keys.RIGHT:\r\n        if (!isDropdown && (highlightedIndex < $options.length - 1)) {\r\n            highlightOption(highlightedIndex + 1);\r\n        }\r\n        return false;\r\n\r\n    case Keys.DOWN:\r\n        if (isDropdown && (highlightedIndex < $options.length - 1)) {\r\n            highlightOption(highlightedIndex + 1);\r\n        }\r\n        return false;\r\n        \r\n    case Keys.HOME:\r\n        highlightOption(0);\r\n        return false;\r\n        \r\n    case Keys.END:\r\n        highlightOption($options.length - 1);\r\n        return false;\r\n    }\r\n}\r\n\r\n// ---------------------------- END EVENT HANDLERS ----------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n\r\n/**\r\n * Initialize the portfolio filter block.\r\n */\r\nexport function initBlock({ onChange }) {\r\n    const $root = $(Selectors.ROOT);\r\n    const $inner = $(Selectors.INNER, $root);\r\n    const $toggle = $(Selectors.TOGGLE, $inner);\r\n    const $list = $(Selectors.LIST, $inner);\r\n    const $options = $(Selectors.OPTION, $list);\r\n\r\n    config.onChange = onChange;\r\n\r\n    elements.$inner = $inner;\r\n    elements.$toggle = $toggle;\r\n    elements.$list = $list;\r\n    elements.$options = $options;\r\n\r\n    $list.keydown(handleListKeyDown);\r\n    $list.on('click', Selectors.OPTION, handleOptionClick);\r\n    $toggle.click(handleToggleClick);\r\n}\r\n\r\n/**\r\n * Toggle the dropdown mode\r\n * \r\n * @param {boolean} dropdown whether to active the dropdown mode\r\n */\r\nexport function setDropdownMode(dropdown) {\r\n    if (!dropdown && state.isExpanded) {\r\n        collapseList();\r\n    }\r\n\r\n    elements.$list\r\n        .attr('aria-orientation', dropdown ? 'vertical' : 'horizontal');\r\n\r\n    state.isDropdown = dropdown;\r\n}\r\n\r\n/**\r\n * Apply a filter.\r\n * \r\n * @param {string} filter - The filter to be applied\r\n */\r\nexport function setFilter(filter) {\r\n    const sel = `${Selectors.OPTION}[data-filter=\"${filter}\"]`;\r\n    selectOption(elements.$options.index($(sel)));\r\n}\r\n\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the portfolio grid block\r\n * @author Andrey Glotov\r\n */\r\n\r\n/* global Shuffle */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\nconst BLOCK = 'portfolio-grid';\r\n\r\nconst ClassNames = {\r\n    ITEM: `${BLOCK}__item`,\r\n    ITEM_INNER: `${BLOCK}__item-inner`,\r\n    IMG: `${BLOCK}__img`,\r\n    OVERLAY: `${BLOCK}__overlay`,\r\n    TITLE: `${BLOCK}__title`,\r\n    LINK: `${BLOCK}__link`,\r\n    CATS: `${BLOCK}__cats`,\r\n    CAT_ITEM: `${BLOCK}__cat-item`,\r\n    CAT_LINK: `${BLOCK}__cat-link`,\r\n    OVERLAY_FOCUS: `${BLOCK}__overlay_has-focus`,\r\n};\r\n\r\nconst Selectors = {\r\n    ROOT: `.${BLOCK}`,\r\n    CONTAINER: `.${BLOCK}__container`,\r\n    LINK: `.${BLOCK}__link`,\r\n    IMG: `.${BLOCK}__img`,\r\n    SOURCE_WEBP: 'source[type=\"image/webp\"]',\r\n    SOURCE_JPEG: 'source[type=\"image/jpeg\"]',\r\n    CATS: `.${BLOCK}__cats`,\r\n    ITEM: `.${BLOCK}__item`,\r\n    SIZER: `.${BLOCK}__sizer`,\r\n    CAT_LINK: `.${BLOCK}__cat-link`,\r\n    OVERLAY: `.${BLOCK}__overlay`,\r\n};\r\n\r\n// Template markup for portfolio items\r\nconst itemHtml = `\r\n<article class=\"${ClassNames.ITEM}\">\r\n    <div class=\"${ClassNames.ITEM_INNER}\">\r\n        <picture>\r\n            <source type=\"image/webp\"></source>\r\n            <source type=\"image/jpeg\"></source>\r\n            <img class=\"${ClassNames.IMG}\" />\r\n        </picture>\r\n        <div class=\"${ClassNames.OVERLAY}\">\r\n            <h2 class=\"${ClassNames.TITLE}\">\r\n                <a class=\"${ClassNames.LINK}\"></a>\r\n            </h2>\r\n            <ul class=\"${ClassNames.CATS}\"></ul>\r\n        </div>\r\n    </div>\r\n</article>\r\n`;\r\n\r\n// JQuery elements map\r\nconst elements = {};\r\n\r\nlet shuffleInstance = null;\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// ----------------------------- BEGIN DOM METHODS ----------------------------\r\n\r\nfunction createPortfolioItem(data) {\r\n    const $item = $(itemHtml);\r\n\r\n    $item.attr('data-groups', `[\"${data.categories.join('\",\"')}\"]`);\r\n    \r\n    $(Selectors.LINK, $item)\r\n        .text(data.title)\r\n        .attr('href', data.link);\r\n\r\n    const $img = $(Selectors.IMG, $item)\r\n        .attr({\r\n            src : data.images.jpeg.small,\r\n            alt : data.title,\r\n        });\r\n\r\n    $img.prev(Selectors.SOURCE_WEBP).attr('srcset', `\r\n        ${data.images.webp.small} 1x,\r\n        ${data.images.webp.medium} 1.5x,\r\n        ${data.images.webp.large} 2x\r\n    `);\r\n\r\n    $img.prev(Selectors.SOURCE_JPEG).attr('srcset', `\r\n        ${data.images.jpeg.small} 1x,\r\n        ${data.images.jpeg.medium} 1.5x,\r\n        ${data.images.jpeg.large} 2x\r\n    `);\r\n\r\n    $(Selectors.CATS, $item).append(data.categories.map((cat) => {\r\n        return $('<li></li>')\r\n            .addClass(ClassNames.CAT_ITEM)\r\n            .append($('<a></a>')\r\n                .addClass(ClassNames.CAT_LINK)\r\n                .attr({\r\n                    'href': 'javascript:void(0)',\r\n                    'role': 'button',\r\n                    'data-filter': cat.toLowerCase(),\r\n                })\r\n                .text(cat));\r\n    }));\r\n\r\n    const $d = new $.Deferred();\r\n\r\n    $img.on('load', function() {\r\n        $d.resolve($item);\r\n    });\r\n\r\n    return $d.promise();\r\n}\r\n\r\n// ------------------------------ END DOM METHODS -----------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the portfolio grid module.\r\n * @return true\r\n */\r\nexport function initBlock({ onCatLinkClick }) {\r\n    const $grid = $(Selectors.ROOT);\r\n    const $container = $(Selectors.CONTAINER, $grid);\r\n    const $sizer = $(Selectors.SIZER, $container);\r\n\r\n    shuffleInstance = new Shuffle($container.get(0), {\r\n        itemSelector: Selectors.ITEM,\r\n        sizer: $sizer.get(0),\r\n    });\r\n\r\n    $container\r\n        .on('click', Selectors.CAT_LINK, function handleCatLinkClick() {\r\n            onCatLinkClick($(this).data('filter'));\r\n        })\r\n        // Until all major browsers support the :focus-within CSS pseudo-class\r\n        // apply a class using JavaScript\r\n        .on({\r\n            focusin: function handleItemFocusin() {\r\n                $(this).addClass(ClassNames.OVERLAY_FOCUS);\r\n            },\r\n            focusout: function handleItemFocusout() {\r\n                $(this).removeClass(ClassNames.OVERLAY_FOCUS);\r\n            },\r\n        }, Selectors.OVERLAY);\r\n\r\n    elements.$sizer = $sizer;\r\n}\r\n\r\n/**\r\n * Apply a filter.\r\n * @param {string} filter - The filter to be applied\r\n */\r\nexport function setFilter(filter) {\r\n    shuffleInstance.filter(filter);\r\n}\r\n\r\n/**\r\n * Add new items\r\n * @param {Array} items - the items to be added\r\n */\r\nexport function addItems(items) {\r\n    $.when(...items.map(createPortfolioItem)).then(function(...items) {\r\n        elements.$sizer.before(items);\r\n\r\n        shuffleInstance.add(items.map(($item) => $item.get(0)));\r\n    });\r\n}\r\n\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the portfolio block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport * as PortfolioFilter from '../portfolio-filter/portfolio-filter';\r\nimport * as PortfolioGrid   from '../portfolio-grid/portfolio-grid';\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\nconst MEDIUM_BREAKPOINT = 768;\r\nconst FAKE_LOAD_TIME = 1000;\r\n\r\nconst BLOCK = 'portfolio';\r\n\r\nconst Selectors = {\r\n    ROOT: `.${BLOCK}`,\r\n    GRID: `.${BLOCK}__grid`,\r\n    MORE: `.${BLOCK}__more-btn`,\r\n};\r\n\r\nconst ClassNames = {\r\n    LOADER: `loader loader_size_l ${BLOCK}__loader`,\r\n    ERROR: `error ${BLOCK}__error`,\r\n    MORE_HIDDEN: `${BLOCK}__more-btn_hidden`,\r\n};\r\n\r\nconst elements = {};\r\n\r\nlet activeFilter = 'all';\r\nlet isMobile = true;\r\n\r\nconst fakeItems = [{\r\n    title: 'Apple pie',\r\n    images: {\r\n        jpeg: {\r\n            small: 'img/content/portfolio/projects/thumbs/apple-pie-small.jpg',\r\n            medium: 'img/content/portfolio/projects/thumbs/apple-pie-medium.jpg',\r\n            large: 'img/content/portfolio/projects/thumbs/apple-pie-large.jpg',\r\n        },\r\n        webp: {\r\n            small: 'img/content/portfolio/projects/thumbs/apple-pie-small.webp',\r\n            medium: 'img/content/portfolio/projects/thumbs/apple-pie-medium.webp',\r\n            large: 'img/content/portfolio/projects/thumbs/apple-pie-large.webp',\r\n        },\r\n    },\r\n    link: 'portfolio-single.html',\r\n    categories: [ 'desserts' ],\r\n}, {\r\n    title: 'Fresh fruit cocktail',\r\n    images: {\r\n        jpeg: {\r\n            small: 'img/content/portfolio/projects/thumbs/fresh-fruit-cocktail-small.jpg',\r\n            medium: 'img/content/portfolio/projects/thumbs/fresh-fruit-cocktail-medium.jpg',\r\n            large: 'img/content/portfolio/projects/thumbs/fresh-fruit-cocktail-large.jpg',\r\n        },\r\n        webp: {\r\n            small: 'img/content/portfolio/projects/thumbs/fresh-fruit-cocktail-small.webp',\r\n            medium: 'img/content/portfolio/projects/thumbs/fresh-fruit-cocktail-medium.webp',\r\n            large: 'img/content/portfolio/projects/thumbs/fresh-fruit-cocktail-large.webp',\r\n        },\r\n    },\r\n    link: 'portfolio-single.html',\r\n    categories: [ 'drinks' ],\r\n}, {\r\n    title: 'Green tea',\r\n    images: {\r\n        jpeg: {\r\n            small: 'img/content/portfolio/projects/thumbs/green-tea-small.jpg',\r\n            medium: 'img/content/portfolio/projects/thumbs/green-tea-medium.jpg',\r\n            large: 'img/content/portfolio/projects/thumbs/green-tea-large.jpg',\r\n        },\r\n        webp: {\r\n            small: 'img/content/portfolio/projects/thumbs/green-tea-small.webp',\r\n            medium: 'img/content/portfolio/projects/thumbs/green-tea-medium.webp',\r\n            large: 'img/content/portfolio/projects/thumbs/green-tea-large.webp',\r\n        },\r\n    },\r\n    link: 'portfolio-single.html',\r\n    categories: [ 'drinks' ],\r\n}, {\r\n    title: 'Waffles with coffee',\r\n    images: {\r\n        jpeg: {\r\n            small: 'img/content/portfolio/projects/thumbs/waffles-with-coffee-small.jpg',\r\n            medium: 'img/content/portfolio/projects/thumbs/waffles-with-coffee-medium.jpg',\r\n            large: 'img/content/portfolio/projects/thumbs/waffles-with-coffee-large.jpg',\r\n        },\r\n        webp: {\r\n            small: 'img/content/portfolio/projects/thumbs/waffles-with-coffee-small.webp',\r\n            medium: 'img/content/portfolio/projects/thumbs/waffles-with-coffee-medium.webp',\r\n            large: 'img/content/portfolio/projects/thumbs/waffles-with-coffee-large.webp',\r\n        }\r\n    },\r\n    link: 'portfolio-single.html',\r\n    categories: [ 'desserts', 'drinks' ],\r\n}, {\r\n    title: 'Chicken livers',\r\n    images: {\r\n        jpeg: {\r\n            small: 'img/content/portfolio/projects/thumbs/chicken-livers-small.jpg',\r\n            medium: 'img/content/portfolio/projects/thumbs/chicken-livers-medium.jpg',\r\n            large: 'img/content/portfolio/projects/thumbs/chicken-livers-large.jpg',\r\n        },\r\n        webp: {\r\n            small: 'img/content/portfolio/projects/thumbs/chicken-livers-small.webp',\r\n            medium: 'img/content/portfolio/projects/thumbs/chicken-livers-medium.webp',\r\n            large: 'img/content/portfolio/projects/thumbs/chicken-livers-large.webp',\r\n        },\r\n    },\r\n    link: 'portfolio-single.html',\r\n    categories: [ 'lunch' ],\r\n}];\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// -------------------------- BEGIN UTILITY FUNCTIONS -------------------------\r\n\r\n/**\r\n * Simulate AJAX request to retrieve more items.\r\n * Replace this function with actual code.\r\n * \r\n * @return {JQuery.Promise} The promise which resolves when the items are loaded\r\n */\r\nfunction loadFakeItems() {\r\n    const $d = new $.Deferred();\r\n\r\n    setTimeout(() => {\r\n        $d.resolve({\r\n            items: fakeItems,\r\n            more: false,\r\n        }); \r\n    }, FAKE_LOAD_TIME);\r\n\r\n    return $d.promise();\r\n}\r\n\r\n// --------------------------- END UTILITY FUNCTIONS --------------------------\r\n\r\n// --------------------------- BEGIN EVENT HANDLERS ---------------------------\r\n\r\n/**\r\n * Handle the filter change event.\r\n * \r\n * @param {JQuery.Event} e The event object\r\n * @param {string} filter The name of the selected category\r\n */\r\nfunction handleFilterChange(filter) {\r\n    if (activeFilter !== filter) {\r\n        activeFilter = filter;\r\n\r\n        PortfolioFilter.setFilter(filter);\r\n        PortfolioGrid.setFilter(filter);\r\n    }\r\n}\r\n\r\n/**\r\n * Handle more button click event.\r\n */\r\nfunction handleMoreBtnClick() {\r\n    const { $grid, $moreBtn } = elements;\r\n\r\n    $grid.attr('aria-busy', 'true');\r\n\r\n    // Show a loader\r\n    const $loader = $('<div></div>')\r\n        .addClass(ClassNames.LOADER)\r\n        .insertAfter($moreBtn);\r\n\r\n    // Hide the button\r\n    $moreBtn.addClass(ClassNames.MORE_HIDDEN);\r\n\r\n    loadFakeItems()\r\n        .then((data) => {\r\n            PortfolioGrid.addItems(data.items);\r\n\r\n            // If there are more items available, show the button again\r\n            if (data.more) {\r\n                $moreBtn.removeClass(ClassNames.MORE_HIDDEN);\r\n            }\r\n        })\r\n        .fail(() => {\r\n            // Display an error message\r\n            $('<div></div>')\r\n                .addClass(ClassNames.ERROR)\r\n                .text('An error occured')\r\n                .insertAfter($loader);\r\n        })\r\n        .always(() => {\r\n            $grid.attr('aria-busy', 'false');\r\n            $loader.remove();\r\n        });\r\n}\r\n// ---------------------------- END EVENT HANDLERS ----------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n\r\n/**\r\n * Initialize the portfolio block.\r\n */\r\nexport function initBlock() {\r\n    const $portfolio = $(Selectors.ROOT);\r\n    if ($portfolio.length === 0) {\r\n        return;\r\n    }\r\n\r\n    elements.$portfolio = $portfolio;\r\n    elements.$grid = $(Selectors.GRID, $portfolio);\r\n    elements.$moreBtn = $(Selectors.MORE, $portfolio);\r\n\r\n    PortfolioFilter.initBlock({ onChange: handleFilterChange });\r\n    PortfolioGrid.initBlock({ onCatLinkClick: handleFilterChange });\r\n\r\n    elements.$moreBtn.click(handleMoreBtnClick);\r\n}\r\n\r\n/**\r\n * Respond to window resize event.\r\n */\r\nexport function handleResize() {\r\n    if (!('$portfolio' in elements)) {\r\n        return;\r\n    }\r\n\r\n    const screenWidth = $(window).outerWidth();\r\n    \r\n    // Switch listbox orientation to vertical on mobile and to horizontal on\r\n    // larger screens.\r\n    if (!isMobile && (screenWidth < MEDIUM_BREAKPOINT)) {\r\n        isMobile = true;\r\n\r\n        PortfolioFilter.setDropdownMode(true);\r\n    } else if (isMobile && (screenWidth >= MEDIUM_BREAKPOINT)) {\r\n        isMobile = false;\r\n\r\n        PortfolioFilter.setDropdownMode(false);\r\n    }\r\n}\r\n\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the blog gallery block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// ------------------------------ BEGIN CONSTANTS -----------------------------\r\n\r\nconst BLOCK = 'blog-carousel';\r\n\r\nconst Selectors = {\r\n    ROOT: `.${BLOCK}`,\r\n    CONTAINER: `.${BLOCK}__container`,\r\n    SLIDE: `.${BLOCK}__slide`,\r\n    ARROW_PREV: `.${BLOCK}__arrow_dir_prev`,\r\n    ARROW_NEXT: `.${BLOCK}__arrow_dir_next`,\r\n};\r\n\r\n// ------------------------------- END CONSTANTS ------------------------------\r\n\r\n/**\r\n * Blog Post Carousel\r\n */\r\nclass BlogCarousel {\r\n\r\n    /**\r\n     * Initialize a carousel\r\n     * \r\n     * @param {JQuery} $root The root block element\r\n     */\r\n    constructor($root) {\r\n        $(Selectors.CONTAINER, $root).slick({\r\n            rows: 0,\r\n            slide: Selectors.SLIDE,\r\n\r\n            prevArrow: Selectors.ARROW_PREV,\r\n            nextArrow: Selectors.ARROW_NEXT,\r\n            dots: false,\r\n\r\n            speed: 250,\r\n            cssEase: 'linear',\r\n            zIndex: 1,\r\n\r\n            responsive: [{\r\n                breakpoint: 970,\r\n                settings: {\r\n                    dots: true\r\n                },\r\n            }],\r\n        });\r\n    }\r\n\r\n    // ------------------------- BEGIN PUBLIC METHODS -------------------------\r\n\r\n    /**\r\n     * Initialize all carousel blocks on the page\r\n     */\r\n    static initAll() {\r\n        $(Selectors.ROOT).each(function() {\r\n            new BlogCarousel($(this));\r\n        });\r\n    }\r\n\r\n    // -------------------------- END PUBLIC METHODS --------------------------\r\n}\r\n\r\nexport default BlogCarousel;\r\n","/**\r\n * @file Implementation of the comment form block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// ------------------------- BEGIN UTILITY FUNCTIONS --------------------------\r\n\r\n/**\r\n * Given the input element, get a classname containing the invalid modifier\r\n * @param {JQuery} $element The input element\r\n */\r\nfunction getInvalidClassName($element) {\r\n    if ($element.hasClass('input')) {\r\n        return 'input_invalid';\r\n    } else if ($element.hasClass('text-area')) {\r\n        return 'text-area_invalid';\r\n    }\r\n}\r\n\r\n// -------------------------- END UTILITY FUNCTIONS ---------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n\r\n/**\r\n * Initialize the comment form block.\r\n */\r\nexport function initBlock() {\r\n    $('.comment-form').validate({\r\n        errorClass: 'error comment-form__error',\r\n    \r\n        highlight(element) {\r\n            $(element).addClass(getInvalidClassName($(element)));\r\n        },\r\n    \r\n        unhighlight(element) {\r\n            $(element).removeClass(getInvalidClassName($(element)));\r\n        },\r\n    });\r\n}\r\n\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the video block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// ------------------------------ BEGIN CONSTANTS -----------------------------\r\n\r\nconst BLOCK = 'video';\r\n\r\nconst ClassNames = {\r\n    CONTAINER: `${BLOCK}__container`,\r\n    CONTAINER_FORMAT: `${BLOCK}__container_format_`,\r\n    FRAME: `${BLOCK}__frame`,\r\n};\r\n\r\nconst Selectors = {\r\n    ROOT: `.${BLOCK}`,\r\n    PLACEHOLDER: `.${BLOCK}__placeholder`,\r\n    PLAY_BTN: `.${BLOCK}__play-btn`,\r\n};\r\n\r\n// ------------------------------- END CONSTANTS ------------------------------\r\n\r\n/**\r\n * Implementation of video block with lazy loading functionality\r\n */\r\nclass Video {\r\n\r\n    /**\r\n     * Initialize a video block\r\n     * \r\n     * @param {JQuery} $root The block's root element\r\n     */\r\n    constructor($root) {\r\n        const $placeholder = $(Selectors.PLACEHOLDER, $root);\r\n        const $playBtn = $(Selectors.PLAY_BTN, $placeholder);\r\n\r\n        this._elements = { $root, $placeholder };\r\n\r\n        $playBtn.click(this._loadVideo.bind(this));\r\n    }\r\n\r\n    // ------------------------ BEGIN PRIVATE METHODS -------------------------\r\n\r\n    /**\r\n     * Replace the placeholder image with a frame containing the video.\r\n     */\r\n    _loadVideo() {\r\n        const { $root, $placeholder } = this._elements;\r\n        const { url, format } = $root.data();\r\n\r\n        const $container = $('<div></div>')\r\n            .addClass(ClassNames.CONTAINER)\r\n            .addClass(ClassNames.CONTAINER_FORMAT + format);\r\n\r\n        const $frame = $('<iframe></iframe>', {\r\n            src: url,\r\n            frameborder: '0',\r\n            allowfullscreen: true,\r\n        }).addClass(ClassNames.FRAME);\r\n\r\n        $container.append($frame).replaceAll($placeholder);\r\n    }\r\n\r\n    // ------------------------- END PRIVATE METHODS --------------------------\r\n\r\n    // ------------------------- BEGIN PUBLIC METHODS -------------------------\r\n\r\n    /**\r\n     * Initialize all video blocks on the page.\r\n     */\r\n    static initAll() {\r\n        $(Selectors.ROOT).each(function() {\r\n            new Video($(this));\r\n        });\r\n    }\r\n\r\n    // -------------------------- END PUBLIC METHODS --------------------------\r\n}\r\n\r\nexport default Video;\r\n","/**\r\n * @file Implementation of the product gallery block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\nlet $gallery, $slider, $links;\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// --------------------------- BEGIN EVENT HANDLERS ---------------------------\r\nconst onSliderBeforechange = function(event, slick, currentSlide, nextSlide) {\r\n    $links.each(function() {\r\n        const $link = $(this);\r\n        $link.toggleClass(\r\n            'product-gallery__thumb-link_active',\r\n            $link.attr('data-slide') == nextSlide\r\n        );\r\n    });\r\n};\r\n\r\nconst onLinkClick = function(event) {\r\n    event.preventDefault();\r\n    $slider.slick('slickGoTo', $(this).attr('data-slide'));\r\n};\r\n// ---------------------------- END EVENT HANDLERS ----------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the product gallery module.\r\n * @return true if the product gallery block is present, false otherwise\r\n */\r\nexport const initModule = function() {\r\n    $gallery = $('.product-gallery');\r\n    if ($gallery.length === 0) {\r\n        return false;\r\n    }\r\n\r\n    $links = $gallery.find('.product-gallery__thumb-link');\r\n\r\n    $slider = $gallery.find('.product-gallery__container');\r\n    $slider.slick({\r\n        rows      : 0,\r\n        slide      : '.product-gallery__slide',\r\n\r\n        arrows    : false,\r\n        dots      : false,\r\n\r\n        fade       : true,\r\n        speed      : 400,\r\n        zIndex     : 1,\r\n\r\n        responsive : [{\r\n            breakpoint : 768,\r\n            settings   : {\r\n                dots: true\r\n            }\r\n        }]\r\n    });\r\n\r\n    $slider.on('beforeChange', onSliderBeforechange);\r\n    $gallery.on('click', '.product-gallery__thumb-link', onLinkClick);\r\n\r\n    return false;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the checkout block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport Select from '../../common/select/select';\r\n\r\n// --------------------------- BEGIN EVENT HANDLERS ---------------------------\r\nconst onCheckboxChange = function() {\r\n    const $target = $('#' + $(this).data('toggle'));\r\n    $target.slideToggle();\r\n};\r\n// ---------------------------- END EVENT HANDLERS ----------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the checkout module.\r\n * @return true if the block is present; false otherwise\r\n */\r\nexport const initModule = function() {\r\n    const $form = $('.checkout');\r\n    if ($form.length === 0) {\r\n        return false;\r\n    }\r\n\r\n    const $selects  = $form.find('.checkout__select');\r\n    $selects.each(function() {\r\n        new Select($(this), { theme: 'checkout' });\r\n    });\r\n\r\n    const $shipping = $form.find('#shipping-fields');\r\n    $shipping.hide();\r\n\r\n    const $checkboxes = $form.find('.checkout__check-input');\r\n    $checkboxes.change(onCheckboxChange);\r\n\r\n    $form.validate({\r\n        errorClass     : 'error checkout__error',\r\n    \r\n        ignore         : '.checkout__input:hidden',\r\n    \r\n        highlight: function(element) {\r\n            if ($(element).hasClass('input')) {\r\n                $(element).addClass('input_invalid');\r\n            }\r\n        },\r\n    \r\n        unhighlight    : function(element) {\r\n            if ($(element).hasClass('input')) {\r\n                $(element).removeClass('input_invalid');\r\n            }\r\n        },\r\n    \r\n        errorPlacement : function(error, element) {\r\n            if (element.attr('name') === 'payment') {\r\n                element\r\n                    .closest('.checkout__payments')\r\n                    .prepend(error);\r\n            } else {\r\n                error.insertAfter(element);\r\n            }\r\n        },\r\n    \r\n        // messages       : {\r\n        //     payment: 'Please select a payment method',\r\n        // },\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the payment block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the payment module.\r\n * @return true if the block is present; false otherwise\r\n */\r\nexport const initModule = function() {\r\n    const $payment = $('.payment');\r\n    if ($payment.length === 0) {\r\n        return false;\r\n    }\r\n\r\n    const $radios = $payment.find('.payment__radio');\r\n    const $desc   = $payment.find('.payment__desc');\r\n    $radios.change(function onRadioChange() {\r\n        $desc.slideUp();\r\n\r\n        $(this)\r\n            .closest('.payment__method')\r\n            .find('.payment__desc')\r\n            .slideDown();\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the product block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\nconst RESPONSE_TIME = 1000;\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// -------------------------- BEGIN UTILITY FUNCTIONS -------------------------\r\nconst fakeRequest = function() {\r\n    const $d = $.Deferred();\r\n\r\n    // Mock a server request\r\n    setTimeout(function() {\r\n        $d.resolve();\r\n    }, RESPONSE_TIME);\r\n\r\n    return $d.promise();\r\n};\r\n// --------------------------- END UTILITY FUNCTIONS --------------------------\r\n\r\n// --------------------------- BEGIN EVENT HANDLERS ---------------------------\r\nconst onAddBtnClick = function() {\r\n    const $loader = $('<span></span>')\r\n        .addClass('loader loader_size_s product__add-loader')\r\n        .insertAfter($(this));\r\n\r\n    $(this).remove();\r\n\r\n    fakeRequest().then(function onItemAdded() {\r\n        $('<a></a>')\r\n            .attr('href', 'shop-cart.html')\r\n            .addClass('product__cart-link')\r\n            .text('Product added')\r\n            .insertAfter($loader)\r\n            .focus();\r\n\r\n        $loader.remove();\r\n    });\r\n};\r\n\r\nconst onProductFocusin = function() {\r\n    $(this).addClass('product_has-focus');\r\n};\r\n\r\nconst onProductFocusout = function() {\r\n    $(this).removeClass('product_has-focus');\r\n};\r\n// ---------------------------- END EVENT HANDLERS ----------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the shop filter module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    $('.product').each(function() {\r\n        const $product = $(this);\r\n        const $addBtn  = $product.find('.product__add-btn');\r\n\r\n        $addBtn.click(onAddBtnClick);\r\n\r\n        // Until all major browsers support the :focus-within CSS pseudo-class\r\n        // apply a class using JavaScript\r\n        $product\r\n            .focusin(onProductFocusin)\r\n            .focusout(onProductFocusout);\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the review form block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the review form module.\r\n * @return true if the block is present, false otherwise\r\n */\r\nexport const initModule = function() {\r\n    const $form = $('.review-form');\r\n    if ($form.length === 0) {\r\n        return false;\r\n    }\r\n\r\n    $form.validate({\r\n        errorClass     : 'error review-form__error',\r\n    \r\n        errorPlacement : function(error, element) {\r\n            element.closest('.review-form__field').append(error);\r\n        },\r\n    \r\n        highlight      : function(element) {\r\n            if ($(element).hasClass('input')) {\r\n                $(element).addClass('input_invalid');\r\n            } else if ($(element).hasClass('text-area')) {\r\n                $(element).addClass('text-area_invalid');\r\n            }\r\n        },\r\n    \r\n        unhighlight    : function(element) {\r\n            if ($(element).hasClass('input')) {\r\n                $(element).removeClass('input_invalid');\r\n            } else if ($(element).hasClass('text-area')) {\r\n                $(element).removeClass('text-area_invalid');\r\n            }\r\n        },\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the shipping calculator block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport Select from '../../common/select/select';\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the shipping calculator module.\r\n * @return true if the block is present, false otherwise\r\n */\r\nexport const initModule = function() {\r\n    const $calc = $('.shipping-calc');\r\n    if ($calc.length === 0) {\r\n        return false;\r\n    }\r\n\r\n    const $toggle  = $calc.find('.shipping-calc__toggle');\r\n    const $form    = $calc.find('.shipping-calc__form');\r\n    const $country = $calc.find('.shipping-calc__country');\r\n\r\n    let formExpanded = false;\r\n    $toggle.click(function onShippingCalcToggle() {\r\n        formExpanded = !formExpanded;\r\n\r\n        $form.slideToggle();\r\n        $toggle.attr('aria-expanded', String(formExpanded));\r\n    });\r\n    \r\n    const countrySelect = new Select($country, { theme: 'small' });\r\n\r\n    $form.validate({\r\n        errorClass     : 'error shipping-calc__error',\r\n\r\n        rules: {\r\n            calc_shipping_country: {\r\n                required: true,\r\n            }\r\n        },\r\n\r\n        errorPlacement : function($error, $element) {\r\n            $error.appendTo($element.closest('.shipping-calc__field'));\r\n        },\r\n    \r\n        highlight      : function(element) {\r\n            if ($(element).hasClass('input')) {\r\n                $(element).addClass('input_invalid');\r\n            } else if ($(element).is($country)) {\r\n                countrySelect.setError(true);\r\n            }\r\n        },\r\n    \r\n        unhighlight     : function(element) {\r\n            if ($(element).hasClass('input')) {\r\n                $(element).removeClass('input_invalid');\r\n            } else if ($(element).is($country)) {\r\n                countrySelect.setError(false);\r\n            }\r\n        }\r\n    });\r\n\r\n    $country.on('change', () => {\r\n        $form.validate().element('select');\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Miscellaneous utility functions and classes\r\n * @author Andrey Glotov\r\n */\r\n\r\n/* global focusTrap */\r\n\r\nconst KEY_ESC   = 27;\r\nconst KEY_SPACE = 32;\r\nconst KEY_END   = 35;\r\nconst KEY_HOME  = 36;\r\nconst KEY_LEFT  = 37;\r\nconst KEY_UP    = 38;\r\nconst KEY_RIGHT = 39;\r\nconst KEY_DOWN  = 40;\r\n\r\nconst $document = $(document);\r\n\r\nconst dropdownProto = {\r\n    _onOutsideClick(event) {\r\n        const target = event.target;\r\n        if (!(\r\n            target === document\r\n            || this._$container.is($(target))\r\n            || $.contains(this._$container.get(0), target)\r\n        )) {\r\n            this.hide();\r\n        }\r\n    },\r\n\r\n    _onSwitcherClick() {\r\n        if (!this._isExpanded) {\r\n            this.show();\r\n        } else {\r\n            this.hide();\r\n        }\r\n    },\r\n\r\n    _onSwitcherKeydown(event) {\r\n        if (event.which === KEY_SPACE) {\r\n            event.preventDefault();\r\n            \r\n            if (!this._isExpanded) {\r\n                this.show();\r\n            } else {\r\n                this.hide();\r\n            }\r\n        }\r\n    },\r\n\r\n    _onSwitcherKeyup(event) {\r\n        if (event.which === KEY_SPACE) {\r\n            event.preventDefault();\r\n        }\r\n    },\r\n\r\n    _onKeydown(event) {\r\n        if (event.which === KEY_ESC) {\r\n            this.hide();\r\n            this._$switcher.focus();\r\n        }\r\n    },\r\n\r\n    show() {\r\n        this._isExpanded = true;\r\n\r\n        setTimeout(() => {\r\n            $document.on({\r\n                click   : this._onOutsideClick,\r\n                focusin : this._onOutsideClick,\r\n            });\r\n            this._$container.on('keydown', this._onKeydown);\r\n\r\n            if (this._onToggle) {\r\n                this._onToggle(true);\r\n            }\r\n        }, 0);\r\n\r\n        return this;\r\n    },\r\n\r\n    hide() {\r\n        this._isExpanded = false;\r\n\r\n        $document.off({\r\n            click   : this._onOutsideClick,\r\n            focusin : this._onOutsideClick,\r\n        });\r\n        this._$container.off('keydown', this._onKeydown);\r\n\r\n        if (this._onToggle) {\r\n            this._onToggle(false);\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n    pause() {\r\n        this._$switcher\r\n            .off({\r\n                click   : this._onSwitcherClick,\r\n                keydown : this._onSwitcherKeydown,\r\n                keyup   : this._onSwitcherKeyup,\r\n            });\r\n\r\n        if (this._hoverToggles) {\r\n            this._$container.off({\r\n                mouseenter : this._onMouseenter,\r\n                mouseleave : this._onMouseleave,\r\n            });\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n    unpause() {\r\n        this._$switcher\r\n            .click(this._onSwitcherClick)\r\n            .keydown(this._onSwitcherKeydown)\r\n            .keyup(this._onSwitcherKeyup);\r\n\r\n        if (this._hoverToggles) {\r\n            this._$container.hover(this._onMouseenter, this._onMouseleave);\r\n        }\r\n\r\n        return this;\r\n    },\r\n};\r\n\r\nexport const makeDropdown = function($container, $switcher, options) {\r\n    const dropdown = Object.create(dropdownProto);\r\n\r\n    dropdown._$container   = $container;\r\n    dropdown._$switcher    = $switcher;\r\n    dropdown._onToggle     = options.onToggle;\r\n    dropdown._hoverToggles = !!options.hoverToggles;\r\n    dropdown._isExpanded   = false;\r\n\r\n    // Bind the event handlers\r\n    dropdown._onOutsideClick    = dropdown._onOutsideClick.bind(dropdown);\r\n    dropdown._onSwitcherClick   = dropdown._onSwitcherClick.bind(dropdown);\r\n    dropdown._onSwitcherKeydown = dropdown._onSwitcherKeydown.bind(dropdown);\r\n    dropdown._onSwitcherKeyup   = dropdown._onSwitcherKeyup.bind(dropdown);\r\n    dropdown._onKeydown         = dropdown._onKeydown.bind(dropdown);\r\n\r\n    if (options.hoverToggles) {\r\n        dropdown._onMouseenter = dropdown.show.bind(dropdown);\r\n        dropdown._onMouseleave = dropdown.hide.bind(dropdown);\r\n    }\r\n\r\n    dropdown.unpause();\r\n\r\n    return dropdown;\r\n};\r\n\r\n\r\nconst drilldownChain = [];\r\nlet activeDrilldown  = null;\r\n\r\nconst drilldownProto = {\r\n    _onDocumentClick(event) {\r\n        if (!$.contains(this._$container.get(0), event.target)) {\r\n            this.hide();\r\n        }\r\n    },\r\n\r\n    _onToggleClick() {\r\n        if (this._isExpanded) {\r\n            this.hide();\r\n        } else {\r\n            this.show();\r\n        }\r\n    },\r\n\r\n    _onTrapDeactivate() {\r\n        $document.off('click', this._onDocumentClick);\r\n\r\n        if (drilldownChain.length !== 0) {\r\n            const prevDrilldown = drilldownChain.pop();\r\n\r\n            if (prevDrilldown._isExpanded) {\r\n                activeDrilldown = prevDrilldown;\r\n                activeDrilldown._trap.unpause();\r\n            }\r\n        } else {\r\n            activeDrilldown = null;\r\n        }\r\n\r\n        this._isExpanded = false;\r\n\r\n        if (this._onToggle) {\r\n            this._onToggle(false);\r\n        }\r\n    },\r\n\r\n    show() {\r\n        this._isExpanded = true;\r\n\r\n        if (activeDrilldown) {\r\n            activeDrilldown._trap.pause();\r\n            drilldownChain.push(activeDrilldown);\r\n        }\r\n\r\n        activeDrilldown = this;\r\n\r\n        if (this._onToggle) {\r\n            this._onToggle(true);\r\n        }\r\n\r\n        this._trap.activate();\r\n\r\n        setTimeout(() => {\r\n            $document.click(this._onDocumentClick);\r\n        }, 0);\r\n\r\n        return this;\r\n    },\r\n\r\n    hide() {\r\n        this._trap.deactivate();\r\n        return this;\r\n    },\r\n\r\n    pause() {\r\n        this._$toggle.off('click', this._onToggleClick);\r\n        return this;\r\n    },\r\n\r\n    unpause() {\r\n        this._$toggle.click(this._onToggleClick);\r\n        return this;\r\n    },\r\n};\r\n\r\nexport const makeDrilldown = function($container, $toggle, options) {\r\n    const drilldown = Object.create(drilldownProto);\r\n\r\n    drilldown._$container = $container;\r\n    drilldown._$toggle    = $toggle;\r\n    drilldown._onToggle   = options.onToggle;\r\n\r\n    drilldown._trap = new focusTrap($container.get(0), {\r\n        clickOutsideDeactivates : true,\r\n        escapeDeactivates       : true,\r\n\r\n        initialFocus            : options.initialFocus,\r\n        onDeactivate            : drilldown._onTrapDeactivate.bind(drilldown),\r\n    });\r\n\r\n    drilldown._onToggleClick   = drilldown._onToggleClick.bind(drilldown);\r\n    drilldown._onDocumentClick = drilldown._onDocumentClick.bind(drilldown);\r\n\r\n    drilldown.unpause();\r\n\r\n    return drilldown;\r\n};\r\n\r\n\r\nconst listboxProto = {\r\n    _onKeydown(event) {\r\n        const key = event.which;\r\n\r\n        const keyActions = (this._orientation === 'vertical')\r\n            ? verticalKeyActions\r\n            : horizontalKeyActions;\r\n        \r\n        if (keyActions[key]) {\r\n            keyActions[key].call(this);\r\n            return false;\r\n        }\r\n    },\r\n\r\n    firstTab() {\r\n        this.selectItem(0);\r\n    },\r\n\r\n    lastTab() {\r\n        this.selectItem(this._$items.length - 1);\r\n    },\r\n\r\n    prevTab() {\r\n        let nextIndex = this._activeIndex - 1;\r\n        if (nextIndex < 0) {\r\n            nextIndex = this._$items.length - 1;\r\n        }\r\n\r\n        this.selectItem(nextIndex);\r\n    },\r\n\r\n    nextTab() {\r\n        let nextIndex = this._activeIndex + 1;\r\n        if (nextIndex >= this._$items.length) {\r\n            nextIndex = 0;\r\n        }\r\n\r\n        this.selectItem(nextIndex);\r\n    },\r\n\r\n    selectItem(nextIndex) {\r\n        if (this._activeIndex === nextIndex) {\r\n            return;\r\n        }\r\n\r\n        if (this._onSelect) {\r\n            this._onSelect(nextIndex, this._activeIndex);\r\n        }\r\n\r\n        this._activeIndex = nextIndex;\r\n    },\r\n\r\n    setOrientation(orientation) {\r\n        this._orientation = orientation;\r\n    }\r\n};\r\n\r\nconst verticalKeyActions   = {\r\n    [KEY_END]   : listboxProto.lastTab,\r\n    [KEY_HOME]  : listboxProto.firstTab,\r\n    [KEY_UP]    : listboxProto.prevTab,\r\n    [KEY_DOWN]  : listboxProto.nextTab,\r\n};\r\nconst horizontalKeyActions = {\r\n    [KEY_END]   : listboxProto.lastTab,\r\n    [KEY_HOME]  : listboxProto.firstTab,\r\n    [KEY_LEFT]  : listboxProto.prevTab,\r\n    [KEY_RIGHT] : listboxProto.nextTab,\r\n};\r\n\r\nexport const makeListbox = function($container, $items, options) {\r\n    const listbox = Object.create(listboxProto);\r\n\r\n    listbox._$container  = $container;\r\n    listbox._$items      = $items;\r\n    listbox._activeIndex = 0;\r\n    listbox._onSelect    = options.onSelect,\r\n    listbox._onKeydown   = listbox._onKeydown.bind(listbox);\r\n\r\n    $container.keydown(listbox._onKeydown);\r\n    \r\n    $items.each(function(i) {\r\n        $(this).click(function(event) {\r\n            event.preventDefault();\r\n\r\n            listbox.selectItem(i);\r\n        });\r\n    });\r\n\r\n    listbox.setOrientation(options.orientation || 'horizontal');\r\n\r\n    return listbox;\r\n};\r\n","/**\r\n * Implementation of the share block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport DropdownStrategy from '../../../js/utils/dropdown-strategy';\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n\r\n/**\r\n * Initialize the share block.\r\n * @return true\r\n */\r\nexport function initBlock() {\r\n    const $share = $('.share');\r\n    const $trigger = $('.share__trigger', $share);\r\n    const $drawer = $('.share__drawer', $share);\r\n\r\n    const share = new DropdownStrategy({\r\n        $root: $share,\r\n        $trigger,\r\n        $drawer,\r\n\r\n        onExpand() {\r\n            $drawer.addClass('share__drawer_expanded');\r\n        },\r\n        onCollapse() {\r\n            $drawer.removeClass('share__drawer_expanded');\r\n        }\r\n    });\r\n    share.activate();\r\n\r\n    return true;\r\n}\r\n\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the shop filter block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport {makeDropdown} from '../../../js/utils';\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the shop filter module.\r\n * @return true if the filter block is present, false otherwise\r\n */\r\nexport const initModule = function() {\r\n    const $filter = $('.shop-filter');\r\n    if ($filter.length === 0) {\r\n        return false;\r\n    }\r\n\r\n    const $inner  = $filter.find('.shop-filter__inner');\r\n    const $toggle = $inner.find('.shop-filter__toggle');\r\n    const $list   = $inner.find('.shop-filter__list');\r\n\r\n    makeDropdown($inner, $toggle, {\r\n        hoverToggles : true,\r\n\r\n        onToggle     : function onShopFilterToggle(open) {\r\n            $list.toggleClass('shop-filter__list_visible', open);\r\n\r\n            if (open) {\r\n                $toggle.attr('aria-expanded', 'true');\r\n            } else {\r\n                $toggle.removeAttr('aria-expanded');\r\n            }\r\n        },\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the page block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport * as LazyLoader from '../../../js/utils/lazy-loader';\r\n\r\nimport * as Header from '../header/header';\r\nimport * as Nav from '../nav/nav';\r\n\r\nimport AccordionGallery from '../../about/accordion-gallery/accordion-gallery';\r\nimport ContactForm from '../../contact/contact-form/contact-form';\r\nimport Gallery from '../../common/gallery/gallery';\r\nimport LocationMap from '../../contact/location-map/location-map';\r\nimport Menu from '../../menu/menu/menu';\r\nimport Reservation from '../../reservation/reservation/reservation';\r\nimport Slider from '../../common/slider/slider';\r\nimport SpecialsSlider from '../../common/specials-slider/specials-slider';\r\nimport Tabs from '../tabs/tabs';\r\n\r\nimport * as Portfolio from '../../portfolio/portfolio/portfolio';\r\nimport * as ProjectCarousel from '../../portfolio/project-carousel/project-carousel';\r\n\r\nimport BlogCarousel from '../../blog/blog-carousel/blog-carousel';\r\nimport * as CommentForm from '../../blog/comment-form/comment-form';\r\nimport * as Share from '../../blog/share/share';\r\nimport Video from '../../blog/video/video';\r\n\r\nimport * as Checkout        from '../../shop/checkout/checkout';\r\nimport * as Payment         from '../../shop/payment/payment';\r\nimport * as Product         from '../../shop/product/product';\r\nimport * as ProductGallery  from '../../shop/product-gallery/product-gallery';\r\nimport * as ReviewForm      from '../../shop/review-form/review-form';\r\nimport * as ShippingCalc    from '../../shop/shipping-calc/shipping-calc';\r\nimport * as ShopFilter      from '../../shop/shop-filter/shop-filter';\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\nconst RESIZE_INTERVAL       = 200;  // Resize debouncing interval\r\nconst SCROLL_INTERVAL       = 200;  // Scroll throttling interval\r\n\r\nlet resizeTimer = null;\r\nlet scrollTimer = null;\r\nlet wasScrolled = false;\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// --------------------------- BEGIN EVENT HANDLERS ---------------------------\r\n\r\n/**\r\n * Handle the window scroll event\r\n */\r\nfunction handleWindowScroll() {\r\n    LazyLoader.scanImages();\r\n    Header.handleScroll();\r\n}\r\n\r\n/**\r\n * Handle the window resize event\r\n */\r\nfunction handleWindowResize() {\r\n    Nav.handleResize();\r\n    AccordionGallery.handleResize();\r\n    Portfolio.handleResize();\r\n    Tabs.handleResize();\r\n}\r\n\r\n/**\r\n * Debounce the window resize event\r\n */\r\nfunction debounceWindowResize() {\r\n    clearTimeout(resizeTimer);\r\n    resizeTimer = setTimeout(handleWindowResize, RESIZE_INTERVAL);\r\n}\r\n\r\n/**\r\n * Throttle the window scroll event\r\n */\r\nfunction throttleWindowScroll() {\r\n    if (scrollTimer) {\r\n        // Ensure that we catch and execute that last invocation.\r\n        wasScrolled = true;\r\n        return;\r\n    }\r\n\r\n    handleWindowScroll();\r\n\r\n    scrollTimer = this.setTimeout(function() {\r\n        scrollTimer = null;\r\n        if (wasScrolled) {\r\n            handleWindowScroll();\r\n            wasScrolled = false;\r\n        }\r\n    }, SCROLL_INTERVAL);\r\n}\r\n\r\n// ---------------------------- END EVENT HANDLERS ----------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n\r\n/**\r\n * Initialize the page block.\r\n */\r\nexport function initBlock() {\r\n    $(window).on({\r\n        resize: debounceWindowResize,\r\n        scroll: throttleWindowScroll,\r\n    });\r\n\r\n    // Lazy image loader\r\n    LazyLoader.init();\r\n\r\n    // Common blocks\r\n    Header.initBlock();\r\n    Nav.initBlock();\r\n\r\n    // Inner page blocks\r\n    AccordionGallery.initAll();\r\n    ContactForm.initAll();\r\n    LocationMap.initAll();\r\n    Gallery.initAll();\r\n    Menu.initAll();\r\n    Reservation.initAll();\r\n    Slider.initAll();\r\n    SpecialsSlider.initAll();\r\n    Tabs.initAll();\r\n\r\n    // Blog blocks\r\n    BlogCarousel.initAll();\r\n    CommentForm.initBlock();\r\n    Share.initBlock();\r\n    Video.initAll();\r\n\r\n    // Portfolio blocks\r\n    Portfolio.initBlock();\r\n    ProjectCarousel.initBlock();\r\n\r\n    // Shop blocks\r\n    Checkout.initModule();\r\n    Payment.initModule();\r\n    Product.initModule();\r\n    ProductGallery.initModule();\r\n    ReviewForm.initModule();\r\n    ShippingCalc.initModule();\r\n    ShopFilter.initModule();\r\n\r\n    // Process the initial window size and scroll position\r\n    handleWindowResize();\r\n    handleWindowScroll();\r\n}\r\n\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the project carousel block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n\r\n/**\r\n * Initialize the project carousel block.\r\n */\r\nexport function initBlock() {\r\n    $('.project-carousel__container').slick({\r\n        rows: 0,\r\n        slide: '.project-carousel__slide',\r\n\r\n        prevArrow: '.project-carousel__arrow_dir_prev',\r\n        nextArrow: '.project-carousel__arrow_dir_next',\r\n        dots: true,\r\n\r\n        cssEase: 'linear',\r\n        speed: 250,\r\n        zIndex: 1,\r\n    });\r\n}\r\n\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n"],"sourceRoot":""}
{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/utils/lazy-loader.js","webpack:///./src/blocks/common/search/search.js","webpack:///./src/js/utils/dropdown-strategy.js","webpack:///./src/blocks/common/mini-cart/mini-cart.js","webpack:///./src/js/utils/force-reflow.js","webpack:///./src/blocks/common/header/header.js","webpack:///./src/js/utils/drilldown-strategy.js","webpack:///./src/blocks/common/nav/nav.js","webpack:///./src/js/utils.js","webpack:///./src/blocks/common/tabs/tabs.js","webpack:///./src/blocks/about/about-gallery/about-gallery.js","webpack:///./src/blocks/contact/contact-form/contact-form.js","webpack:///./src/blocks/contact/map/map.js","webpack:///./src/blocks/common/gallery/gallery.js","webpack:///./src/blocks/menu/menu/menu.js","webpack:///./src/blocks/reservation/reservation-form/reservation-form.js","webpack:///./src/blocks/common/slider/slider.js","webpack:///./src/blocks/common/specials-slider/specials-slider.js","webpack:///./src/blocks/portfolio/portfolio-filter/portfolio-filter.js","webpack:///./src/blocks/portfolio/portfolio-grid/portfolio-grid.js","webpack:///./src/blocks/portfolio/portfolio/portfolio.js","webpack:///./src/blocks/portfolio/project-slider/project-slider.js","webpack:///./src/blocks/blog/blog-gallery/blog-gallery.js","webpack:///./src/blocks/blog/comment/comment.js","webpack:///./src/blocks/blog/comment-form/comment-form.js","webpack:///./src/blocks/blog/share/share.js","webpack:///./src/blocks/shop/product-gallery/product-gallery.js","webpack:///./src/blocks/shop/checkout/checkout.js","webpack:///./src/blocks/shop/payment/payment.js","webpack:///./src/blocks/shop/product/product.js","webpack:///./src/blocks/shop/review-form/review-form.js","webpack:///./src/blocks/shop/shipping-calc/shipping-calc.js","webpack:///./src/blocks/shop/shop-filter/shop-filter.js","webpack:///./src/blocks/common/page/page.js","webpack:///./src/js/main.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","$images","BUFFER_HEIGHT","LAZY_SELECTOR","$search","popupFocusTrap","lazy_loader","init","$","scanImages","length","filter","$elem","windowBottom","$img","this","window","scrollTop","height","offset","top","parent","is","siblings","forEach","$source","attr","removeAttr","removeClass","loadImage","hide","deactivate","search","initBlock","$close","find","focusTrap","clickOutsideDeactivates","escapeDeactivates","onDeactivate","click","show","addClass","setTimeout","activate","$document","document","Keys","DropdownStrategy","_ref","$root","$trigger","$drawer","onCollapse","onExpand","_classCallCheck","_elements","_isExpanded","_handlers","collapseHandler","expandHandler","handleOutsideClick","handleToggleClick","handleToggleKeyDown","handleToggleKeyUp","handleKeyDown","handleMouseLeave","handleMouseEnter","event","target","contains","collapse","toggle","which","preventDefault","focus","expand","_this","on","focusin","off","mouseenter","mouseleave","keydown","keyup","mini_cart","$minicart","forceReflow","$el","offsetHeight","isTransparent","STICKY_HEADER_OFFSET","VISIBLE_HEADER_OFFSET","elements","HeaderStates","NORMAL","STICKY","VISIBLE","headerState","handleSearchToggle","Search","header","$header","$searchToggle","hasClass","MiniCart","handleScroll","currentOffset","newState","toggleClass","updateHeaderStyles","drilldownChain","activeDrilldown","DrilldownStrategy","$initialFocus","drilldown_strategy_classCallCheck","handleTriggerClick","handleTrapDeactivate","_focusTrap","initialFocus","handleDocumentClick","prevDrilldown","pop","unpause","pause","push","submenus","mobileMenu","DESKTOP_BREAKPOINT","SCROLL_BUFFER","SCROLL_SPEED","isDesktop","NavSubmenu","nav_classCallCheck","$parentLink","prev","$parentItem","closest","$scrollpane","first","$backLink","$firstLink","not","drilldownStrategy","dropdownStrategy","_this$_elements","handleInternalLinkClick","targetId","$targetElem","submenu","animate","Math","max","nav","$nav","$menuToggle","$menu","map","toArray","handleResize","outerWidth","dropdownProto","_onOutsideClick","_$container","_onSwitcherClick","_onSwitcherKeydown","_onSwitcherKeyup","_onKeydown","_$switcher","_onToggle","_hoverToggles","_onMouseenter","_onMouseleave","hover","makeDropdown","$container","$switcher","options","dropdown","onToggle","hoverToggles","listboxProto","keyActions","_orientation","verticalKeyActions","horizontalKeyActions","firstTab","selectItem","lastTab","_$items","prevTab","nextIndex","_activeIndex","nextTab","_onSelect","setOrientation","orientation","_defineProperty","_verticalKeyActions","_horizontalKeyActions","makeListbox","$items","listbox","onSelect","each","verticalLayout","allTabs","tabsProto","_onTabSelect","next","$prevLink","_$links","eq","$prevPanel","_$panels","$nextLink","$nextPanel","aria-selected","tabindex","_$list","_logic","initModule","tabs","screenWidth","tab","magnificPopup","delegate","mainClass","gallery","enabled","tCounter","closeMarkup","arrowMarkup","callbacks","beforeOpen","wrap","role","aria-label","validate","errorClass","highlight","element","unhighlight","coords","lat","lng","style","featureType","elementType","stylers","color","lightness","weight","visibility","saturation","google","maps","Map","zoom","center","disableDefaultUI","mapTypes","set","StyledMapType","setMapTypeId","Marker","position","setIcon","type","openingHours","start","end","updateTimeSelect","$time","startMoment","timeArray","hours","day","moment","hour","format","add","getAvailableTimes","selectedTime","val","$options","time","text","prop","empty","append","trigger","initSelect","$select","select2","theme","width","minimumResultsForSearch","Infinity","data","$selection","currentMoment","minutes","year","month","date","$form","$date","$people","Pikaday","field","defaultDate","toDate","setDefaultDate","minDate","maxDate","getMoment","rules","required","validDate","AUTOPLAY_SPEED","TRANSITION_SPEED","handleSlickBeforeChange","e","slick","current","$slides","$slider","$prevArrow","$nextArrow","rows","zIndex","cssEase","fade","speed","autoplay","autoplaySpeed","pauseOnFocus","pauseOnHover","prevArrow","nextArrow","slider","initAll","$portfolio","$filter","$inner","$toggle","$list","$btns","dropdownLogic","listboxLogic","$grid","$sizer","GUTTER_WIDTH","MIN_OPACITY","MIN_SCALE","Selectors","ROOT","SLIDES","SLIDE_INNER","PREV_ARROW","NEXT_ARROW","ClassNames","SpecialsSlider","specials_slider_classCallCheck","_state","isTransitioning","activeIndex","_config","dOffset","dOpacity","dScale","prevSlide","nextSlide","_updateStyles","$slide","order","_this$_config","css","transform","concat","opacity","total","slide","_applySlideStyles","_this2","$prevSlide","$movingSlide","_this3","onFilterSelect","$prevBtn","$nextBtn","activeFilter","onListClick","onListKeydown","onToggleFocusin","onDropdownToggle","open","shuffleInstance","createPortfolioItem","$item","categories","join","title","link","src","image","alt","$categories","cat","$catItem","$catLink","href","data-filter","toLowerCase","$moreBtn","fakeItems","onFilterChange","sel","index","PortfolioFilter","PortfolioGrid","onMoreBtnClick","$d","$loader","insertAfter","Deferred","resolve","items","more","promise","then","response","_$","when","apply","_toConsumableArray","item","Image","newItems","insertBefore","fail","always","remove","Shuffle","itemSelector","sizer","dots","responsive","breakpoint","settings","$commentForm","$page","id","prependTo","$replyTo","$gallery","$links","share_share","$share","onCheckboxChange","slideToggle","change","ignore","errorPlacement","error","prepend","$payment","$radios","$desc","slideUp","slideDown","onAddBtnClick","onProductFocusin","onProductFocusout","$product","focusout","onSliderBeforechange","currentSlide","$link","onLinkClick","arrows","$calc","$country","formExpanded","String","placeholder","RESIZE_INTERVAL","SCROLL_INTERVAL","resizeTimer","scrollTimer","wasScrolled","handleWindowScroll","LazyLoader","Header","handleWindowResize","Nav","Portfolio","Tabs","debounceWindowResize","clearTimeout","throttleWindowScroll","resize","scroll","AboutGallery","ContactForm","ContactMap","Gallery","Menu","ReservationForm","Slider","ProjectSlider","BlogGallery","Comment","CommentForm","Share","Checkout","Payment","Product","ProductGallery","ReviewForm","ShippingCalc","ShopFilter"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 448);\n","/**\r\n * @file Lazy loader for images\r\n */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\nconst BUFFER_HEIGHT = 50;\r\nconst LAZY_SELECTOR = '.lazy';\r\n\r\nlet $images;\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// -------------------------- BEGIN UTILITY FUNCTIONS -------------------------\r\n\r\n/**\r\n * Check if <tt>elem</tt> is in the browser's viewport.\r\n * \r\n * @param {JQuery} $elem The element to check\r\n * @return {boolean} <tt>true</tt> if the element is in the viewport,\r\n *      <tt>false</tt> otherwise\r\n */\r\nfunction isInViewport($elem) {\r\n    const windowBottom = $(window).scrollTop() + $(window).height();\r\n    return $elem.offset().top < (windowBottom + BUFFER_HEIGHT);\r\n}\r\n\r\n// --------------------------- END UTILITY FUNCTIONS --------------------------\r\n\r\n// ----------------------------- BEGIN DOM METHODS ----------------------------\r\n\r\n/**\r\n * Lazy-load the given <tt>img</tt> element.\r\n * \r\n * @param {JQuery} $img The image element\r\n */\r\nfunction loadImage($img) {\r\n    if ($img.parent().is('picture')) {\r\n        $img.siblings('source').forEach(function() {\r\n            const $source = $(this);\r\n            $source\r\n                .attr('srcset', $source.attr('data-srcset'))\r\n                .removeAttr('data-srcset');\r\n        });\r\n    }\r\n\r\n    $img\r\n        .attr('src', $img.attr('data-src'))\r\n        .attr('srcset', $img.attr('data-srcset'))\r\n        .removeAttr('data-src data-srcset')\r\n        .removeClass('lazy');\r\n}\r\n\r\n// ------------------------------ END DOM METHODS -----------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n\r\n/**\r\n * Initialize the lazy image loader\r\n */\r\nfunction init() {\r\n    $images = $(LAZY_SELECTOR);\r\n}\r\n\r\n/**\r\n * Load all images that have been scrolled into the viewport for the first time\r\n */\r\nfunction scanImages() {\r\n    if ($images.length === 0) {\r\n        return;\r\n    }\r\n\r\n    $images = $images.filter(function() {\r\n        const $img = $(this);\r\n\r\n        if (!isInViewport($img)) {\r\n            return true;\r\n        }\r\n        \r\n        loadImage($img);        \r\n\r\n        return false;\r\n    });\r\n}\r\n\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n\r\nexport default {\r\n    init,\r\n    scanImages,\r\n};\r\n","/**\r\n * @file Implementation of the search block\r\n * @author Andrey Glotov\r\n */\r\n\r\n/* global focusTrap */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\nlet $search;\r\nlet popupFocusTrap;\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n\r\n/**\r\n * Initialize the search block.\r\n * @return true\r\n */\r\nfunction initBlock() {\r\n    $search = $('.search');\r\n    const $close = $search.find('.search__close');\r\n\r\n    popupFocusTrap = focusTrap($search.get(0), {\r\n        clickOutsideDeactivates: true,\r\n        escapeDeactivates: true,\r\n        \r\n        onDeactivate: function handleSearchDeactivate() {\r\n            $search.removeClass('search_visible');\r\n        },\r\n    });\r\n\r\n    $close.click(hide);\r\n\r\n    return true;\r\n}\r\n\r\n/**\r\n * Show the search modal\r\n */\r\nfunction show() {\r\n    $search.addClass('search_visible');\r\n\r\n    // Need to wait 100ms for autofocus to work\r\n    // TODO: why?\r\n    setTimeout(() => {\r\n        popupFocusTrap.activate();\r\n    }, 100);\r\n}\r\n\r\n/**\r\n * Hide the search modal\r\n */\r\nfunction hide() {\r\n    popupFocusTrap.deactivate();\r\n}\r\n\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n\r\nexport default {\r\n    initBlock,\r\n    show,\r\n    hide,\r\n};\r\n","/**\r\n * @file Implementation of the dropdown strategy for menus\r\n * @author Andrey Glotov\r\n */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\nconst $document = $(document);\r\n\r\nconst Keys = {\r\n    ESC: 27,\r\n    SPACE: 32\r\n};\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\nexport default class DropdownStrategy {\r\n    /**\r\n     * Create a dropdown strategy\r\n     * @param {Object} props - Properties object\r\n     * @param {JQuery} props.$root The root node\r\n     * @param {JQuery} props.$trigger The dropdown button\r\n     * @param {JQuery} props.$drawer The dropdown drawer\r\n     * @param {Function} props.onCollapse The callback to execute on collapse\r\n     * @param {FUnction} props.onExpand The callback to execute on expand\r\n     */\r\n    constructor({$root, $trigger, $drawer, onCollapse, onExpand}) {\r\n        this._elements = { $root, $trigger, $drawer };\r\n        this._isExpanded = false;\r\n\r\n        this._handlers = {\r\n            collapseHandler: onCollapse,\r\n            expandHandler: onExpand,\r\n        };\r\n\r\n        this.handleOutsideClick = this.handleOutsideClick.bind(this);\r\n        this.handleToggleClick = this.handleToggleClick.bind(this);\r\n        this.handleToggleKeyDown = this.handleToggleKeyDown.bind(this);\r\n        this.handleToggleKeyUp = this.handleToggleKeyUp.bind(this);\r\n        this.handleKeyDown = this.handleKeyDown.bind(this);\r\n        this.handleMouseLeave = this.handleMouseLeave.bind(this);\r\n        this.handleMouseEnter = this.handleMouseEnter.bind(this);\r\n    }\r\n\r\n    // -------------------------- BEGIN EVENT HANDLERS ------------------------\r\n\r\n    handleOutsideClick(event) {\r\n        const target = event.target;\r\n        if (!(\r\n            target === document\r\n            || this._elements.$root.is($(target))\r\n            || $.contains(this._elements.$root.get(0), target)\r\n        )) {\r\n            this.collapse();\r\n        }\r\n    }\r\n\r\n    handleToggleClick() {\r\n        this.toggle();\r\n    }\r\n\r\n    handleToggleKeyDown(event) {\r\n        if (event.which === Keys.SPACE) {\r\n            event.preventDefault();\r\n\r\n            this.toggle();\r\n        }\r\n    }\r\n\r\n    handleToggleKeyUp(event) {\r\n        if (event.which === Keys.SPACE) {\r\n            event.preventDefault();\r\n        }\r\n    }\r\n\r\n    handleKeyDown(event) {\r\n        if (event.which === Keys.ESC) {\r\n            this.collapse();\r\n            this._elements.$trigger.focus();\r\n        }\r\n    }\r\n\r\n    handleMouseEnter() {\r\n        this.expand();\r\n    }\r\n\r\n    handleMouseLeave() {\r\n        this.collapse();\r\n    }\r\n\r\n    // --------------------------- END EVENT HANDLERS -------------------------\r\n\r\n    // -------------------------- BEGIN PUBLIC METHODS ------------------------\r\n\r\n    /**\r\n     * Expand the dropdown\r\n     */\r\n    expand() {\r\n        this._isExpanded = true;\r\n\r\n        setTimeout(() => {\r\n            $document.on({\r\n                click: this.handleOutsideClick,\r\n                focusin: this.handleOutsideClick,\r\n            });\r\n            this._elements.$root.on('keydown', this.handleKeyDown);\r\n\r\n            this._elements.$trigger.attr('aria-expanded', 'true');\r\n\r\n            if (this._handlers.expandHandler) {\r\n                this._handlers.expandHandler();\r\n            }\r\n        }, 0);\r\n    }\r\n\r\n    /**\r\n     * Collapse the dropdown\r\n     */\r\n    collapse() {\r\n        this._isExpanded = false;\r\n\r\n        $document.off({\r\n            click: this.handleOutsideClick,\r\n            focusin: this.handleOutsideClick,\r\n        });\r\n        this._elements.$root.off('keydown', this.handleKeyDown);\r\n\r\n        this._elements.$trigger.attr('aria-expanded', 'false');\r\n\r\n        if (this._handlers.collapseHandler) {\r\n            this._handlers.collapseHandler();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Toggle between the collapsed and expanded states\r\n     */\r\n    toggle() {\r\n        if (!this._isExpanded) {\r\n            this.expand();\r\n        } else {\r\n            this.collapse();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Activate the strategy: add event listeners.\r\n     */\r\n    activate() {\r\n        this._elements.$root.on({\r\n            mouseenter: this.handleMouseEnter,\r\n            mouseleave: this.handleMouseLeave,\r\n        });\r\n\r\n        this._elements.$trigger.on({\r\n            click: this.handleToggleClick,\r\n            keydown: this.handleToggleKeyDown,\r\n            keyup: this.handleToggleKeyUp,\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Deactivate the strategy: collapse the dropdown and remove event\r\n     * listeners.\r\n     */\r\n    deactivate() {\r\n        if (this._isExpanded) {\r\n            this.collapse();\r\n        }\r\n\r\n        this._elements.$root.off({\r\n            mouseenter: this.handleMouseEnter,\r\n            mouseleave: this.handleMouseLeave,\r\n        });\r\n\r\n        this._elements.$trigger.off({\r\n            click: this.handleToggleClick,\r\n            keydown: this.handleToggleKeyDown,\r\n            keyup: this.handleToggleKeyUp,\r\n        });\r\n    }\r\n}\r\n","/**\r\n * Implementation of the mini cart block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport DropdownStrategy from '../../../js/utils/dropdown-strategy';\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n\r\n/**\r\n * Initialize the mini cart block.\r\n * @return true\r\n */\r\nfunction initBlock() {\r\n    const $minicart = $('.mini-cart');\r\n    const $trigger = $('.mini-cart__trigger', $minicart);\r\n    const $drawer = $('.mini-cart__drawer', $minicart);\r\n\r\n    const minicart = new DropdownStrategy({\r\n        $root: $minicart,\r\n        $trigger,\r\n        $drawer,\r\n\r\n        onExpand() {\r\n            $drawer.addClass('mini-cart__drawer_expanded');\r\n        },\r\n        onCollapse() {\r\n            $drawer.removeClass('mini-cart__drawer_expanded');\r\n        }\r\n    });\r\n    minicart.activate();\r\n\r\n    return true;\r\n}\r\n\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n\r\nexport default {\r\n    initBlock,\r\n};\r\n","/**\r\n * Force a reflow\r\n * @param {JQuery} el The element whose styles have been changed\r\n */\r\nexport default function forceReflow($el) {\r\n    void($el.get(0).offsetHeight);\r\n}\r\n","/**\r\n * @file Implementation of the header block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport Search from '../search/search';\r\nimport MiniCart from '../mini-cart/mini-cart';\r\n\r\nimport forceReflow from '../../../js/utils/force-reflow';\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\nconst STICKY_HEADER_OFFSET  = 100;  // Scroll offset to make the header \"sticky\"\r\nconst VISIBLE_HEADER_OFFSET = 500;  // Scroll offset to show the \"sticky\" header\r\n\r\nconst elements = {};\r\nlet isTransparent;\r\n\r\nconst HeaderStates = { NORMAL: 0, STICKY: 1, VISIBLE: 2 };\r\nlet headerState = HeaderStates.NORMAL;\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// ---------------------------- BEGIN DOM METHODS -----------------------------\r\n\r\n/**\r\n * Add or remove header classes basd on the current scroll offset to create an\r\n * animated sticky header effect.\r\n */\r\nfunction updateHeaderStyles() {\r\n    const currentOffset = $(window).scrollTop();\r\n\r\n    let newState = null;\r\n    if (currentOffset < STICKY_HEADER_OFFSET) {\r\n        newState = HeaderStates.NORMAL;\r\n    } else if (currentOffset < VISIBLE_HEADER_OFFSET) {\r\n        newState = HeaderStates.STICKY;\r\n    } else {\r\n        newState = HeaderStates.VISIBLE;\r\n    }\r\n\r\n    if (newState !== headerState) {\r\n        const { $header } = elements;\r\n\r\n        if (newState === HeaderStates.NORMAL) {\r\n            $header\r\n                .removeClass('header_scroll header_hidden')\r\n                .toggleClass('header_transparent', isTransparent);\r\n        } else if (newState === HeaderStates.STICKY) {\r\n            $header\r\n                .addClass('header_scroll header_hidden')\r\n                .removeClass('header_transparent');\r\n        } else {    // HeaderStates.VISIBLE\r\n            if (headerState === HeaderStates.NORMAL) {\r\n                // Make sure the animation is played\r\n                $header\r\n                    .addClass('header_scroll header_hidden')\r\n                    .removeClass('header_transparent');\r\n\r\n                forceReflow($header);\r\n            }\r\n            \r\n            $header.removeClass('header_hidden');\r\n        }\r\n\r\n        headerState = newState;\r\n    }\r\n}\r\n\r\n// ----------------------------- END DOM METHODS ------------------------------\r\n\r\n// --------------------------- BEGIN EVENT HANDLERS ---------------------------\r\n\r\nfunction handleSearchToggle() {\r\n    Search.show();\r\n}\r\n\r\n// ---------------------------- END EVENT HANDLERS ----------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n\r\n/**\r\n * Initialize the header module.\r\n * @return true\r\n */\r\nfunction initBlock() {\r\n    elements.$header = $('.header');\r\n    elements.$searchToggle = $('.header__search-toggle', elements.$header);\r\n\r\n    isTransparent = elements.$header.hasClass('header_transparent');\r\n\r\n    Search.initBlock();\r\n    MiniCart.initBlock();\r\n\r\n    elements.$searchToggle.click(handleSearchToggle);\r\n\r\n    return true;\r\n}\r\n\r\nfunction handleScroll() {\r\n    updateHeaderStyles();\r\n}\r\n\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n\r\nexport default {\r\n    initBlock,\r\n    handleScroll,\r\n};\r\n","/**\r\n * @file Implementation of the drilldown strategy for menus\r\n * @author Andrey Glotov\r\n */\r\n\r\n/* global focusTrap */\r\n\r\n// ------------------------- BEGIN MODULE VARIABLES ---------------------------\r\n\r\nconst $document = $(document);\r\n\r\nconst drilldownChain = [];\r\nlet activeDrilldown = null;\r\n\r\n// -------------------------- END MODULE VARIABLES ----------------------------\r\n\r\nexport default class DrilldownStrategy {\r\n    /**\r\n     * Create a drilldown strategy\r\n     * @param {Object} props - Properties object\r\n     * @param {JQuery} props.$trigger The drilldown button\r\n     * @param {JQuery} props.$drawer The drilldown drawer\r\n     * @param {JQuery} props.$initialFocus The element to receive initialFocus\r\n     * @param {Function} props.onCollapse The callback to execute on collapse\r\n     * @param {FUnction} props.onExpand The callback to execute on expand\r\n     */\r\n    constructor({$trigger, $drawer, $initialFocus, onCollapse, onExpand}) {\r\n        this._elements = { $trigger, $drawer, $initialFocus };\r\n        this._isExpanded = false;\r\n\r\n        this.handleOutsideClick = this.handleOutsideClick.bind(this);\r\n        this.handleTriggerClick = this.handleTriggerClick.bind(this);\r\n        this.handleTrapDeactivate = this.handleTrapDeactivate.bind(this);\r\n\r\n        this._handlers = {\r\n            collapseHandler: onCollapse,\r\n            expandHandler: onExpand,\r\n        };\r\n\r\n        this._focusTrap = new focusTrap($drawer.get(0), {\r\n            clickOutsideDeactivates: true,\r\n            escapeDeactivates: true,\r\n            initialFocus: $initialFocus && $initialFocus.get(0),\r\n            onDeactivate: this.handleTrapDeactivate,\r\n        });\r\n    }\r\n\r\n    // -------------------------- BEGIN EVENT HANDLERS ------------------------\r\n\r\n    handleOutsideClick(event) {\r\n        if (!$.contains(this._elements.$drawer.get(0), event.target)) {\r\n            this.collapse();\r\n        }\r\n    }\r\n\r\n    handleTriggerClick() {\r\n        this.toggle();\r\n    }\r\n\r\n    handleTrapDeactivate() {\r\n        $document.off('click', this.handleDocumentClick);\r\n\r\n        if (drilldownChain.length !== 0) {\r\n            const prevDrilldown = drilldownChain.pop();\r\n\r\n            if (prevDrilldown._isExpanded) {\r\n                activeDrilldown = prevDrilldown;\r\n                activeDrilldown._focusTrap.unpause();\r\n            }\r\n        } else {\r\n            activeDrilldown = null;\r\n        }\r\n\r\n        this._isExpanded = false;\r\n\r\n        this._elements.$trigger.attr('aria-expanded', 'false');\r\n\r\n        if (this._handlers.collapseHandler) {\r\n            this._handlers.collapseHandler();\r\n        }\r\n    }\r\n\r\n    // --------------------------- END EVENT HANDLERS -------------------------\r\n\r\n    // -------------------------- BEGIN PUBLIC METHODS ------------------------\r\n\r\n    /**\r\n     * Expand the drilldown menu\r\n     */\r\n    expand() {\r\n        this._isExpanded = true;\r\n\r\n        if (activeDrilldown) {\r\n            activeDrilldown._focusTrap.pause();\r\n            drilldownChain.push(activeDrilldown);\r\n        }\r\n\r\n        activeDrilldown = this;\r\n\r\n        this._focusTrap.activate();\r\n\r\n        setTimeout(() => {\r\n            $document.click(this.handleDocumentClick);\r\n\r\n            if (this._handlers.expandHandler) {\r\n                this._handlers.expandHandler();\r\n            }\r\n        }, 0);\r\n\r\n        this._elements.$trigger.attr('aria-expanded', 'true');\r\n    }\r\n\r\n    /**\r\n     * Collapse the drilldown menu\r\n     */\r\n    collapse() {\r\n        this._focusTrap.deactivate();\r\n    }\r\n\r\n    /**\r\n     * Toggle between the collapsed and expanded states\r\n     */\r\n    toggle() {\r\n        if (!this._isExpanded) {\r\n            this.expand();\r\n        } else {\r\n            this.collapse();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Activate the strategy: add event listeners.\r\n     */\r\n    activate() {\r\n        this._elements.$trigger.click(this.handleTriggerClick);\r\n        this._elements.$drawer.keydown(this.handleKeyDown);\r\n    }\r\n\r\n    /**\r\n     * Deactivate the strategy: collapse the dropdown and remove event\r\n     * listeners.\r\n     */\r\n    deactivate() {\r\n        if (this._isExpanded) {\r\n            this.collapse();\r\n        }\r\n\r\n        this._elements.$trigger.off('click', this.handleTriggerClick);\r\n        this._elements.$drawer.off('keydown', this.handleKeyDown);\r\n    }\r\n}\r\n","/**\r\n * @file Implementation of the navigation block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport DropdownStrategy from '../../../js/utils/dropdown-strategy';\r\nimport DrilldownStrategy from '../../../js/utils/drilldown-strategy';\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\nconst DESKTOP_BREAKPOINT = 992;  // Minimum desktop screen width\r\n\r\nconst SCROLL_BUFFER = 100;  // Offset from window top to scroll target\r\nconst SCROLL_SPEED = 1000;\r\n\r\nlet submenus;\r\nlet mobileMenu;\r\n\r\nlet isDesktop = false;\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n/**\r\n * Implementation of submenus.\r\n * \r\n * Each submenu has two behavior strategies: drilldown menu for smaller screens\r\n * and dropdown menu for larger screens.\r\n */\r\nclass NavSubmenu {\r\n    /**\r\n     * Iniitalize submenu.\r\n     * \r\n     * @param {JQuery} $root Submenu root element\r\n     */\r\n    constructor($root) {\r\n        this._elements = {\r\n            $root,\r\n            $parentLink: $root.prev('.nav__link'),\r\n            $parentItem: $root.closest('.nav__item'),\r\n            $scrollpane: $('.nav__scrollpane', $root).first(),\r\n            $backLink: $('.nav__link_back', $root).first(),\r\n            $firstLink: $('.nav__link', $root).not('.nav__link_back').first(),\r\n        };\r\n\r\n        this.drilldownStrategy = new DrilldownStrategy({\r\n            $trigger: this._elements.$parentLink,\r\n            $drawer: this._elements.$root,\r\n            $initialFocus:  this._elements.$firstLink,\r\n\r\n            onCollapse: this.collapse.bind(this), \r\n            onExpand: this.expand.bind(this),\r\n        });\r\n\r\n        this.dropdownStrategy = new DropdownStrategy({\r\n            $root: this._elements.$parentItem,\r\n            $trigger: this._elements.$parentLink,\r\n            $drawer: this._elements.$root,\r\n\r\n            onCollapse: this.collapse.bind(this), \r\n            onExpand: this.expand.bind(this),\r\n        });\r\n\r\n        // Mobile by default\r\n        this.drilldownStrategy.activate();\r\n\r\n        this._elements.$backLink.click(() => this.drilldownStrategy.collapse());\r\n    }\r\n\r\n    collapse() {\r\n        const { $root } = this._elements;\r\n\r\n        $root.removeClass('nav__submenu_visible');\r\n    }\r\n\r\n    expand() {\r\n        const { $root, $scrollpane } = this._elements;\r\n\r\n        $scrollpane.scrollTop(0);   // Reset submenu scroll position\r\n        $root.addClass('nav__submenu_visible');\r\n    }\r\n}\r\n\r\n// --------------------------- BEGIN EVENT HANDLERS ---------------------------\r\n\r\n/**\r\n * Scroll smoothly when navigating to internal links.\r\n */\r\nfunction handleInternalLinkClick() {\r\n    const $link = $(this);\r\n\r\n    const targetId = $link.attr('href');\r\n    const $targetElem = $(targetId);\r\n    if ($targetElem.length === 0) {\r\n        return;\r\n    }\r\n\r\n    if (!isDesktop) {\r\n        submenus.forEach((submenu) => submenu.drilldownStrategy.collapse());\r\n        mobileMenu.collapse();\r\n    }\r\n\r\n    $('html, body').animate({\r\n        scrollTop: Math.max(0, $targetElem.offset().top - SCROLL_BUFFER),\r\n    }, SCROLL_SPEED, 'swing', function() {\r\n        $targetElem.focus();\r\n    });\r\n\r\n    return false;\r\n}\r\n\r\n// ---------------------------- END EVENT HANDLERS ----------------------------\r\n\r\n// ---------------------------- BEGIN PUBLIC METHODS --------------------------\r\n\r\n/**\r\n * Initialize the navigation block.\r\n * @return true\r\n */\r\nfunction initBlock() {\r\n    const $nav = $('.nav');\r\n    const $menuToggle = $('.nav__toggle', $nav);\r\n    const $menu = $('.nav__menu', $nav);\r\n    const $scrollpane = $('.nav__scrollpane', $nav);\r\n\r\n    mobileMenu = new DrilldownStrategy({\r\n        $trigger: $menuToggle,\r\n        $drawer: $nav,\r\n\r\n        onCollapse() {\r\n            $menu.removeClass('nav__menu_visible');\r\n            $menuToggle.removeClass('hamburger_open');\r\n        },\r\n\r\n        onExpand() {\r\n            $menu.addClass('nav__menu_visible');\r\n            $scrollpane.scrollTop(0);\r\n            $menuToggle.addClass('hamburger_open');\r\n        },\r\n    });\r\n    mobileMenu.activate();\r\n\r\n    submenus = $('.nav__submenu', $nav)\r\n        .map(function() {\r\n            return new NavSubmenu($(this));\r\n        })\r\n        .toArray();\r\n\r\n    $nav.on('click', '.nav__link[href^=\"#\"]', handleInternalLinkClick);\r\n}\r\n\r\n/**\r\n * Respond to window resize event.\r\n * \r\n * Switch between drilldown behavior for submenus on mobile and dropdown \r\n * behavior on desktop.\r\n */\r\nfunction handleResize() {\r\n    if (isDesktop && ($(window).outerWidth() < DESKTOP_BREAKPOINT)) {\r\n        isDesktop = false;\r\n\r\n        submenus.forEach((submenu) => {\r\n            submenu.dropdownStrategy.deactivate();\r\n            submenu.drilldownStrategy.activate();\r\n        });\r\n    } else if (!isDesktop && ($(window).outerWidth() >= DESKTOP_BREAKPOINT)) {\r\n        isDesktop = true;\r\n\r\n        submenus.forEach((submenu) => {\r\n            submenu.drilldownStrategy.deactivate();\r\n            submenu.dropdownStrategy.activate();\r\n        });\r\n\r\n        mobileMenu.collapse();\r\n    }\r\n}\r\n\r\n// ----------------------------- END PUBLIC METHODS ---------------------------\r\n\r\nexport default {\r\n    initBlock,\r\n    handleResize,\r\n};\r\n","/**\r\n * @file Miscellaneous utility functions and classes\r\n * @author Andrey Glotov\r\n */\r\n\r\n/* global focusTrap */\r\n\r\nconst KEY_ESC   = 27;\r\nconst KEY_SPACE = 32;\r\nconst KEY_END   = 35;\r\nconst KEY_HOME  = 36;\r\nconst KEY_LEFT  = 37;\r\nconst KEY_UP    = 38;\r\nconst KEY_RIGHT = 39;\r\nconst KEY_DOWN  = 40;\r\n\r\nconst $document = $(document);\r\n\r\nconst dropdownProto = {\r\n    _onOutsideClick(event) {\r\n        const target = event.target;\r\n        if (!(\r\n            target === document\r\n            || this._$container.is($(target))\r\n            || $.contains(this._$container.get(0), target)\r\n        )) {\r\n            this.hide();\r\n        }\r\n    },\r\n\r\n    _onSwitcherClick() {\r\n        if (!this._isExpanded) {\r\n            this.show();\r\n        } else {\r\n            this.hide();\r\n        }\r\n    },\r\n\r\n    _onSwitcherKeydown(event) {\r\n        if (event.which === KEY_SPACE) {\r\n            event.preventDefault();\r\n            \r\n            if (!this._isExpanded) {\r\n                this.show();\r\n            } else {\r\n                this.hide();\r\n            }\r\n        }\r\n    },\r\n\r\n    _onSwitcherKeyup(event) {\r\n        if (event.which === KEY_SPACE) {\r\n            event.preventDefault();\r\n        }\r\n    },\r\n\r\n    _onKeydown(event) {\r\n        if (event.which === KEY_ESC) {\r\n            this.hide();\r\n            this._$switcher.focus();\r\n        }\r\n    },\r\n\r\n    show() {\r\n        this._isExpanded = true;\r\n\r\n        setTimeout(() => {\r\n            $document.on({\r\n                click   : this._onOutsideClick,\r\n                focusin : this._onOutsideClick,\r\n            });\r\n            this._$container.on('keydown', this._onKeydown);\r\n\r\n            if (this._onToggle) {\r\n                this._onToggle(true);\r\n            }\r\n        }, 0);\r\n\r\n        return this;\r\n    },\r\n\r\n    hide() {\r\n        this._isExpanded = false;\r\n\r\n        $document.off({\r\n            click   : this._onOutsideClick,\r\n            focusin : this._onOutsideClick,\r\n        });\r\n        this._$container.off('keydown', this._onKeydown);\r\n\r\n        if (this._onToggle) {\r\n            this._onToggle(false);\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n    pause() {\r\n        this._$switcher\r\n            .off({\r\n                click   : this._onSwitcherClick,\r\n                keydown : this._onSwitcherKeydown,\r\n                keyup   : this._onSwitcherKeyup,\r\n            });\r\n\r\n        if (this._hoverToggles) {\r\n            this._$container.off({\r\n                mouseenter : this._onMouseenter,\r\n                mouseleave : this._onMouseleave,\r\n            });\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n    unpause() {\r\n        this._$switcher\r\n            .click(this._onSwitcherClick)\r\n            .keydown(this._onSwitcherKeydown)\r\n            .keyup(this._onSwitcherKeyup);\r\n\r\n        if (this._hoverToggles) {\r\n            this._$container.hover(this._onMouseenter, this._onMouseleave);\r\n        }\r\n\r\n        return this;\r\n    },\r\n};\r\n\r\nexport const makeDropdown = function($container, $switcher, options) {\r\n    const dropdown = Object.create(dropdownProto);\r\n\r\n    dropdown._$container   = $container;\r\n    dropdown._$switcher    = $switcher;\r\n    dropdown._onToggle     = options.onToggle;\r\n    dropdown._hoverToggles = !!options.hoverToggles;\r\n    dropdown._isExpanded   = false;\r\n\r\n    // Bind the event handlers\r\n    dropdown._onOutsideClick    = dropdown._onOutsideClick.bind(dropdown);\r\n    dropdown._onSwitcherClick   = dropdown._onSwitcherClick.bind(dropdown);\r\n    dropdown._onSwitcherKeydown = dropdown._onSwitcherKeydown.bind(dropdown);\r\n    dropdown._onSwitcherKeyup   = dropdown._onSwitcherKeyup.bind(dropdown);\r\n    dropdown._onKeydown         = dropdown._onKeydown.bind(dropdown);\r\n\r\n    if (options.hoverToggles) {\r\n        dropdown._onMouseenter = dropdown.show.bind(dropdown);\r\n        dropdown._onMouseleave = dropdown.hide.bind(dropdown);\r\n    }\r\n\r\n    dropdown.unpause();\r\n\r\n    return dropdown;\r\n};\r\n\r\n\r\nconst drilldownChain = [];\r\nlet activeDrilldown  = null;\r\n\r\nconst drilldownProto = {\r\n    _onDocumentClick(event) {\r\n        if (!$.contains(this._$container.get(0), event.target)) {\r\n            this.hide();\r\n        }\r\n    },\r\n\r\n    _onToggleClick() {\r\n        if (this._isExpanded) {\r\n            this.hide();\r\n        } else {\r\n            this.show();\r\n        }\r\n    },\r\n\r\n    _onTrapDeactivate() {\r\n        $document.off('click', this._onDocumentClick);\r\n\r\n        if (drilldownChain.length !== 0) {\r\n            const prevDrilldown = drilldownChain.pop();\r\n\r\n            if (prevDrilldown._isExpanded) {\r\n                activeDrilldown = prevDrilldown;\r\n                activeDrilldown._trap.unpause();\r\n            }\r\n        } else {\r\n            activeDrilldown = null;\r\n        }\r\n\r\n        this._isExpanded = false;\r\n\r\n        if (this._onToggle) {\r\n            this._onToggle(false);\r\n        }\r\n    },\r\n\r\n    show() {\r\n        this._isExpanded = true;\r\n\r\n        if (activeDrilldown) {\r\n            activeDrilldown._trap.pause();\r\n            drilldownChain.push(activeDrilldown);\r\n        }\r\n\r\n        activeDrilldown = this;\r\n\r\n        if (this._onToggle) {\r\n            this._onToggle(true);\r\n        }\r\n\r\n        this._trap.activate();\r\n\r\n        setTimeout(() => {\r\n            $document.click(this._onDocumentClick);\r\n        }, 0);\r\n\r\n        return this;\r\n    },\r\n\r\n    hide() {\r\n        this._trap.deactivate();\r\n        return this;\r\n    },\r\n\r\n    pause() {\r\n        this._$toggle.off('click', this._onToggleClick);\r\n        return this;\r\n    },\r\n\r\n    unpause() {\r\n        this._$toggle.click(this._onToggleClick);\r\n        return this;\r\n    },\r\n};\r\n\r\nexport const makeDrilldown = function($container, $toggle, options) {\r\n    const drilldown = Object.create(drilldownProto);\r\n\r\n    drilldown._$container = $container;\r\n    drilldown._$toggle    = $toggle;\r\n    drilldown._onToggle   = options.onToggle;\r\n\r\n    drilldown._trap = new focusTrap($container.get(0), {\r\n        clickOutsideDeactivates : true,\r\n        escapeDeactivates       : true,\r\n\r\n        initialFocus            : options.initialFocus,\r\n        onDeactivate            : drilldown._onTrapDeactivate.bind(drilldown),\r\n    });\r\n\r\n    drilldown._onToggleClick   = drilldown._onToggleClick.bind(drilldown);\r\n    drilldown._onDocumentClick = drilldown._onDocumentClick.bind(drilldown);\r\n\r\n    drilldown.unpause();\r\n\r\n    return drilldown;\r\n};\r\n\r\n\r\nconst listboxProto = {\r\n    _onKeydown(event) {\r\n        const key = event.which;\r\n\r\n        const keyActions = (this._orientation === 'vertical')\r\n            ? verticalKeyActions\r\n            : horizontalKeyActions;\r\n        \r\n        if (keyActions[key]) {\r\n            keyActions[key].call(this);\r\n            return false;\r\n        }\r\n    },\r\n\r\n    firstTab() {\r\n        this.selectItem(0);\r\n    },\r\n\r\n    lastTab() {\r\n        this.selectItem(this._$items.length - 1);\r\n    },\r\n\r\n    prevTab() {\r\n        let nextIndex = this._activeIndex - 1;\r\n        if (nextIndex < 0) {\r\n            nextIndex = this._$items.length - 1;\r\n        }\r\n\r\n        this.selectItem(nextIndex);\r\n    },\r\n\r\n    nextTab() {\r\n        let nextIndex = this._activeIndex + 1;\r\n        if (nextIndex >= this._$items.length) {\r\n            nextIndex = 0;\r\n        }\r\n\r\n        this.selectItem(nextIndex);\r\n    },\r\n\r\n    selectItem(nextIndex) {\r\n        if (this._activeIndex === nextIndex) {\r\n            return;\r\n        }\r\n\r\n        if (this._onSelect) {\r\n            this._onSelect(nextIndex, this._activeIndex);\r\n        }\r\n\r\n        this._activeIndex = nextIndex;\r\n    },\r\n\r\n    setOrientation(orientation) {\r\n        this._orientation = orientation;\r\n    }\r\n};\r\n\r\nconst verticalKeyActions   = {\r\n    [KEY_END]   : listboxProto.lastTab,\r\n    [KEY_HOME]  : listboxProto.firstTab,\r\n    [KEY_UP]    : listboxProto.prevTab,\r\n    [KEY_DOWN]  : listboxProto.nextTab,\r\n};\r\nconst horizontalKeyActions = {\r\n    [KEY_END]   : listboxProto.lastTab,\r\n    [KEY_HOME]  : listboxProto.firstTab,\r\n    [KEY_LEFT]  : listboxProto.prevTab,\r\n    [KEY_RIGHT] : listboxProto.nextTab,\r\n};\r\n\r\nexport const makeListbox = function($container, $items, options) {\r\n    const listbox = Object.create(listboxProto);\r\n\r\n    listbox._$container  = $container;\r\n    listbox._$items      = $items;\r\n    listbox._activeIndex = 0;\r\n    listbox._onSelect    = options.onSelect,\r\n    listbox._onKeydown   = listbox._onKeydown.bind(listbox);\r\n\r\n    $container.keydown(listbox._onKeydown);\r\n    \r\n    $items.each(function(i) {\r\n        $(this).click(function(event) {\r\n            event.preventDefault();\r\n\r\n            listbox.selectItem(i);\r\n        });\r\n    });\r\n\r\n    listbox.setOrientation(options.orientation || 'horizontal');\r\n\r\n    return listbox;\r\n};\r\n","/**\r\n * @file Implementation of the tabs block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport {makeListbox} from '../../../js/utils';\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\nconst TRANSITION_DURATION = 250;\r\nconst MEDIUM_BREAKPOINT   = 768;\r\n\r\nlet verticalLayout = true;\r\n\r\nconst allTabs = [];\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\nconst tabsProto = {\r\n    _onTabSelect(next, prev) {\r\n        const $prevLink  = this._$links.eq(prev);\r\n        const $prevPanel = this._$panels.eq(prev);\r\n        const $nextLink  = this._$links.eq(next);\r\n        const $nextPanel = this._$panels.eq(next);\r\n\r\n        $prevLink\r\n            .removeClass('tabs__link_active')\r\n            .attr({\r\n                'aria-selected' : 'false',\r\n                'tabindex'      : '-1'\r\n            });\r\n\r\n        $nextLink\r\n            .addClass('tabs__link_active')\r\n            .attr({\r\n                'aria-selected' : 'true',\r\n                'tabindex'      : '0'\r\n            })\r\n            .focus();\r\n\r\n        $prevPanel.addClass('tabs__panel_fade');\r\n        $nextPanel.addClass('tabs__panel_fade');\r\n\r\n        setTimeout(() => {\r\n            $prevPanel\r\n                .removeClass('tabs__panel_fade')\r\n                .removeClass('tabs__panel_active');\r\n            $nextPanel\r\n                .removeClass('tabs__panel_fade')\r\n                .addClass('tabs__panel_active');\r\n        }, TRANSITION_DURATION);\r\n    },\r\n\r\n    setOrientation(orientation) {\r\n        this._$list.attr('aria-orientation', orientation);\r\n        this._logic.setOrientation(orientation);\r\n    },\r\n};\r\n\r\n/**\r\n * Initialize the tabs module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    $('.tabs').each(function() {\r\n        const $container = $(this);\r\n\r\n        const tabs = Object.create(tabsProto);\r\n\r\n        tabs._$list    = $container.find('.tabs__list');\r\n        tabs._$links   = tabs._$list.find('.tabs__link');\r\n        tabs._$panels  = $container.find('.tabs__panel');\r\n\r\n        tabs._logic    = makeListbox(tabs._$list, tabs._$links, {\r\n            orientation : 'vertical',\r\n            onSelect    : tabs._onTabSelect.bind(tabs),\r\n        });\r\n\r\n        allTabs.push(tabs);\r\n    });\r\n\r\n    return true;\r\n};\r\n\r\n/**\r\n * Respond to window resize event.\r\n */\r\nexport const handleResize = function() {\r\n    const screenWidth = $(window).outerWidth();\r\n    \r\n    // Switch tabs orientation to vertical on mobile and to horizontal on\r\n    // larger screens.\r\n    if (!verticalLayout && (screenWidth < MEDIUM_BREAKPOINT)) {\r\n        verticalLayout = true;\r\n\r\n        allTabs.forEach(function(tab) {\r\n            tab.setOrientation('vertical');\r\n        });\r\n    } else if (verticalLayout && (screenWidth >= MEDIUM_BREAKPOINT)) {\r\n        verticalLayout = false;\r\n\r\n        allTabs.forEach(function(tab) {\r\n            tab.setOrientation('horizontal');\r\n        });\r\n    }\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the about page gallery block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the specials carousel module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    $('.about-gallery').each(function() {\r\n        $(this).magnificPopup({\r\n            delegate  : '.about-gallery__thumb',\r\n            mainClass : 'lightbox',\r\n            gallery   : {\r\n                enabled  : true,\r\n                tCounter : '',\r\n            },\r\n\r\n            closeMarkup : '<button aria-label=\"Close\" type=\"button\" '\r\n                + 'class=\"mfp-close\">&#215;</button>',\r\n            arrowMarkup : '<button aria-label=\"%title%\" type=\"button\" '\r\n                + 'class=\"mfp-arrow mfp-arrow-%dir%\"></button>',\r\n\r\n            callbacks   : {\r\n                beforeOpen() {\r\n                    this.wrap.attr({\r\n                        'role'       : 'dialog',\r\n                        'aria-label' : 'Gallery',\r\n                    });\r\n                },\r\n            },\r\n        });\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the contact form block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the contact form module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    $('.contact-form').validate({\r\n        errorClass  : 'error contact-form__error',\r\n    \r\n        highlight   : function(element) {\r\n            if ($(element).hasClass('input')) {\r\n                $(element).addClass('input_invalid');\r\n            } else if ($(element).hasClass('text-area')) {\r\n                $(element).addClass('text-area_invalid');\r\n            }\r\n        },\r\n    \r\n        unhighlight : function(element) {\r\n            if ($(element).hasClass('input')) {\r\n                $(element).removeClass('input_invalid');\r\n            } else if ($(element).hasClass('text-area')) {\r\n                $(element).removeClass('text-area_invalid');\r\n            }\r\n        },\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the map block\r\n * @author Andrey Glotov\r\n */\r\n\r\n/* global google */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\nconst ZOOM = 11;\r\n\r\nconst coords = {\r\n    lat : 40.7,\r\n    lng : -73.6\r\n};\r\n\r\nconst style = [{\r\n    featureType : 'water',\r\n    elementType : 'geometry',\r\n    stylers     : [{\r\n        color     : '#e9e9e9',\r\n    },{\r\n        lightness : 17,\r\n    }],\r\n}, {\r\n    featureType : 'landscape',\r\n    elementType : 'geometry',\r\n    stylers     : [{\r\n        color     : '#f5f5f5',\r\n    }, {\r\n        lightness : 20,\r\n    }],\r\n}, {\r\n    featureType : 'road.highway',\r\n    elementType : 'geometry.fill',\r\n    stylers     : [{\r\n        color     : '#ffffff',\r\n    }, {\r\n        lightness : 17,\r\n    }],\r\n}, {\r\n    featureType : 'road.highway',\r\n    elementType : 'geometry.stroke',\r\n    stylers     : [{\r\n        color     : '#ffffff',\r\n    }, {\r\n        lightness : 29,\r\n    }, {\r\n        weight    : 0.2,\r\n    }],\r\n}, {\r\n    featureType : 'road.arterial',\r\n    elementType : 'geometry',\r\n    stylers     : [{\r\n        color     : '#ffffff',\r\n    }, {\r\n        lightness : 18,\r\n    }],\r\n}, {\r\n    featureType : 'road.local',\r\n    elementType : 'geometry',\r\n    stylers     : [{\r\n        color     : '#ffffff',\r\n    }, {\r\n        lightness : 16,\r\n    }],\r\n}, {\r\n    featureType : 'poi',\r\n    elementType : 'geometry',\r\n    stylers     : [{\r\n        color     : '#f5f5f5',\r\n    }, {\r\n        lightness : 21,\r\n    }],\r\n}, {\r\n    featureType : 'poi.park',\r\n    elementType : 'geometry',\r\n    stylers     : [{\r\n        color     : '#dedede',\r\n    }, {\r\n        lightness : 21,\r\n    }],\r\n}, {\r\n    elementType : 'labels.text.stroke',\r\n    stylers     : [{\r\n        visibility : 'on',\r\n    }, {\r\n        color      : '#ffffff',\r\n    }, {\r\n        lightness  : 16,\r\n    }],\r\n}, {\r\n    elementType : 'labels.text.fill',\r\n    stylers     : [{\r\n        saturation : 36,\r\n    }, {\r\n        color      : '#333333',\r\n    }, {\r\n        lightness  : 40,\r\n    }],\r\n}, {\r\n    elementType : 'labels.icon',\r\n    stylers     : [{\r\n        visibility : 'off'\r\n    }],\r\n}, {\r\n    featureType : 'transit',\r\n    elementType : 'geometry',\r\n    stylers     : [{\r\n        color     : '#f2f2f2',\r\n    }, {\r\n        lightness : 19,\r\n    }],\r\n}, {\r\n    featureType : 'administrative',\r\n    elementType : 'geometry.fill',\r\n    stylers     : [{\r\n        color     : '#fefefe',\r\n    }, {\r\n        lightness : 20,\r\n    }],\r\n}, {\r\n    featureType : 'administrative',\r\n    elementType : 'geometry.stroke',\r\n    stylers     : [{\r\n        color     : '#fefefe',\r\n    }, {\r\n        lightness : 17,\r\n    }, {\r\n        weight    : 1.2,\r\n    }],\r\n}];\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the map module.\r\n * @return true;\r\n */\r\nexport const initModule = function() {\r\n    $('.map__container').each(function() {\r\n        const map = new google.maps.Map(this, {\r\n            zoom             : ZOOM,\r\n            center           : coords,\r\n            disableDefaultUI : true,\r\n        });\r\n\r\n        map.mapTypes.set('styled_map', new google.maps.StyledMapType(style));\r\n        map.setMapTypeId('styled_map');\r\n\r\n        const mapMarker = new google.maps.Marker({\r\n            position : coords,\r\n            map      : map\r\n        });\r\n        mapMarker.setIcon('img/map-marker.png');\r\n    });\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the gallery block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the gallery module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    $('.gallery').each(function() {\r\n        $(this).magnificPopup({\r\n            delegate  : '.gallery__thumb-link',\r\n            mainClass : 'lightbox',\r\n            type      : 'image',\r\n            gallery   : {\r\n                enabled  : true,\r\n                tCounter : '',\r\n            },\r\n\r\n            closeMarkup : '<button aria-label=\"Close\" type=\"button\" '\r\n                + 'class=\"mfp-close\">&#215;</button>',\r\n            arrowMarkup : '<button aria-label=\"%title%\" type=\"button\" '\r\n                + 'class=\"mfp-arrow mfp-arrow-%dir%\"></button>',\r\n\r\n            callbacks   : {\r\n                beforeOpen() {\r\n                    this.wrap.attr({\r\n                        'role'       : 'dialog',\r\n                        'aria-label' : 'Gallery',\r\n                    });\r\n                },\r\n            },\r\n        });\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------","/**\r\n * @file Implementation of the menu block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the menu module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    $('.menu').each(function() {\r\n        $(this).magnificPopup({\r\n            delegate  : '.menu-product__link',\r\n            mainClass : 'lightbox',\r\n            type      : 'image',\r\n\r\n            closeMarkup : '<button aria-label=\"Close\" type=\"button\" '\r\n                + 'class=\"mfp-close\">&#215;</button>',\r\n\r\n            callbacks   : {\r\n                beforeOpen() {\r\n                    this.wrap.attr({\r\n                        'role'       : 'dialog',\r\n                        'aria-label' : 'View image',\r\n                    });\r\n                },\r\n            },\r\n        });\r\n    });\r\n    \r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------","/**\r\n * @file Implementation of the reservation form block\r\n * @author Andrey Glotov\r\n */\r\n\r\n/* global Pikaday, moment */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\nconst openingHours = [\r\n    {start: 10, end: 21}, // Sun\r\n    {start: 9,  end: 22}, // Mon\r\n    {start: 9,  end: 22}, // Tue\r\n    {start: 9,  end: 22}, // Wed\r\n    {start: 9,  end: 22}, // Thu\r\n    {start: 9,  end: 22}, // Fri\r\n    {start: 10, end: 21}, // Sat\r\n];\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// -------------------------- BEGIN UTILITY FUNCTIONS -------------------------\r\nconst getStartMoment = function() {\r\n    const currentMoment = moment();\r\n\r\n    // Reservation must be done at least 30 minutes ahead \r\n    currentMoment.add(30, 'minutes');\r\n\r\n    // Round up to nearest half hour\r\n    if ((currentMoment.minutes() % 30) !== 0) {\r\n        currentMoment.add(30 - (currentMoment.minutes() % 30), 'minutes');\r\n    }\r\n\r\n    // If it's too late, allow reservation from only the next day\r\n    if (currentMoment.hours() >= openingHours[currentMoment.day()].end) {\r\n        return moment({\r\n            year  : currentMoment.year(),\r\n            month : currentMoment.month(),\r\n            date  : currentMoment.date() + 1,\r\n        });\r\n    }\r\n\r\n    return currentMoment;\r\n};\r\n\r\nconst getAvailableTimes = function(startMoment) {\r\n    const hours = openingHours[startMoment.day()];\r\n\r\n    const m = moment.max(\r\n        moment(startMoment),\r\n        moment(startMoment).hours(hours.start)\r\n    );\r\n\r\n    const timeArray = [];\r\n\r\n    while (m.hour() < hours.end) {\r\n        timeArray.push(m.format('h:mm A'));\r\n        m.add(30, 'minutes');\r\n    }\r\n\r\n    return timeArray;\r\n};\r\n// --------------------------- END UTILITY FUNCTIONS --------------------------\r\n\r\n// ----------------------------- BEGIN DOM METHODS ----------------------------\r\nconst updateTimeSelect = function($time, startMoment) {\r\n    const timeArray    = getAvailableTimes(startMoment);\r\n    const selectedTime = $time.val();\r\n\r\n    const $options  = timeArray.map(function(time) {\r\n        return $('<option></option>')\r\n            .val(time)\r\n            .text(time)\r\n            .prop('selected', time == selectedTime);\r\n    });\r\n\r\n    $time\r\n        .empty()\r\n        .append($options)\r\n        .trigger('change');\r\n};\r\n\r\nconst initSelect = function($select) {\r\n    $select.select2({\r\n        theme                   : 'theme--default',\r\n        width                   : 'style',\r\n        minimumResultsForSearch : Infinity,\r\n    });\r\n\r\n    const data = $select.data('select2');\r\n    data.$container.addClass('reservation-form__input');\r\n    data.$selection.attr('aria-labelledby', $select.attr('aria-labelledby'));\r\n};\r\n// ------------------------------ END DOM METHODS -----------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the reservation form module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    const startMoment = getStartMoment();\r\n\r\n    $('.reservation-form').each(function() {\r\n        const $form   = $(this);\r\n        const $date   = $form.find('.reservation-form__date');\r\n        const $time   = $form.find('.reservation-form__time');\r\n        const $people = $form.find('.reservation-form__people');\r\n    \r\n        new Pikaday({\r\n            field          : $date.get(0),\r\n    \r\n            defaultDate    : startMoment.toDate(),\r\n            setDefaultDate : true,\r\n    \r\n            // Reservations can be made up to 6 months in advance\r\n            minDate        : startMoment.toDate(),\r\n            maxDate        : moment(startMoment).add(6, 'months').toDate(),\r\n    \r\n            format         : 'DD/MM/YYYY',\r\n            theme          : 'date-picker',\r\n    \r\n            onSelect       : function onSelectDate() {\r\n                updateTimeSelect($time, this.getMoment());\r\n            },\r\n        });\r\n\r\n        initSelect($time);\r\n        initSelect($people);\r\n\r\n        updateTimeSelect($time, startMoment);\r\n\r\n        $form.validate({\r\n            rules: {\r\n                date: {\r\n                    required  : true,\r\n                    validDate : true,\r\n                }\r\n            },\r\n            \r\n            errorClass  : 'error reservation-form__error',\r\n\r\n            highlight   : function(element) {\r\n                $(element).addClass('input_invalid');\r\n            },\r\n            unhighlight : function(element) {\r\n                $(element).removeClass('input_invalid');\r\n            },\r\n        });\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------","/**\r\n * @file Implementation of the slider block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// ----------------------------- BEGIN CONSTANTS ------------------------------\r\nconst AUTOPLAY_SPEED = 5000;\r\nconst TRANSITION_SPEED = 500;\r\n// ------------------------------ END CONSTANTS -------------------------------\r\n\r\n// --------------------------- BEGIN EVENT HANDLERS ---------------------------\r\n\r\n/**\r\n * Remove the \"active\" modifier from the previous slide and apply it to the\r\n * current one\r\n * @param {Object} e The event\r\n * @param {Object} slick Slider instance\r\n * @param {number} current Current slide index\r\n * @param {number} next Next slide index\r\n */\r\nfunction handleSlickBeforeChange(e, slick, current, next) {\r\n    slick.$slides.eq(current).removeClass('slider__slide_active');\r\n    slick.$slides.eq(next).addClass('slider__slide_active');\r\n}\r\n\r\n// ---------------------------- END EVENT HANDLERS ----------------------------\r\n\r\n// ---------------------------- BEGIN PUBLIC METHODS --------------------------\r\n\r\n/**\r\n * Initialize the slider block.\r\n * @return true\r\n */\r\nfunction initBlock($slider) {\r\n    const $container = $('.slider__container', $slider);\r\n    const $prevArrow = $('.slider__arrow_dir_prev', $slider);\r\n    const $nextArrow = $('.slider__arrow_dir_next', $slider);\r\n\r\n    $container.slick({\r\n        rows: 0,\r\n        zIndex: 1,\r\n\r\n        cssEase: 'linear',\r\n        fade: true,\r\n        speed: TRANSITION_SPEED,\r\n\r\n        autoplay: true,\r\n        autoplaySpeed: AUTOPLAY_SPEED,\r\n        pauseOnFocus  : false,\r\n        pauseOnHover  : false,\r\n\r\n        prevArrow: $prevArrow,\r\n        nextArrow: $nextArrow,\r\n    });\r\n\r\n    $container.on('beforeChange', handleSlickBeforeChange);\r\n}\r\n\r\n/**\r\n * Initialize all slider blocks on the page.\r\n */\r\nfunction initAll() {\r\n    $('.slider').each(function() {\r\n        initBlock($(this));\r\n    });\r\n}\r\n\r\n// ----------------------------- END PUBLIC METHODS ---------------------------\r\n\r\nexport default {\r\n    initAll,\r\n    initBlock,\r\n};\r\n","/**\r\n * @file Implementation of the specials slider block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport forceReflow from '../../../js/utils/force-reflow';\r\n\r\n// ----------------------------- BEGIN CONSTANTS ------------------------------\r\n\r\n// Keep these in sync with css!\r\n// TODO: read these values using the computed styles\r\nconst GUTTER_WIDTH = 25;\r\nconst MIN_OPACITY = 0.5;\r\nconst MIN_SCALE = 0.8;\r\nconst TRANSITION_DURATION = 150;\r\n\r\nconst Selectors = {\r\n    ROOT: '.specials-slider',\r\n    SLIDES: '.specials-slider__slide',\r\n    SLIDE_INNER: '.specials-slider__slide-inner',\r\n    PREV_ARROW: '.specials-slider__arrow_dir_prev',\r\n    NEXT_ARROW: '.specials-slider__arrow_dir_next',\r\n};\r\n\r\nconst ClassNames = {\r\n    SLIDE_MOVING: 'specials-slider__slide_moving',\r\n    SLIDE_ACTIVE: 'specials-slider__slide_active',\r\n};\r\n\r\n// ------------------------------- END CONSTANT -------------------------------\r\n\r\n/**\r\n * Specials Slider\r\n */\r\nclass SpecialsSlider {\r\n\r\n    /**\r\n     * Create a slider\r\n     * \r\n     * @param {JQuery} $root The root element\r\n     */\r\n    constructor($root) {\r\n        const $slides = $(Selectors.SLIDES, $root);\r\n        const $prevArrow = $(Selectors.PREV_ARROW, $root);\r\n        const $nextArrow = $(Selectors.NEXT_ARROW, $root);\r\n\r\n        this._elements = { $root, $slides, $prevArrow, $nextArrow };\r\n\r\n        this._state = {\r\n            isTransitioning: false,\r\n            activeIndex: 0,\r\n        };\r\n\r\n        this._config = {\r\n            dOffset: GUTTER_WIDTH / ($slides.length - 1),\r\n            dOpacity: (1 - MIN_OPACITY) / ($slides.length - 1),\r\n            dScale: (1 - MIN_SCALE) / ($slides.length - 1),\r\n        };\r\n\r\n        $prevArrow.click(this.prevSlide.bind(this));\r\n        $nextArrow.click(this.nextSlide.bind(this));\r\n\r\n        this._updateStyles();\r\n    }\r\n\r\n    // -------------------------- BEGIN PRIVATE METHODS -----------------------\r\n\r\n    /**\r\n     * Apply CSS styles to the given slide\r\n     * \r\n     * @param {JQuery} $slide The slide to apply styles to\r\n     * @param {number} order Current stacking order of this slide\r\n     */\r\n    _applySlideStyles($slide, order) {\r\n        const {dOffset, dOpacity, dScale} = this._config;\r\n        \r\n        $slide.css({\r\n            transform: `translateX(${order * dOffset}%)`,\r\n            zIndex: this._elements.$slides.length - order,\r\n        }).find(Selectors.SLIDE_INNER).css({\r\n            opacity: (1 - (order * dOpacity)),\r\n            transform: `scale(${1 - (order * dScale)})`,\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Update CSS styles of all slides\r\n     */\r\n    _updateStyles() { \r\n        const total = this._elements.$slides.length;\r\n    \r\n        this._elements.$slides.each((i, slide) => {\r\n            const $slide = $(slide);\r\n\r\n            if (!$slide.hasClass(ClassNames.SLIDE_MOVING)) {\r\n                const order = (i - this._state.activeIndex + total) % total;\r\n                this._applySlideStyles($slide, order);\r\n            }\r\n        });\r\n    }\r\n\r\n    // --------------------------- END PRIVATE METHODS ------------------------\r\n\r\n    // -------------------------- BEGIN PUBLIC METHODS ------------------------\r\n\r\n    /**\r\n     * Transition to the previous slide\r\n     */\r\n    prevSlide() {\r\n        if (this._state.isTransitioning) {\r\n            return;\r\n        }\r\n        this._state.isTransitioning = true;\r\n\r\n        let activeIndex = this._state.activeIndex;\r\n        const $slides = this._elements.$slides;\r\n\r\n        const $prevSlide = $slides.eq(activeIndex);\r\n\r\n        activeIndex--;\r\n        if (activeIndex < 0) {\r\n            activeIndex = $slides.length - 1;\r\n        }\r\n        this._state.activeIndex = activeIndex;\r\n\r\n        const $movingSlide = $slides.eq(activeIndex);\r\n        \r\n        $movingSlide.addClass(ClassNames.SLIDE_MOVING);\r\n        $movingSlide.css('zIndex', '-=1');\r\n\r\n        setTimeout(() => {\r\n            this._updateStyles();\r\n\r\n            setTimeout(() => {\r\n                forceReflow($movingSlide);\r\n\r\n                $prevSlide.removeClass(ClassNames.SLIDE_ACTIVE);\r\n                $movingSlide.addClass(ClassNames.SLIDE_ACTIVE);\r\n                $movingSlide.removeClass(ClassNames.SLIDE_MOVING);\r\n\r\n                this._applySlideStyles($movingSlide, 0);\r\n\r\n                this._state.isTransitioning = false;\r\n            }, TRANSITION_DURATION);\r\n        }, TRANSITION_DURATION);\r\n    }\r\n\r\n    /**\r\n     * Transition to the next slide\r\n     */\r\n    nextSlide() {\r\n        if (this._state.isTransitioning) {\r\n            return;\r\n        }\r\n        this._state.isTransitioning = true;\r\n\r\n        let activeIndex = this._state.activeIndex;\r\n        const $slides = this._elements.$slides;\r\n        const $movingSlide = $slides.eq(activeIndex);\r\n        \r\n        $movingSlide.addClass(ClassNames.SLIDE_MOVING);\r\n        $movingSlide.css('zIndex', '+=1');\r\n        $movingSlide.removeClass(ClassNames.SLIDE_ACTIVE);\r\n\r\n        activeIndex++;\r\n        if (activeIndex >= $slides.length) {\r\n            activeIndex = 0;\r\n        }\r\n        this._state.activeIndex = activeIndex;\r\n\r\n        const $nextSlide = $slides.eq(activeIndex);\r\n        $nextSlide.addClass(ClassNames.SLIDE_ACTIVE);\r\n        \r\n        setTimeout(() => {\r\n            this._updateStyles();\r\n            \r\n            setTimeout(() => {\r\n                $movingSlide.removeClass(ClassNames.SLIDE_MOVING);\r\n                \r\n                this._applySlideStyles($movingSlide, $slides.length - 1);\r\n\r\n                this._state.isTransitioning = false;\r\n            }, TRANSITION_DURATION);\r\n        }, TRANSITION_DURATION);\r\n    }\r\n\r\n    /**\r\n     * Initialize all specials slider blocks on the page\r\n     */\r\n    static initAll() {\r\n        $(Selectors.ROOT).init(function() {\r\n            new SpecialsSlider($(this));\r\n        });\r\n    }\r\n\r\n    // --------------------------- END PUBLIC METHODS -------------------------\r\n}\r\n\r\nexport default SpecialsSlider;\r\n","/**\r\n * @file Implementation of the portfolio filter block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport {makeListbox, makeDropdown} from '../../../js/utils';\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\nconst KEY_ENTER = 13;\r\nconst KEY_SPACE = 32;\r\n\r\nlet $portfolio, $filter, $inner, $toggle, $list, $btns;\r\n\r\nlet dropdownLogic, listboxLogic;\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// ----------------------------- BEGIN DOM METHODS ----------------------------\r\nconst showList = function() {\r\n    $toggle\r\n        .attr('aria-expanded', 'true')\r\n        .focusin(onToggleFocusin);\r\n\r\n    $list\r\n        .addClass('portfolio-filter__list_visible')\r\n        .click(onListClick)\r\n        .keydown(onListKeydown)\r\n        .focus();\r\n};\r\n\r\nconst hideList = function() {\r\n    $list\r\n        .removeClass('portfolio-filter__list_visible')\r\n        .off({\r\n            click   : onListClick,\r\n            keydown : onListKeydown,\r\n        });\r\n\r\n    $toggle\r\n        .attr('aria-expanded', 'false')\r\n        .off('focusin', onToggleFocusin);\r\n};\r\n// ------------------------------ END DOM METHODS -----------------------------\r\n\r\n// --------------------------- BEGIN EVENT HANDLERS ---------------------------\r\nconst onFilterSelect = function(next, prev) {\r\n    const $prevBtn = $btns.eq(prev);\r\n    const $nextBtn = $btns.eq(next);\r\n\r\n    $prevBtn\r\n        .removeClass('portfolio-filter__btn_active')\r\n        .attr('aria-selected', 'false');\r\n    $nextBtn\r\n        .addClass('portfolio-filter__btn_active')\r\n        .attr('aria-selected', 'true');\r\n\r\n    const activeFilter = $nextBtn.data('filter');\r\n\r\n    $list.attr('aria-activedescendant', $nextBtn.attr('id'));\r\n\r\n    $portfolio.trigger('filter', activeFilter);\r\n};\r\n\r\nconst onListClick = function() {\r\n    $toggle.focus();\r\n};\r\n\r\nconst onListKeydown = function(event) {\r\n    if (event.which === KEY_ENTER || event.which === KEY_SPACE) {\r\n        event.preventDefault();\r\n\r\n        $toggle.focus();\r\n        return false;\r\n    }\r\n};\r\n\r\nconst onToggleFocusin = function() {\r\n    dropdownLogic.hide();\r\n};\r\n\r\nconst onDropdownToggle = function(open) {\r\n    if (open) {\r\n        showList();\r\n    } else {\r\n        hideList();\r\n    }\r\n};\r\n// ---------------------------- END EVENT HANDLERS ----------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the portfolio filter module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    $portfolio = $('.portfolio');\r\n\r\n    $filter    = $('.portfolio-filter');\r\n    $inner     = $filter.find('.portfolio-filter__inner');\r\n    $toggle    = $inner.find('.portfolio-filter__toggle');\r\n    $list      = $inner.find('.portfolio-filter__list');\r\n    $btns      = $list.find('.portfolio-filter__btn');\r\n\r\n    listboxLogic = makeListbox($list, $btns, {\r\n        orientation : 'vertical',\r\n        onSelect    : onFilterSelect,\r\n    });\r\n\r\n    dropdownLogic = makeDropdown($inner, $toggle, {\r\n        onToggle: onDropdownToggle,\r\n    });\r\n\r\n    return true;\r\n};\r\n\r\n/**\r\n * Set filter orientation.\r\n * @param {string} orientation - 'horizontal' or 'vertical'\r\n */\r\nexport const setOrientation = function(orientation) {\r\n    $list.attr('aria-orientation', orientation);\r\n    listboxLogic.setOrientation(orientation);\r\n\r\n    if (orientation === 'horizontal') {\r\n        dropdownLogic.hide().pause();\r\n    } else {\r\n        dropdownLogic.unpause();\r\n    }\r\n};\r\n\r\n/**\r\n * Apply a filter.\r\n * @param {string} filter - The filter to be applied\r\n */\r\nexport const setFilter = function(filter) {\r\n    const sel = `.portfolio-filter__btn[data-filter=\"${filter}\"]`;\r\n    listboxLogic.selectItem($btns.index($(sel)));\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the portfolio grid block\r\n * @author Andrey Glotov\r\n */\r\n\r\n/* global Shuffle */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\nconst itemHtml = `\r\n<div class=\"portfolio-grid__item\">\r\n    <div class=\"portfolio-grid__item-inner\">\r\n        <img class=\"portfolio-grid__img\" />\r\n        <div class=\"portfolio-grid__text\">\r\n            <h2 class=\"portfolio-grid__title\">\r\n                <a class=\"portfolio-grid__link\"></a>\r\n            </h2>\r\n            <ul class=\"portfolio-grid__cats\">\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</div>\r\n`;\r\n\r\nlet shuffleInstance = null;\r\n\r\nlet $portfolio, $grid, $container, $sizer;\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// -------------------------- BEGIN UTILITY FUNCTIONS -------------------------\r\nconst createPortfolioItem = function(data) {\r\n    const $item = $(itemHtml);\r\n\r\n    $item.attr('data-groups', `[\"${data.categories.join('\",\"')}\"]`);\r\n    \r\n    $item.find('.portfolio-grid__link')\r\n        .text(data.title)\r\n        .attr('href', data.link);\r\n\r\n    $item.find('.portfolio-grid__img')\r\n        .attr({\r\n            src : data.image,\r\n            alt : data.title,\r\n        });\r\n\r\n    const $categories = data.categories.map(function(cat) {\r\n        const $catItem = $('<li></li>')\r\n            .addClass('portfolio-grid__cat-item');\r\n\r\n        const $catLink = $('<a></a>')\r\n            .addClass('portfolio-grid__cat-link')\r\n            .attr({\r\n                'href'        : 'javascript:void(0)',\r\n                'role'        : 'button',\r\n                'data-filter' : cat.toLowerCase(),\r\n            })\r\n            .text(cat);\r\n        \r\n        $catItem.append($catLink);\r\n        return $catItem;\r\n    });\r\n\r\n    $item.find('.portfolio-grid__cats').append($categories);\r\n\r\n    return $item;\r\n};\r\n// --------------------------- END UTILITY FUNCTIONS --------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the portfolio grid module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    $portfolio = $('.portfolio');\r\n\r\n    $grid      = $('.portfolio-grid');\r\n    $container = $grid.find('.portfolio-grid__inner');\r\n    $sizer     = $container.find('.portfolio-grid__sizer');\r\n\r\n    shuffleInstance = new Shuffle($container.get(0), {\r\n        itemSelector : '.portfolio-grid__item',\r\n        sizer        : $sizer.get(0),\r\n    });\r\n\r\n    $container\r\n        .on('click', '.portfolio-grid__cat-link', function onCatLinkClick() {\r\n            $portfolio.trigger('filter', $(this).data('filter'));\r\n        })\r\n        // Until all major browsers support the :focus-within CSS pseudo-class\r\n        // apply a class using JavaScript\r\n        .on('focusin', '.portfolio-grid__text', function onItemFocusin() {\r\n            $(this).addClass('.portfolio-grid__text_has-focus');\r\n        })\r\n        .on('focusout', '.portfolio-grid__text', function onItemFocusout() {\r\n            $(this).removeClass('.portfolio-grid__text_has-focus');\r\n        });\r\n};\r\n\r\n/**\r\n * Apply a filter.\r\n * @param {string} filter - The filter to be applied\r\n */\r\nexport const setFilter = function(filter) {\r\n    shuffleInstance.filter(filter);\r\n};\r\n\r\n/**\r\n * Add new items\r\n * @param {Array} items - the items to be added\r\n */\r\nexport const addItems = function(items) {\r\n    const newItems = $.map(items, createPortfolioItem);\r\n    \r\n    newItems.forEach(($item) => $item.insertBefore($sizer));\r\n\r\n    shuffleInstance.add(newItems.map(($item) => $item.get(0)));\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the portfolio block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport * as PortfolioFilter from '../portfolio-filter/portfolio-filter';\r\nimport * as PortfolioGrid   from '../portfolio-grid/portfolio-grid';\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\nconst MEDIUM_BREAKPOINT = 768;\r\nconst FAKE_LOAD_TIME    = 1000;\r\n\r\nlet $portfolio, $grid, $moreBtn;\r\n\r\nlet activeFilter   = 'all';\r\nlet verticalLayout = true;\r\n\r\nconst fakeItems = [{\r\n    title: 'Apple pie',\r\n    image: 'img/content/portfolio/projects/thumbs/apple-pie.jpg',\r\n    link: 'portfolio-single.html',\r\n    categories: ['desserts'],\r\n}, {\r\n    title: 'Fresh fruit cocktail',\r\n    image: 'img/content/portfolio/projects/thumbs/fresh-fruit-cocktail.jpg',\r\n    link: 'portfolio-single.html',\r\n    categories: ['drinks'],\r\n}, {\r\n    title: 'Green tea',\r\n    image: 'img/content/portfolio/projects/thumbs/green-tea.jpg',\r\n    link: 'portfolio-single.html',\r\n    categories: ['drinks'],\r\n}, {\r\n    title: 'Waffles with coffee',\r\n    image: 'img/content/portfolio/projects/thumbs/waffles-with-coffee.jpg',\r\n    link: 'portfolio-single.html',\r\n    categories: ['desserts', 'drinks'],\r\n}, {\r\n    title: 'Chicken livers',\r\n    image: 'img/content/portfolio/projects/thumbs/chicken-livers.jpg',\r\n    link: 'portfolio-single.html',\r\n    categories: ['lunch'],\r\n}];\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// -------------------------- BEGIN UTILITY FUNCTIONS -------------------------\r\nconst loadFakeItems = function() {\r\n    const $d = new $.Deferred();\r\n\r\n    setTimeout(() => {\r\n        $d.resolve({\r\n            items : fakeItems,\r\n            more  : false,\r\n        }); \r\n    }, FAKE_LOAD_TIME);\r\n\r\n    return $d.promise();\r\n};\r\n\r\nconst loadImage = function(src) {\r\n    const $d = new $.Deferred();\r\n\r\n    const image = new Image();\r\n    $(image).on('load', function() {\r\n        $d.resolve();\r\n    });\r\n    image.src = src;\r\n\r\n    return $d.promise();\r\n};\r\n// --------------------------- END UTILITY FUNCTIONS --------------------------\r\n\r\n// --------------------------- BEGIN EVENT HANDLERS ---------------------------\r\nconst onFilterChange = function(event, filter) {\r\n    if (activeFilter !== filter) {\r\n        activeFilter = filter;\r\n\r\n        PortfolioFilter.setFilter(filter);\r\n        PortfolioGrid.setFilter(filter);\r\n    }\r\n};\r\n\r\nconst onMoreBtnClick = function() {\r\n    $grid.attr('aria-busy', 'true');\r\n\r\n    // Show a loader\r\n    const $loader = $('<div></div>')\r\n        .addClass('loader loader_size_l portfolio__loader')\r\n        .insertAfter($moreBtn);\r\n\r\n    // Hide the button\r\n    $moreBtn.addClass('portfolio__more-btn_hidden');\r\n\r\n    let data;\r\n\r\n    loadFakeItems()\r\n        .then(function onItemsLoaded(response) {\r\n            data = response;\r\n\r\n            // Wait until all images are loaded \r\n            return $.when(...response.items.map(function(item) {\r\n                return loadImage(item.image);\r\n            }));\r\n        })\r\n        .then(function onImagesLoaded() {\r\n            $grid.attr('aria-busy', 'false');\r\n\r\n            PortfolioGrid.addItems(data.items);\r\n\r\n            // If there are more items available, show the button again\r\n            if (data.more) {\r\n                $moreBtn.removeClass('portfolio__more-btn_hidden');\r\n            }\r\n        })\r\n        .fail(function onFail() {\r\n            // Display an error message\r\n            const $error = $('<div></div>')\r\n                .addClass('error portfolio__error')\r\n                .text('An error occured');\r\n            $error.insertAfter($loader);\r\n        })\r\n        .always(function onLoadFail() {\r\n            // Hide the loader\r\n            $loader.remove();\r\n        });\r\n};\r\n// ---------------------------- END EVENT HANDLERS ----------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the portfolio module.\r\n * @return true if the portfolio block is present, false otherwise\r\n */\r\nexport const initModule = function() {\r\n    $portfolio = $('.portfolio');\r\n    if ($portfolio.length === 0) {\r\n        return false;\r\n    }\r\n\r\n    $grid    = $portfolio.find('.portfolio__grid');\r\n    $moreBtn = $portfolio.find('.portfolio__more-btn');\r\n\r\n    PortfolioFilter.initModule();\r\n    PortfolioGrid.initModule();\r\n\r\n    $portfolio.on('filter', onFilterChange);\r\n\r\n    $moreBtn.click(onMoreBtnClick);\r\n\r\n    return true;\r\n};\r\n\r\n/**\r\n * Respond to window resize event.\r\n */\r\nexport const handleResize = function() {\r\n    if ($portfolio.length === 0) {\r\n        return;\r\n    }\r\n\r\n    const screenWidth = $(window).outerWidth();\r\n    \r\n    // Switch listbox orientation to vertical on mobile and to horizontal on\r\n    // larger screens.\r\n    if (!verticalLayout && (screenWidth < MEDIUM_BREAKPOINT)) {\r\n        verticalLayout = true;\r\n\r\n        PortfolioFilter.setOrientation('vertical');\r\n    } else if (verticalLayout && (screenWidth >= MEDIUM_BREAKPOINT)) {\r\n        verticalLayout = false;\r\n\r\n        PortfolioFilter.setOrientation('horizontal');\r\n    }\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------","/**\r\n * @file Implementation of the project slider block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the project slider module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    $('.project-slider__container').slick({\r\n        rows      : 0,\r\n        slide     : '.project-slider__slide',\r\n\r\n        prevArrow : '.project-slider__arrow_dir_prev',\r\n        nextArrow : '.project-slider__arrow_dir_next',\r\n        dots      : true,\r\n\r\n        cssEase   : 'linear',\r\n        speed     : 250,\r\n        zIndex    : 1,\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the blog gallery block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// ---------------------------- BEGIN PUBLIC METHODS --------------------------\r\n/**\r\n * Initialize the blog gallery module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    $('.blog-gallery__container').slick({\r\n        rows       : 0,\r\n        slide      : '.blog-gallery__slide',\r\n\r\n        prevArrow  : '.blog-gallery__arrow_dir_prev',\r\n        nextArrow  : '.blog-gallery__arrow_dir_next',\r\n        dots       : false,\r\n\r\n        speed      : 250,\r\n        cssEase    : 'linear',\r\n        zIndex     : 1,\r\n\r\n        responsive : [{\r\n            breakpoint : 970,\r\n            settings   : {\r\n                dots : true\r\n            }\r\n        }]\r\n    });\r\n};\r\n// ----------------------------- END PUBLIC METHODS ---------------------------","/**\r\n * @file Implementation of the comment block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the comment module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    const $commentForm = $('#comment-form');\r\n    const $page        = $('.page');\r\n\r\n    $('.comment__reply-btn').click(function() {\r\n        const id = $(this).closest('.comment').data('id');\r\n    \r\n        $commentForm\r\n            .prependTo($(this)\r\n                .closest('.comment')\r\n                .find('.comment__replies')\r\n                .first());\r\n    \r\n        $page.trigger('comment-reply', id);\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the comment form block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the comment form module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    const $page = $('.page');\r\n\r\n    const $form    = $('.comment-form');\r\n    const $replyTo = $form.find('[name=\"reply-to\"]');\r\n\r\n    $form.validate({\r\n        errorClass  : 'error comment-form__error',\r\n    \r\n        highlight   : function(element) {\r\n            if ($(element).hasClass('input')) {\r\n                $(element).addClass('input_invalid');\r\n            } else if ($(element).hasClass('text-area')) {\r\n                $(element).addClass('text-area_invalid');\r\n            }\r\n        },\r\n    \r\n        unhighlight : function(element) {\r\n            if ($(element).hasClass('input')) {\r\n                $(element).removeClass('input_invalid');\r\n            } else if ($(element).hasClass('text-area')) {\r\n                $(element).removeClass('text-area_invalid');\r\n            }\r\n        },\r\n    });\r\n\r\n    $page.on('comment-reply', function(event, id) {      \r\n        $replyTo.val(id);\r\n\r\n        $('html, body').animate({\r\n            scrollTop: $form.offset().top - 100\r\n        }, 400, function() {\r\n            $('.input:first', $form).focus();\r\n        });\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * Implementation of the share block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport DropdownStrategy from '../../../js/utils/dropdown-strategy';\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n\r\n/**\r\n * Initialize the share block.\r\n * @return true\r\n */\r\nfunction initBlock() {\r\n    const $share = $('.share');\r\n    const $trigger = $('.share__trigger', $share);\r\n    const $drawer = $('.share__drawer', $share);\r\n\r\n    const share = new DropdownStrategy({\r\n        $root: $share,\r\n        $trigger,\r\n        $drawer,\r\n\r\n        onExpand() {\r\n            $drawer.addClass('share__drawer_expanded');\r\n        },\r\n        onCollapse() {\r\n            $drawer.removeClass('share__drawer_expanded');\r\n        }\r\n    });\r\n    share.activate();\r\n\r\n    return true;\r\n}\r\n\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n\r\nexport default {\r\n    initBlock,\r\n};\r\n","/**\r\n * @file Implementation of the product gallery block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\nlet $gallery, $slider, $links;\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// --------------------------- BEGIN EVENT HANDLERS ---------------------------\r\nconst onSliderBeforechange = function(event, slick, currentSlide, nextSlide) {\r\n    $links.each(function() {\r\n        const $link = $(this);\r\n        $link.toggleClass(\r\n            'product-gallery__thumb-link_active',\r\n            $link.attr('data-slide') == nextSlide\r\n        );\r\n    });\r\n};\r\n\r\nconst onLinkClick = function(event) {\r\n    event.preventDefault();\r\n    $slider.slick('slickGoTo', $(this).attr('data-slide'));\r\n};\r\n// ---------------------------- END EVENT HANDLERS ----------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the product gallery module.\r\n * @return true if the product gallery block is present, false otherwise\r\n */\r\nexport const initModule = function() {\r\n    $gallery = $('.product-gallery');\r\n    if ($gallery.length === 0) {\r\n        return false;\r\n    }\r\n\r\n    $links = $gallery.find('.product-gallery__thumb-link');\r\n\r\n    $slider = $gallery.find('.product-gallery__container');\r\n    $slider.slick({\r\n        rows      : 0,\r\n        slide      : '.product-gallery__slide',\r\n\r\n        arrows    : false,\r\n        dots      : false,\r\n\r\n        fade       : true,\r\n        speed      : 400,\r\n        zIndex     : 1,\r\n\r\n        responsive : [{\r\n            breakpoint : 768,\r\n            settings   : {\r\n                dots: true\r\n            }\r\n        }]\r\n    });\r\n\r\n    $slider.on('beforeChange', onSliderBeforechange);\r\n    $gallery.on('click', '.product-gallery__thumb-link', onLinkClick);\r\n\r\n    return false;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the checkout block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// ----------------------------- BEGIN DOM METHODS ----------------------------\r\nconst initSelect = function() {\r\n    $(this)\r\n        .select2({\r\n            theme                   : 'theme--checkout',\r\n            width                   : 'style',\r\n            minimumResultsForSearch : Infinity,\r\n        })\r\n        .data('select2')\r\n        .$container\r\n        .addClass('checkout__input');\r\n};\r\n// ------------------------------ END DOM METHODS -----------------------------\r\n\r\n// --------------------------- BEGIN EVENT HANDLERS ---------------------------\r\nconst onCheckboxChange = function() {\r\n    const $target = $('#' + $(this).data('toggle'));\r\n    $target.slideToggle();\r\n};\r\n// ---------------------------- END EVENT HANDLERS ----------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the checkout module.\r\n * @return true if the block is present; false otherwise\r\n */\r\nexport const initModule = function() {\r\n    const $form = $('.checkout');\r\n    if ($form.length === 0) {\r\n        return false;\r\n    }\r\n\r\n    const $selects  = $form.find('.checkout__select');\r\n    $selects.each(initSelect);\r\n\r\n    const $shipping = $form.find('#shipping-fields');\r\n    $shipping.hide();\r\n\r\n    const $checkboxes = $form.find('.checkout__check-input');\r\n    $checkboxes.change(onCheckboxChange);\r\n\r\n    $form.validate({\r\n        errorClass     : 'error checkout__error',\r\n    \r\n        ignore         : '.checkout__input:hidden',\r\n    \r\n        highlight: function(element) {\r\n            if ($(element).hasClass('input')) {\r\n                $(element).addClass('input_invalid');\r\n            }\r\n        },\r\n    \r\n        unhighlight    : function(element) {\r\n            if ($(element).hasClass('input')) {\r\n                $(element).removeClass('input_invalid');\r\n            }\r\n        },\r\n    \r\n        errorPlacement : function(error, element) {\r\n            if (element.attr('name') === 'payment') {\r\n                element\r\n                    .closest('.checkout__payments')\r\n                    .prepend(error);\r\n            } else {\r\n                error.insertAfter(element);\r\n            }\r\n        },\r\n    \r\n        // messages       : {\r\n        //     payment: 'Please select a payment method',\r\n        // },\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n\r\n// $('.checkout__toggle-input').change(function() {\r\n//     $('#' + $(this).data('target-id')).slideToggle();\r\n// });\r\n\r\n// $('.checkout__payment-item').click(function() {\r\n//     $('.checkout__payment-radio', $(this))\r\n//         .prop('checked', true)\r\n//         .change();\r\n// });\r\n\r\n// $('.checkout__payment-radio').change(function() {\r\n//     $(this)\r\n//         .closest('.checkout__payments')\r\n//         .find('.checkout__payment-item')\r\n//         .each(function() {\r\n//             const isChecked = $('.checkout__payment-radio', $(this))\r\n//                 .prop('checked');\r\n            \r\n//             if (isChecked) {\r\n//                 $('.checkout__payment-desc', $(this))\r\n//                     .slideDown();\r\n//             } else {\r\n//                 $('.checkout__payment-desc', $(this))\r\n//                     .slideUp();\r\n//             }\r\n//         });\r\n// });\r\n","/**\r\n * @file Implementation of the payment block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the payment module.\r\n * @return true if the block is present; false otherwise\r\n */\r\nexport const initModule = function() {\r\n    const $payment = $('.payment');\r\n    if ($payment.length === 0) {\r\n        return false;\r\n    }\r\n\r\n    const $radios = $payment.find('.payment__radio');\r\n    const $desc   = $payment.find('.payment__desc');\r\n    $radios.change(function onRadioChange() {\r\n        $desc.slideUp();\r\n\r\n        $(this)\r\n            .closest('.payment__method')\r\n            .find('.payment__desc')\r\n            .slideDown();\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the product block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\nconst RESPONSE_TIME = 1000;\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// -------------------------- BEGIN UTILITY FUNCTIONS -------------------------\r\nconst fakeRequest = function() {\r\n    const $d = $.Deferred();\r\n\r\n    // Mock a server request\r\n    setTimeout(function() {\r\n        $d.resolve();\r\n    }, RESPONSE_TIME);\r\n\r\n    return $d.promise();\r\n};\r\n// --------------------------- END UTILITY FUNCTIONS --------------------------\r\n\r\n// --------------------------- BEGIN EVENT HANDLERS ---------------------------\r\nconst onAddBtnClick = function() {\r\n    const $loader = $('<span></span>')\r\n        .addClass('loader loader_size_s product__add-loader')\r\n        .insertAfter($(this));\r\n\r\n    $(this).remove();\r\n\r\n    fakeRequest().then(function onItemAdded() {\r\n        $('<a></a>')\r\n            .attr('href', 'shop-cart.html')\r\n            .addClass('product__cart-link')\r\n            .text('Product added')\r\n            .insertAfter($loader)\r\n            .focus();\r\n\r\n        $loader.remove();\r\n    });\r\n};\r\n\r\nconst onProductFocusin = function() {\r\n    $(this).addClass('product_has-focus');\r\n};\r\n\r\nconst onProductFocusout = function() {\r\n    $(this).removeClass('product_has-focus');\r\n};\r\n// ---------------------------- END EVENT HANDLERS ----------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the shop filter module.\r\n * @return true\r\n */\r\nexport const initModule = function() {\r\n    $('.product').each(function() {\r\n        const $product = $(this);\r\n        const $addBtn  = $product.find('.product__add-btn');\r\n\r\n        $addBtn.click(onAddBtnClick);\r\n\r\n        // Until all major browsers support the :focus-within CSS pseudo-class\r\n        // apply a class using JavaScript\r\n        $product\r\n            .focusin(onProductFocusin)\r\n            .focusout(onProductFocusout);\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the review form block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the review form module.\r\n * @return true if the block is present, false otherwise\r\n */\r\nexport const initModule = function() {\r\n    const $form = $('.review-form');\r\n    if ($form.length === 0) {\r\n        return false;\r\n    }\r\n\r\n    $form.validate({\r\n        errorClass     : 'error review-form__error',\r\n    \r\n        errorPlacement : function(error, element) {\r\n            element.closest('.review-form__field').append(error);\r\n        },\r\n    \r\n        highlight      : function(element) {\r\n            if ($(element).hasClass('input')) {\r\n                $(element).addClass('input_invalid');\r\n            } else if ($(element).hasClass('text-area')) {\r\n                $(element).addClass('text-area_invalid');\r\n            }\r\n        },\r\n    \r\n        unhighlight    : function(element) {\r\n            if ($(element).hasClass('input')) {\r\n                $(element).removeClass('input_invalid');\r\n            } else if ($(element).hasClass('text-area')) {\r\n                $(element).removeClass('text-area_invalid');\r\n            }\r\n        },\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the shipping calculator block\r\n * @author Andrey Glotov\r\n */\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the shipping calculator module.\r\n * @return true if the block is present, false otherwise\r\n */\r\nexport const initModule = function() {\r\n    const $calc = $('.shipping-calc');\r\n    if ($calc.length === 0) {\r\n        return false;\r\n    }\r\n\r\n    const $toggle  = $calc.find('.shipping-calc__toggle');\r\n    const $form    = $calc.find('.shipping-calc__form');\r\n    const $country = $calc.find('.shipping-calc__country');\r\n\r\n    let formExpanded = false;\r\n    $toggle.click(function onShippingCalcToggle() {\r\n        formExpanded = !formExpanded;\r\n\r\n        $form.slideToggle();\r\n        $toggle.attr('aria-expanded', String(formExpanded));\r\n    });\r\n    \r\n    $country\r\n        .select2({\r\n            theme                   : 'theme--small',\r\n            width                   : 'style',\r\n            minimumResultsForSearch : Infinity,\r\n            placeholder             : 'Select a country',\r\n        })\r\n        .data('select2')\r\n        .$container\r\n        .addClass('shipping-calc__input');\r\n\r\n    $form.validate({\r\n        errorClass     : 'error shipping-calc__error',\r\n    \r\n        ignore         : [],\r\n\r\n        errorPlacement : function(error, element) {\r\n            if (element.hasClass('shipping-calc__country')) {\r\n                error.insertAfter(element.next('.shipping-calc__input'));\r\n            } else {\r\n                error.insertAfter(element);\r\n            }\r\n        },\r\n    \r\n        highlight      : function(element) {\r\n            if ($(element).hasClass('input')) {\r\n                $(element).addClass('input_invalid');\r\n            } else if ($(element).hasClass('shipping-calc__country')) {\r\n                $(element)\r\n                    .next('.shipping-calc__input')\r\n                    .addClass('select2-container--error');\r\n            }\r\n        },\r\n    \r\n        unhighlight     : function(element) {\r\n            if ($(element).hasClass('input')) {\r\n                $(element).removeClass('input_invalid');\r\n            } else if ($(element).hasClass('shipping-calc__country')) {\r\n                $(element)\r\n                    .next('.shipping-calc__input')\r\n                    .removeClass('select2-container--error');\r\n            }\r\n        }\r\n    });\r\n    \r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the shop filter block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport {makeDropdown} from '../../../js/utils';\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n/**\r\n * Initialize the shop filter module.\r\n * @return true if the filter block is present, false otherwise\r\n */\r\nexport const initModule = function() {\r\n    const $filter = $('.shop-filter');\r\n    if ($filter.length === 0) {\r\n        return false;\r\n    }\r\n\r\n    const $inner  = $filter.find('.shop-filter__inner');\r\n    const $toggle = $inner.find('.shop-filter__toggle');\r\n    const $list   = $inner.find('.shop-filter__list');\r\n\r\n    makeDropdown($inner, $toggle, {\r\n        hoverToggles : true,\r\n\r\n        onToggle     : function onShopFilterToggle(open) {\r\n            $list.toggleClass('shop-filter__list_visible', open);\r\n\r\n            if (open) {\r\n                $toggle.attr('aria-expanded', 'true');\r\n            } else {\r\n                $toggle.removeAttr('aria-expanded');\r\n            }\r\n        },\r\n    });\r\n\r\n    return true;\r\n};\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n","/**\r\n * @file Implementation of the page block\r\n * @author Andrey Glotov\r\n */\r\n\r\nimport LazyLoader from '../../../js/utils/lazy-loader';\r\n\r\nimport Header from '../header/header';\r\n\r\nimport Nav from '../nav/nav';\r\nimport * as Tabs            from '../tabs/tabs';\r\n\r\nimport * as AboutGallery    from '../../about/about-gallery/about-gallery';\r\nimport * as ContactForm     from '../../contact/contact-form/contact-form';\r\nimport * as ContactMap      from '../../contact/map/map';\r\nimport * as Gallery         from '../../common/gallery/gallery';\r\nimport * as Menu            from '../../menu/menu/menu';\r\nimport * as ReservationForm from '../../reservation/reservation-form/reservation-form';\r\nimport Slider from '../../common/slider/slider';\r\nimport SpecialsSlider from '../../common/specials-slider/specials-slider';\r\n\r\nimport * as Portfolio       from '../../portfolio/portfolio/portfolio';\r\nimport * as ProjectSlider   from '../../portfolio/project-slider/project-slider';\r\n\r\nimport * as BlogGallery     from '../../blog/blog-gallery/blog-gallery';\r\nimport * as Comment         from '../../blog/comment/comment';\r\nimport * as CommentForm     from '../../blog/comment-form/comment-form';\r\nimport Share from '../../blog/share/share';\r\n\r\nimport * as Checkout        from '../../shop/checkout/checkout';\r\nimport * as Payment         from '../../shop/payment/payment';\r\nimport * as Product         from '../../shop/product/product';\r\nimport * as ProductGallery  from '../../shop/product-gallery/product-gallery';\r\nimport * as ReviewForm      from '../../shop/review-form/review-form';\r\nimport * as ShippingCalc    from '../../shop/shipping-calc/shipping-calc';\r\nimport * as ShopFilter      from '../../shop/shop-filter/shop-filter';\r\n\r\n// -------------------------- BEGIN MODULE VARIABLES --------------------------\r\n\r\nconst RESIZE_INTERVAL       = 200;  // Resize debouncing interval\r\nconst SCROLL_INTERVAL       = 200;  // Scroll throttling interval\r\n\r\nlet resizeTimer = null;\r\nlet scrollTimer = null;\r\nlet wasScrolled = false;\r\n\r\n// --------------------------- END MODULE VARIABLES ---------------------------\r\n\r\n// --------------------------- BEGIN EVENT HANDLERS ---------------------------\r\n\r\n/**\r\n * Handle the window scroll event\r\n */\r\nfunction handleWindowScroll() {\r\n    LazyLoader.scanImages();\r\n    Header.handleScroll();\r\n}\r\n\r\n/**\r\n * Handle the window resize event\r\n */\r\nfunction handleWindowResize() {\r\n    Nav.handleResize();\r\n    Portfolio.handleResize();\r\n    Tabs.handleResize();\r\n}\r\n\r\n/**\r\n * Debounce the window resize event\r\n */\r\nfunction debounceWindowResize() {\r\n    clearTimeout(resizeTimer);\r\n    resizeTimer = setTimeout(handleWindowResize, RESIZE_INTERVAL);\r\n}\r\n\r\n/**\r\n * Throttle the window scroll event\r\n */\r\nfunction throttleWindowScroll() {\r\n    if (scrollTimer) {\r\n        // Ensure that we catch and execute that last invocation.\r\n        wasScrolled = true;\r\n        return;\r\n    }\r\n\r\n    handleWindowScroll();\r\n\r\n    scrollTimer = this.setTimeout(function() {\r\n        scrollTimer = null;\r\n        if (wasScrolled) {\r\n            handleWindowScroll();\r\n            wasScrolled = false;\r\n        }\r\n    }, SCROLL_INTERVAL);\r\n}\r\n\r\n// ---------------------------- END EVENT HANDLERS ----------------------------\r\n\r\n// --------------------------- BEGIN PUBLIC METHODS ---------------------------\r\n\r\n/**\r\n * Initialize the page block.\r\n * @return true\r\n */\r\nfunction initBlock() {\r\n    $(window).on({\r\n        resize: debounceWindowResize,\r\n        scroll: throttleWindowScroll,\r\n    });\r\n\r\n    // Lazy image loader\r\n    LazyLoader.init();\r\n\r\n    // Common blocks\r\n    Header.initBlock();\r\n    Nav.initBlock();\r\n    Tabs.initModule();\r\n\r\n    // Inner page blocks\r\n    AboutGallery.initModule();\r\n    ContactForm.initModule();\r\n    ContactMap.initModule();\r\n    Gallery.initModule();\r\n    Menu.initModule();\r\n    ReservationForm.initModule();\r\n    Slider.initAll();\r\n    SpecialsSlider.initAll();\r\n\r\n    // Portfolio blocks\r\n    Portfolio.initModule();\r\n    ProjectSlider.initModule();\r\n\r\n    // Blog blocks\r\n    BlogGallery.initModule();\r\n    Comment.initModule();\r\n    CommentForm.initModule();\r\n    Share.initBlock();\r\n\r\n    // Shop blocks\r\n    Checkout.initModule();\r\n    Payment.initModule();\r\n    Product.initModule();\r\n    ProductGallery.initModule();\r\n    ReviewForm.initModule();\r\n    ShippingCalc.initModule();\r\n    ShopFilter.initModule();\r\n\r\n    // Process the initial window size and scroll position\r\n    handleWindowResize();\r\n    handleWindowScroll();\r\n\r\n    return true;\r\n}\r\n\r\n// ---------------------------- END PUBLIC METHODS ----------------------------\r\n\r\nexport default {\r\n    initBlock,\r\n};\r\n","import Page from '../blocks/common/page/page';\r\n\r\n// The page block is responsible for initialization of all other blocks\r\nPage.initBlock();\r\n"],"sourceRoot":""}